"use strict";(self.webpackChunkmetaheuristic_app=self.webpackChunkmetaheuristic_app||[]).push([[447],{535:(M,U,c)=>{c.d(U,{C:()=>i});var i=(()=>{return(r=i||(i={}))[r.show=0]="show",r[r.loading=1]="loading",r[r.empty=2]="empty",r[r.wait=3]="wait",r[r.firstLoading=4]="firstLoading",i;var r})()},4447:(M,U,c)=>{c.r(U),c.d(U,{BatchModule:()=>ne,BatchRoutes:()=>Q,BatchRoutingModule:()=>j});var i=c(1180),r=c(6895),x=c(4006),h=c(9299),p=c(3081),$=c(6423),w=c(535),S=c(8889),t=c(4650),E=c(4853),b=c(1439),T=c(9185),A=c(6264),C=c(305),v=c(5014),B=c(9863);function H(e,o){if(1&e&&(t.TgZ(0,"ct-section-body-row"),t._uU(1," \n      "),t.TgZ(2,"ct-pre"),t._uU(3),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.response.console)}}const k=function(e){return{batchId:e}},K=function(e,o){return[e,o]};let P=(()=>{class e{constructor(n,s,a){(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"batchService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"states",w.C),(0,i.Z)(this,"currentState",w.C.firstLoading),(0,i.Z)(this,"response",void 0),(0,i.Z)(this,"batchId",void 0),this.route=n,this.batchService=s,this.router=a}ngOnInit(){this.batchId=this.route.snapshot.paramMap.get("batchId"),this.updateResponse()}updateResponse(){this.batchService.getProcessingResourceStatus(this.batchId).subscribe(n=>{this.response=n,this.currentState=this.states.show})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(h.gz),t.Y36(S.$),t.Y36(h.F0))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["batch-status"]],decls:21,vars:10,consts:[[4,"ngIf"]],template:function(n,s){1&n&&(t._uU(0,"\n"),t.TgZ(1,"ct-section"),t._uU(2,"\n  "),t.TgZ(3,"ct-section-header"),t._uU(4,"\n    "),t.TgZ(5,"ct-section-header-row"),t._uU(6,"\n      "),t.TgZ(7,"ct-heading"),t._uU(8,"  \n        "),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._uU(12,"\n      "),t.qZA(),t._uU(13,"\n    "),t.qZA(),t._uU(14,"\n  "),t.qZA(),t._uU(15,"\n  "),t.TgZ(16,"ct-section-body"),t._uU(17,"\n    "),t.YNc(18,H,5,1,"ct-section-body-row",0),t._uU(19,"\n  "),t.qZA(),t._uU(20,"\n"),t.qZA()),2&n&&(t.xp6(10),t.hij("",t.xi3(11,2,"batch-status.Status of execution of batch _batchId_",t.VKq(5,k,s.batchId))," "),t.xp6(8),t.Q6J("ngIf",t.WLB(7,K,s.states.wait,s.states.show).includes(s.currentState)))},dependencies:[r.O5,E.Q,b.U,T.n,A.i,C.Z,v.t,B._,p.X$],styles:["pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word}"]})),e})();var G=c(2199),I=c(8318),m=c(3788),q=c(1145),J=c(6890),N=c(2555),z=c(2379),X=c(5510),W=c(1099),Y=c(8868),F=c(3370),V=c(2587),tt=c(1023),et=c(3238),D=c(4859),y=c(9549),nt=c(4385);const ot=["fileUpload"];function ct(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n                                "),t.TgZ(2,"mat-option",11),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("value",n),t.xp6(1),t.Oqu(n.uid)}}function it(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"ct-section-body"),t._uU(17,"\n                "),t.TgZ(18,"ct-section-body-row"),t._uU(19,"\n                    "),t.TgZ(20,"mat-form-field",2),t._uU(21,"\n                        "),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-select",3),t.NdJ("ngModelChange",function(a){t.CHM(n);const u=t.oxw();return t.KtG(u.sourceCode=a)}),t._uU(27,"\n                            "),t.YNc(28,ct,5,2,"div",4),t._uU(29,"\n                        "),t.qZA(),t._uU(30,"\n                        "),t.TgZ(31,"mat-hint"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n\n                    "),t._UZ(36,"br"),t._uU(37,"\n                    "),t._UZ(38,"br"),t._uU(39,"\n\n                    "),t.TgZ(40,"div"),t._uU(41,"\n                        "),t.TgZ(42,"ct-file-upload",5,6),t.NdJ("changed",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.fileUploadChanged())}),t.ALo(44,"translate"),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                        "),t.TgZ(47,"ct-hint"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\n                        "),t.TgZ(51,"ct-hint"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._uU(54,"\n                    "),t.qZA(),t._uU(55,"\n                "),t.qZA(),t._uU(56,"\n            "),t.qZA(),t._uU(57,"\n            "),t.TgZ(58,"ct-section-footer"),t._uU(59,"\n                "),t.TgZ(60,"ct-section-footer-row"),t._uU(61,"\n                    "),t.TgZ(62,"ct-flex",7),t._uU(63,"\n                        "),t.TgZ(64,"ct-flex-item"),t._uU(65,"\n                            "),t.TgZ(66,"button",8),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.back())}),t._uU(67),t.ALo(68,"translate"),t.qZA(),t._uU(69,"\n                        "),t.qZA(),t._uU(70,"\n                        "),t.TgZ(71,"ct-flex-item"),t._uU(72,"\n                            "),t.TgZ(73,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.upload())}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._uU(76,"\n                        "),t.qZA(),t._uU(77,"\n                    "),t.qZA(),t._uU(78,"\n                "),t.qZA(),t._uU(79,"\n            "),t.qZA(),t._uU(80,"\n        "),t.qZA(),t._uU(81,"\n    "),t.qZA(),t._uU(82,"\n    "),t.TgZ(83,"ct-col",1),t._uU(84,"\n        "),t._UZ(85,"ct-rest-status",10),t._uU(86,"\n    "),t.qZA(),t._uU(87,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.Oqu(t.lcZ(12,12,"batch-add.Upload file for processing")),t.xp6(12),t.hij(" ",t.lcZ(24,14,"batch-add.List of Source Codes"),""),t.xp6(3),t.Q6J("ngModel",n.sourceCode),t.xp6(2),t.Q6J("ngForOf",n.listOfSourceCodes),t.xp6(4),t.Oqu(t.lcZ(33,16,"batch-add.This is a required field.")),t.xp6(10),t.s9C("buttonTitle",t.lcZ(44,18,"batch-add.Select File")),t.xp6(6),t.Oqu(t.lcZ(49,20,"batch-add.This is a required field.")),t.xp6(4),t.Oqu(t.lcZ(53,22,"batch-add.Only .xml and .zip files are supported")),t.xp6(15),t.hij("\n                                ",t.lcZ(68,24,"batch-add.Cancel"),""),t.xp6(6),t.Q6J("disabled",!n.sourceCode||!n.file),t.xp6(1),t.hij(" ",t.lcZ(75,26,"batch-add.Upload-File-button"),""),t.xp6(11),t.Q6J("content",n.uploadResponse)}}let st=(()=>{class e extends I.S{constructor(n,s,a,u,l,d){super(d),(0,i.Z)(this,"batchService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"settingsService",void 0),(0,i.Z)(this,"authenticationService",void 0),(0,i.Z)(this,"currentStates",new Set),(0,i.Z)(this,"response",void 0),(0,i.Z)(this,"uploadResponse",void 0),(0,i.Z)(this,"sourceCode",void 0),(0,i.Z)(this,"file",void 0),(0,i.Z)(this,"listOfSourceCodes",[]),(0,i.Z)(this,"fileUpload",void 0),this.batchService=n,this.router=s,this.route=a,this.translate=u,this.settingsService=l,this.authenticationService=d}ngOnInit(){this.subscribeSubscription(this.settingsService.events.subscribe(n=>{n instanceof q.U&&this.translate.use(n.settings.language)})),this.updateResponse()}ngOnDestroy(){this.unsubscribeSubscriptions()}updateResponse(){this.batchService.batchAdd().subscribe(n=>{this.response=n,this.listOfSourceCodes=this.response.items})}back(){this.router.navigate(["../"],{relativeTo:this.route})}upload(){this.batchService.uploadFile(this.sourceCode.id.toString(),this.fileUpload.fileInput.nativeElement.files[0]).subscribe(n=>{n.status===G.o.OK&&this.back(),this.uploadResponse=n})}fileUploadChanged(){this.file=this.fileUpload.fileInput.nativeElement.files[0]||!1}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(S.$),t.Y36(h.F0),t.Y36(h.gz),t.Y36(p.sK),t.Y36(q.g),t.Y36(m.$h))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["batch-add"]],viewQuery:function(n,s){if(1&n&&t.Gf(ot,5),2&n){let a;t.iGM(a=t.CRH())&&(s.fileUpload=a.first)}},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["appearance","outline"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["acceptTypes",".zip, .xml",3,"buttonTitle","changed"],["fileUpload",""],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"],[3,"value"]],template:function(n,s){1&n&&t.YNc(0,it,88,28,"ct-cols",0),2&n&&t.Q6J("ngIf",s.response)},dependencies:[r.sg,r.O5,b.U,T.n,J.V,N.R,z.t,X.W,W.E,A.i,C.Z,v.t,Y.B,F.i,B._,V.C,tt.R,et.ey,D.lW,y.KE,y.hX,y.bx,nt.gD,x.JJ,x.On,p.X$],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})),e})();var at=c(1623),ut=c(4186),lt=c(197),rt=c(5155);let dt=(()=>{class e{constructor(){}ngOnInit(){}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["batch-root"]],decls:8,vars:0,template:function(n,s){1&n&&(t.TgZ(0,"ct-content"),t._uU(1,"\n    "),t._UZ(2,"router-outlet"),t._uU(3,"\n    "),t._UZ(4,"ct-back-button"),t._uU(5,"\n    "),t._UZ(6,"copy-right"),t._uU(7,"\n"),t.qZA())},dependencies:[h.lC,ut.O,lt.N,rt.N]})),e})();var _t=c(456),ht=c(653);let pt=(()=>{class e{constructor(n){(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"sourceCodeId",void 0),(0,i.Z)(this,"execContextId",void 0),this.route=n,this.sourceCodeId=this.route.snapshot.paramMap.get("sourceCodeId"),this.execContextId=this.route.snapshot.paramMap.get("execContextId")}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(h.gz))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["batch-state"]],decls:19,vars:2,consts:[[3,"sourceCodeId","execContextId"]],template:function(n,s){1&n&&(t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-heading"),t._uU(7,"State of Tasks"),t.qZA(),t._uU(8,"\n        "),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n    "),t.TgZ(11,"ct-section-body"),t._uU(12,"\n        "),t.TgZ(13,"ct-section-body-row"),t._uU(14,"\n            "),t._UZ(15,"ct-state-of-tasks",0),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n"),t.qZA()),2&n&&(t.xp6(15),t.Q6J("sourceCodeId",s.sourceCodeId)("execContextId",s.execContextId))},dependencies:[b.U,T.n,A.i,C.Z,v.t,B._,ht.$]})),e})();var _=c(3626),L=c(7520),mt=c(9272),Zt=c(5986),ft=c(6707),gt=c(4327),Ut=c(5938),xt=c(7530),bt=c(7824),Tt=c(7392),R=function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};function Ct(e,o){1&e&&t.GkF(0)}function vt(e,o){1&e&&(t.TgZ(0,"span",22),t._uU(1,"\u2713\xa0\xa0"),t.qZA())}function Bt(e,o){1&e&&(t.TgZ(0,"span",22),t._uU(1,"\u2717\xa0\xa0"),t.qZA())}function St(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.Id")))}function qt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.batch.id," ")}}function yt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"batch.Created On"),"\n                        "))}function Lt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,n.batch.createdOn,"MMM d, yyyy, HH:mm:ss")," ")}}function Rt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"batch.Owner's username"),"\n                        "))}function Ot(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.username)}}function wt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                            ",t.lcZ(2,1,"batch.Is Batch Consistent?")," "))}function It(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.true")))}function Jt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.false")))}function Nt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1," "),t.YNc(2,It,3,3,"span",0),t.YNc(3,Jt,3,3,"span",0),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",n.ok),t.xp6(1),t.Q6J("ngIf",!n.ok)}}function Yt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1,"\n                            "),t.TgZ(2,"div",25),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5,"\n                            "),t.TgZ(6,"div",25),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\n                        "),t.qZA()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"batch.Source Code")),t.xp6(4),t.Oqu(t.lcZ(8,4,"batch.File name")))}function Ft(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1,"\n                            "),t.TgZ(2,"div",25),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.TgZ(5,"div",25),t._uU(6),t.qZA(),t._uU(7,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(3),t.Oqu(n.sourceCodeUid),t.xp6(3),t.Oqu(n.uploadedFileName)}}function Dt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"batch.Exec State"),"\n                        "))}function Qt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Error"),"\n                            "))}function jt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Preparing"),"\n                            "))}function Mt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Processing"),"\n                            "))}function $t(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Finished"),"\n                            "))}function Et(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1,"\n                            "),t.YNc(2,Qt,3,3,"span",0),t._uU(3,"\n                            "),t.YNc(4,jt,3,3,"span",0),t._uU(5,"\n                            "),t.YNc(6,Mt,3,3,"span",0),t._uU(7,"\n                            "),t.YNc(8,$t,3,3,"span",0),t._uU(9,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",-1===n.execState),t.xp6(2),t.Q6J("ngIf",2===n.execState),t.xp6(2),t.Q6J("ngIf",3===n.execState),t.xp6(2),t.Q6J("ngIf",4===n.execState)}}function Ht(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1," "),t.qZA())}const kt=function(e,o,n){return["/batch",e,"source-code",o,"exec-context",n,"state"]},Kt=function(e){return["/batch",e,"status"]};function Pt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",24),t._uU(1,"\n                            "),t.TgZ(2,"ct-flex",26),t._uU(3,"\n                                "),t.TgZ(4,"ct-flex-item"),t._uU(5,"\n                                    "),t.TgZ(6,"button",27),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\n                                "),t.qZA(),t._uU(10,"\n\n                                "),t.TgZ(11,"ct-flex-item"),t._uU(12,"\n                                    "),t.TgZ(13,"button",27),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\n                                "),t.qZA(),t._uU(17,"\n\n                                "),t.TgZ(18,"ct-flex-item"),t._uU(19,"\n                                    "),t.TgZ(20,"button",28),t.NdJ("click",function(a){const l=t.CHM(n).$implicit,d=t.oxw(2);return t.KtG(d.downloadFile(a,l.batch.id))}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._uU(23,"\n                                "),t.qZA(),t._uU(24,"\n\n                                "),t.TgZ(25,"ct-flex-item"),t._uU(26,"\n                                    "),t.TgZ(27,"button",29),t.NdJ("click",function(a){const l=t.CHM(n).$implicit,d=t.oxw(2);return t.KtG(d.delete(a,l))}),t._uU(28,"\n                                        "),t.TgZ(29,"mat-icon"),t._uU(30,"delete"),t.qZA(),t._uU(31,"\n                                    "),t.qZA(),t._uU(32,"\n                                "),t.qZA(),t._uU(33,"\n                            "),t.qZA(),t._uU(34,"\n                        "),t.qZA()}if(2&e){const n=o.$implicit;t.xp6(6),t.Q6J("disabled",n.execContextDeleted)("routerLink",t.kEZ(14,kt,n.batch.id,n.batch.sourceCodeId,n.batch.execContextId)),t.xp6(1),t.hij("\n                                        ",t.lcZ(8,8,"batch.Task states"),""),t.xp6(6),t.Q6J("disabled",4!==n.execState||n.execContextDeleted)("routerLink",t.VKq(18,Kt,n.batch.id)),t.xp6(1),t.hij("\n                                        ",t.lcZ(15,10,"batch.Status"),""),t.xp6(6),t.Q6J("disabled",4!==n.execState||n.execContextDeleted),t.xp6(1),t.hij("\n                                        ",t.lcZ(22,12,"batch.Download Result"),"")}}function Gt(e,o){1&e&&(t.TgZ(0,"tr",30),t._uU(1," "),t.qZA())}function zt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr",31),t.NdJ("click",function(a){const l=t.CHM(n).$implicit,d=t.oxw(2);return t.KtG(d.selectRow(a,l))}),t.qZA()}if(2&e){const n=o.$implicit,s=t.oxw(2);t.ekj("deleted-table-row",s.isDeletedRow(n))("selected-color",s.isSelectedRow(n))}}function Xt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-flex-item"),t._uU(1,"\n                    "),t.TgZ(2,"ct-flex",32),t._uU(3,"\n                        "),t.TgZ(4,"ct-flex-item"),t._uU(5,"\n                            "),t.TgZ(6,"div",33),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\n                        "),t.qZA(),t._uU(10,"\n                        "),t.TgZ(11,"ct-flex-item"),t._uU(12,"\n                            "),t.TgZ(13,"button",34),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.downloadSelectedRows())}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\n                        "),t.qZA(),t._uU(17,"\n                        "),t.TgZ(18,"ct-flex-item"),t._uU(19,"\n                            "),t.TgZ(20,"button",34),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.discardSelectedRows())}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._uU(23,"\n                        "),t.qZA(),t._uU(24,"\n                    "),t.qZA(),t._uU(25,"\n                "),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(7),t.AsE("\n                                ",t.lcZ(8,4,"batch.Batch")," \xd7 ",n.countOfSelectedRows(),"\n                            "),t.xp6(7),t.Oqu(t.lcZ(15,6,"batch.Download")),t.xp6(7),t.Oqu(t.lcZ(22,8,"batch.Discard"))}}function Wt(e,o){1&e&&t.GkF(0)}function Vt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",2),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n                "),t.TgZ(15,"ct-flex-item"),t._uU(16,"\n                    "),t.TgZ(17,"ct-flex",3),t._uU(18,"\n                        "),t.TgZ(19,"ct-flex-item"),t._uU(20,"\n                            "),t.YNc(21,Ct,1,0,"ng-container",4),t._uU(22,"\n                        "),t.qZA(),t._uU(23,"\n                        "),t.TgZ(24,"ct-flex-item"),t._uU(25,"\n                            "),t.TgZ(26,"button",5),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.toggleFilter())}),t._uU(27,"\n                                "),t.YNc(28,vt,2,0,"span",6),t._uU(29,"\n                                "),t.YNc(30,Bt,2,0,"span",6),t._uU(31,"\n                                "),t.TgZ(32,"span"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._uU(35,"\n                            "),t.qZA(),t._uU(36,"\n                        "),t.qZA(),t._uU(37,"\n                    "),t.qZA(),t._uU(38,"\n                "),t.qZA(),t._uU(39,"\n            "),t.qZA(),t._uU(40,"\n        "),t.qZA(),t._uU(41,"\n    "),t.qZA(),t._uU(42,"\n    "),t.TgZ(43,"ct-section-body"),t._uU(44,"\n        "),t.TgZ(45,"ct-section-body-row"),t._uU(46,"\n            "),t.TgZ(47,"ct-table",7),t._uU(48,"\n                "),t.TgZ(49,"table",8),t._uU(50,"\n                    "),t.ynx(51,9),t._uU(52,"\n                        "),t.YNc(53,St,3,3,"th",10),t._uU(54,"\n                        "),t.YNc(55,qt,2,1,"td",11),t._uU(56,"\n                    "),t.BQk(),t._uU(57,"\n                    "),t.ynx(58,12),t._uU(59,"\n                        "),t.YNc(60,yt,3,3,"th",10),t._uU(61,"\n                        "),t.YNc(62,Lt,3,4,"td",11),t._uU(63,"\n                    "),t.BQk(),t._uU(64,"\n                    "),t.ynx(65,13),t._uU(66,"\n                        "),t.YNc(67,Rt,3,3,"th",10),t._uU(68,"\n                        "),t.YNc(69,Ot,2,1,"td",11),t._uU(70,"\n                    "),t.BQk(),t._uU(71,"\n                    "),t.ynx(72,14),t._uU(73,"\n                        "),t.YNc(74,wt,3,3,"th",10),t._uU(75,"\n                        "),t.YNc(76,Nt,4,2,"td",11),t._uU(77,"\n                    "),t.BQk(),t._uU(78,"\n                    "),t.ynx(79,15),t._uU(80,"\n                        "),t.YNc(81,Yt,10,6,"th",10),t._uU(82,"\n                        "),t.YNc(83,Ft,8,2,"td",11),t._uU(84,"\n                    "),t.BQk(),t._uU(85,"\n                    "),t.ynx(86,16),t._uU(87,"\n                        "),t.YNc(88,Dt,3,3,"th",10),t._uU(89,"\n                        "),t.YNc(90,Et,10,4,"td",11),t._uU(91,"\n                    "),t.BQk(),t._uU(92,"\n                    "),t.ynx(93,17),t._uU(94,"\n                        "),t.YNc(95,Ht,2,0,"th",10),t._uU(96,"\n                        "),t.YNc(97,Pt,35,20,"td",11),t._uU(98,"\n                    "),t.BQk(),t._uU(99,"\n                    "),t.YNc(100,Gt,2,0,"tr",18),t._uU(101,"\n                    "),t.YNc(102,zt,1,4,"tr",19),t._uU(103,"\n                "),t.qZA(),t._uU(104,"\n            "),t.qZA(),t._uU(105,"\n        "),t.qZA(),t._uU(106,"\n    "),t.qZA(),t._uU(107,"\n    "),t.TgZ(108,"ct-section-footer"),t._uU(109,"\n        "),t.TgZ(110,"ct-section-footer-row"),t._uU(111,"\n            "),t.TgZ(112,"ct-flex",20),t._uU(113,"\n                "),t.TgZ(114,"ct-flex-item"),t._uU(115,"\n                    "),t.TgZ(116,"ct-table-pagination",21),t.NdJ("prev",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.prevPage())})("next",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.nextPage())}),t.qZA(),t._uU(117,"\n                "),t.qZA(),t._uU(118,"\n\n                "),t.YNc(119,Xt,26,10,"ct-flex-item",0),t._uU(120,"\n\n                "),t.TgZ(121,"ct-flex-item"),t._uU(122,"\n                    "),t.YNc(123,Wt,1,0,"ng-container",4),t._uU(124,"\n                "),t.qZA(),t._uU(125,"\n            "),t.qZA(),t._uU(126,"\n        "),t.qZA(),t._uU(127,"\n    "),t.qZA(),t._uU(128,"\n"),t.qZA()}if(2&e){const n=t.oxw(),s=t.MAs(3);t.xp6(11),t.hij("",t.lcZ(12,13,"batch.Batch")," "),t.xp6(10),t.Q6J("ngTemplateOutlet",s),t.xp6(5),t.Q6J("disabled",!1),t.xp6(2),t.Q6J("ngIf",n.isFiltered),t.xp6(2),t.Q6J("ngIf",!n.isFiltered),t.xp6(3),t.Oqu(t.lcZ(34,15,"batch.onlyMyBatches")),t.xp6(14),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(51),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(14),t.Q6J("pageableDefault",n.batchesResult.batches),t.xp6(3),t.Q6J("ngIf",n.countOfSelectedRows()),t.xp6(4),t.Q6J("ngTemplateOutlet",s)}}function te(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",35),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\n")),2&e&&(t.xp6(1),t.Q6J("disabled",!1),t.xp6(1),t.hij("\n        ",t.lcZ(3,2,"batch.Upload files and start processing"),""))}function ee(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",35),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\n")),2&e&&(t.xp6(1),t.Q6J("disabled",!1),t.xp6(1),t.hij("\n        ",t.lcZ(3,2,"batch.Upload files and start processing"),""))}class Z extends I.S{constructor(o,n,s,a,u,l){super(n),(0,i.Z)(this,"batchService",void 0),(0,i.Z)(this,"authenticationService",void 0),(0,i.Z)(this,"dialog",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"batchExexStatusService",void 0),(0,i.Z)(this,"settingsService",void 0),(0,i.Z)(this,"batchesResult",void 0),(0,i.Z)(this,"isFiltered",void 0),(0,i.Z)(this,"dataSource",new _.by([])),(0,i.Z)(this,"columnsToDisplay",["id","createdOn","Owner","isBatchConsistent","sourceCode","execState","bts"]),this.batchService=o,this.authenticationService=n,this.dialog=s,this.translate=a,this.batchExexStatusService=u,this.settingsService=l}ngOnInit(){this.isFiltered=this.settingsService.events.value.settings.batchFilter,this.updateTable("0",this.isFiltered),this.subscribeSubscription(this.batchExexStatusService.getStatuses.subscribe({next:o=>{this.batchExexStatusService.updateBatchesResultByStatuses(this.batchesResult,o)}}))}ngOnDestroy(){this.unsubscribeSubscriptions()}updateTable(o,n){this.isLoading=!0,this.batchService.batches(o,n).subscribe({next:s=>{this.batchesResult=s,this.columnsToDisplay=this.authenticationService.isRoleOperator()?["id","createdOn","Owner","sourceCode","execState","bts"]:["id","createdOn","Owner","isBatchConsistent","sourceCode","execState","bts"],this.dataSource=new _.by(s.batches.content||[]),this.isLoading=!1}})}toggleFilter(){this.isFiltered=!this.isFiltered,this.settingsService.toggleBatchFilter(this.isFiltered),this.updateTable("0",this.isFiltered)}isDeletedRow(o){return!1}delete(o,n){this.batchService.processResourceDeleteCommit(n.batch.id.toString()).subscribe({next:()=>{this.updateTable(this.batchesResult.batches.number.toString(),this.isFiltered)}})}downloadFile(o,n){o.stopPropagation(),this.batchService.downloadFile(n).subscribe(s=>{var a,u;let l=s.headers.get("Content-Disposition");const d=null==l||null===(a=l.split)||void 0===a||null===(u=a.call(l,"''"))||void 0===u?void 0:u[1];console.log("batch-list.contentDisposition: "+l),console.log("batch-list.tryname: "+d);const O=d&&decodeURI(d);console.log("batch-list.decodedName: "+O),gt.saveAs(s.body,O||"result.zip")})}downloadSelectedRows(){this.batchService.batchDownloader.download()}discardSelectedRows(){this.batchService.batchDownloader.clear()}isSelectedRow(o){return this.batchService.batchDownloader.isSelected(o)}selectRow(o,n){o.stopPropagation(),n.ok&&n.execState===Zt.h.Finished&&this.batchService.batchDownloader.toggle(n)}countOfSelectedRows(){return this.batchService.batchDownloader.size}nextPage(){this.updateTable((this.batchesResult.batches.number+1).toString(),this.isFiltered)}prevPage(){this.updateTable((this.batchesResult.batches.number-1).toString(),this.isFiltered)}}(0,i.Z)(Z,"\u0275fac",function(o){return new(o||Z)(t.Y36(S.$),t.Y36(m.$h),t.Y36(Ut.uw),t.Y36(p.sK),t.Y36(ft.R),t.Y36(q.g))}),(0,i.Z)(Z,"\u0275cmp",t.Xpm({type:Z,selectors:[["batch-list"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["uploadFilesButton",""],["justify-content","space-between","align-items","center","gap","unit(1)"],["justify-content","flex-end","align-items","center","gap","unit(1)"],[4,"ngTemplateOutlet"],["mat-stroked-button","",3,"disabled","click"],["style","vertical-align: baseline;",4,"ngIf"],[3,"isWaiting"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdOn"],["matColumnDef","Owner"],["matColumnDef","isBatchConsistent"],["matColumnDef","sourceCode"],["matColumnDef","execState"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"deleted-table-row","selected-color","click",4,"matRowDef","matRowDefColumns"],["justify-content","space-between","align-items","center"],[3,"pageableDefault","prev","next"],[2,"vertical-align","baseline"],["mat-header-cell",""],["mat-cell",""],[1,"no-wrap"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","size","forTableRow","color","primary",3,"disabled","routerLink"],["mat-flat-button","","size","forTableRow","color","primary",3,"disabled","click"],["mat-flat-button","","color","warn","size","forTableRow","title","Delete",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],["justify-content","center","align-items","center","gap","unit(1)"],[1,"selected-count"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary","routerLink","/batch/add",3,"disabled"]],template:function(o,n){1&o&&(t.YNc(0,Vt,129,17,"ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,te,5,4,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"),t.YNc(5,ee,5,4,"ng-template",null,1,t.W1O)),2&o&&t.Q6J("ngIf",n.batchesResult)},dependencies:[r.O5,r.tP,h.rH,b.U,T.n,J.V,N.R,xt.a,A.i,C.Z,v.t,Y.B,F.i,B._,bt.C,D.lW,Tt.Hw,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,r.uU,p.X$],styles:[".selected-color[_ngcontent-%COMP%]{background:rgba(255,193,7,.18)}.selected-count[_ngcontent-%COMP%]{background:rgba(255,193,7,.18);border-radius:4px;padding:10px 20px 8px}"]})),function(e,o,n,s){var l,a=arguments.length,u=a<3?o:null===s?s=Object.getOwnPropertyDescriptor(o,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,o,n,s);else for(var d=e.length-1;d>=0;d--)(l=e[d])&&(u=(a<3?l(u):a>3?l(o,n,u):l(o,n))||u);a>3&&u&&Object.defineProperty(o,n,u)}([(0,mt.K)({question:(e,o)=>(e.stopPropagation(),{text:(0,L.J)("batch.delete-dialog.Do you want to delete Batch _batchId_"),params:{batchId:o.batch.id}}),rejectTitle:`${(0,L.J)("batch.delete-dialog.Cancel")}`,resolveTitle:`${(0,L.J)("batch.delete-dialog.Delete")}`}),R("design:type",Function),R("design:paramtypes",[Event,Object]),R("design:returntype",void 0)],Z.prototype,"delete",null);var f=c(5126);const g=[m.uU.Admin,m.uU.Data,m.uU.Manager,m.uU.Operator],Q=[{path:"",component:dt,canActivate:[f.k],data:{requiredRoles:g},children:[{path:"",component:Z,canActivate:[f.k],data:{requiredRoles:g}},{path:":batchId/status",component:P,canActivate:[f.k],data:{backConfig:["../","../"],requiredRoles:g}},{path:"add",component:st,canActivate:[f.k],data:{backConfig:["../"],requiredRoles:g}},{path:":batchId/source-code/:sourceCodeId/exec-context/:execContextId/state",component:pt,canActivate:[f.k],data:{backConfig:["../","../","../","../","../","../"],requiredRoles:g}}]}];let j=(()=>{class e{}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275mod",t.oAB({type:e})),(0,i.Z)(e,"\u0275inj",t.cJS({imports:[h.Bz.forChild(Q),h.Bz]})),e})(),ne=(()=>{class e{}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275mod",t.oAB({type:e})),(0,i.Z)(e,"\u0275inj",t.cJS({imports:[r.ez,j,at.E,$.$,x.u5,x.UX,_t.k,p.aw.forChild({})]})),e})()}}]);