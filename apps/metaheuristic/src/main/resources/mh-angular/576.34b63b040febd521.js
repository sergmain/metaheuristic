"use strict";(self.webpackChunkmetaheuristic_app=self.webpackChunkmetaheuristic_app||[]).push([[576],{6576:(st,P,s)=>{s.r(P),s.d(P,{CompanyRoutes:()=>it,CompanyRoutingModule:()=>at,CompnyModule:()=>qe});var i=s(1180),_=s(6895),m=s(9299),Q=s(3081),K=s(1623),j=s(6423),t=s(4650);let G=(()=>{class e{constructor(){}ngOnInit(){}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company"]],decls:3,vars:0,template:function(n,c){1&n&&(t.TgZ(0,"p"),t._uU(1,"company works!"),t.qZA(),t._uU(2,"\n"))}})),e})();var p=s(3626),f=s(8318),g=s(3788),U=s(529),C=s(7528),O=s(2340),tt=s(9751),ut=s(2076),_t=s(9646),lt=s(5650),pt=s(4351),rt=s(262),H=s(4327);const d=e=>`${O.N.baseUrl}dispatcher/company/${e}`;let x=(()=>{class e{constructor(n){(0,i.Z)(this,"http",void 0),(0,i.Z)(this,"companies",c=>this.http.get(d("companies"),{params:{page:c}})),(0,i.Z)(this,"addFormCommitCompany",c=>this.http.post(d("company-add-commit"),(0,C.P)({companyName:c}))),(0,i.Z)(this,"editCompany",c=>this.http.get(d(`company-edit/${c}`))),(0,i.Z)(this,"editFormCommitCompany",(c,a,u)=>this.http.post(d("company-edit-commit"),(0,C.P)({companyUniqueId:c,name:a,groups:u}))),(0,i.Z)(this,"accounts",(c,a)=>this.http.get(d(`company-accounts/${a}`),{params:{page:c}})),(0,i.Z)(this,"addFormCommitNewAccount",(c,a)=>this.http.post(d(`company-account-add-commit/${a}`),c)),(0,i.Z)(this,"edit",(c,a)=>this.http.get(d(`company-account-edit/${c}/${a}`))),(0,i.Z)(this,"editFormCommit",(c,a,u,r)=>this.http.post(d(`company-account-edit-commit/${r}`),(0,C.P)({id:c,publicName:a,enabled:u,companyUniqueId:r}))),(0,i.Z)(this,"passwordEdit",(c,a)=>this.http.get(d(`company-account-password-edit/${a}/${c}`))),(0,i.Z)(this,"passwordEditFormCommit",(c,a,u,r)=>this.http.post(d(`company-account-password-edit-commit/${r}`),(0,C.P)({id:c,password:a,password2:u,companyUniqueId:r}))),(0,i.Z)(this,"editRoles",(c,a)=>this.http.get(d(`company-account-edit-roles/${a}/${c}`))),(0,i.Z)(this,"rolesEditFormCommit",(c,a,u,r)=>this.http.post(d(`company-account-edit-roles-commit/${r}`),(0,C.P)({accountId:c,role:a,checkbox:u,companyId:r}))),(0,i.Z)(this,"batches",(c,a)=>this.http.get(d(`batch/company-batches/${a}`),{params:{page:c}})),(0,i.Z)(this,"processBatchDelete",(c,a)=>this.http.get(d(`batch/company-batch-delete/${c}/${a}`))),(0,i.Z)(this,"processBatchDeleteCommit",(c,a)=>this.http.post(d(`batch/company-batch-delete-commit/${c}`),(0,C.P)({batchId:a}))),(0,i.Z)(this,"processBatchesBulkDeleteCommit",(c,a)=>this.http.post(d(`batch/company-batch-bulk-delete-commit/${c}`),(0,C.P)({batchIds:a}))),(0,i.Z)(this,"uploadFile",(c,a,u)=>this.http.post(d(`batch/company-batch-upload-from-file/${c}`),(0,C.P)({sourceCodeId:a,file:u}))),(0,i.Z)(this,"getBatchStatus",(c,a)=>this.http.get(d(`batch/company-batch-status/${c}/${a}`))),(0,i.Z)(this,"downloadProcessingResult",(c,a)=>{let u=new U.WM;return u=u.append("Accept","application/octet-stream"),this.http.get(d(`batch/company-batch-download-result/${c}/${a}`),{headers:u,observe:"response",responseType:"blob"})}),(0,i.Z)(this,"downloadOriginFile",(c,a,u)=>{let r=new U.WM;return r=r.append("Accept","application/octet-stream"),this.http.get(d(`batch/company-batch-download-origin-file/${c}/${a}/${u}`),{headers:r,observe:"response",responseType:"blob"})}),(0,i.Z)(this,"sourceCodesForCompany",c=>this.http.get(d(`batch/company-batch-source-codes/${c}`))),this.http=n}downloadProcessingResults(n,c){const a="result "+n.toString()+".zip",u=new lt,r=n.map(N=>({id:N.toString(),fileName:"empty",response:null,companyId:c}));return new tt.y(N=>{(0,ut.D)(r).pipe((0,pt.b)(w=>this.downloadProcessingResult(w.companyId,w.id).pipe((0,rt.K)(we=>(0,_t.of)(we)),this.parseProcessableItemOperator(w)))).subscribe({next:w=>{},error:w=>N.error(w),complete:()=>{r.forEach(w=>{u.file(w.fileName,w.response.body)}),u.generateAsync({type:"blob"}).then(w=>{H.saveAs(w,a)}),N.next(!0),N.complete()}})})}parseProcessableItemOperator(n){return c=>new tt.y(a=>c.subscribe({next:u=>{n.response=u,n.fileName=u.ok?`${n.id}.zip`:`${n.id} error`,a.next()},error:u=>a.error(u),complete:()=>a.complete()}))}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.LFG(U.eN))}),(0,i.Z)(e,"\u0275prov",t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})),e})();var nt=s(4190),T=s(1439),A=s(9185),S=s(6890),M=s(2555),z=s(7530),b=s(6264),y=s(305),v=s(5014),I=s(8868),R=s(3370),q=s(9863),W=s(7824),et=s(1336),Z=s(4859);function mt(e,o){1&e&&t.GkF(0)}function dt(e,o){if(1&e&&(t.TgZ(0,"ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,mt,1,0,"ng-container",4),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function ht(e,o){1&e&&(t.TgZ(0,"ct-section-header-row"),t._uU(1,"\n            "),t.TgZ(2,"ct-alert",6),t._uU(3,"\n                Management of companies are disabled, assetMode is 'replicated'.\n            "),t.qZA(),t._uU(4,"\n        "),t.qZA())}function Ut(e,o){1&e&&t.GkF(0)}function gt(e,o){1&e&&t.GkF(0)}function Zt(e,o){if(1&e&&(t.TgZ(0,"ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,gt,1,0,"ng-container",4),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function ft(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",3),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Companies"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.YNc(14,dt,4,1,"ct-flex-item",0),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n        "),t.YNc(18,ht,5,0,"ct-section-header-row",0),t._uU(19,"\n    "),t.qZA(),t._uU(20,"\n    "),t.TgZ(21,"ct-section-body"),t._uU(22,"\n        "),t.TgZ(23,"ct-section-body-row"),t._uU(24,"\n            "),t.YNc(25,Ut,1,0,"ng-container",4),t._uU(26,"\n        "),t.qZA(),t._uU(27,"\n    "),t.qZA(),t._uU(28,"\n    "),t.TgZ(29,"ct-section-footer"),t._uU(30,"\n        "),t.TgZ(31,"ct-section-footer-row"),t._uU(32,"\n            "),t.TgZ(33,"ct-flex",3),t._uU(34,"\n                "),t.TgZ(35,"ct-flex-item"),t._uU(36,"\n                    "),t.TgZ(37,"ct-table-pagination",5),t.NdJ("prev",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.prevPage())})("next",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.nextPage())}),t.qZA(),t._uU(38,"\n                "),t.qZA(),t._uU(39,"\n                "),t.YNc(40,Zt,4,1,"ct-flex-item",0),t._uU(41,"\n            "),t.qZA(),t._uU(42,"\n        "),t.qZA(),t._uU(43,"\n    "),t.qZA(),t._uU(44,"\n"),t.qZA()}if(2&e){const n=t.oxw(),c=t.MAs(3);t.xp6(14),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode)),t.xp6(4),t.Q6J("ngIf",n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode)),t.xp6(7),t.Q6J("ngTemplateOutlet",c),t.xp6(12),t.Q6J("pageableDefault",n.simpleCompaniesResult.companies),t.xp6(3),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode))}}function Ct(e,o){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Id"),t.qZA())}function xt(e,o){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.uniqueId," ")}}function Tt(e,o){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Name"),t.qZA())}function At(e,o){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.name," ")}}function bt(e,o){1&e&&(t.TgZ(0,"th",16),t._uU(1," "),t.qZA())}const yt=function(e){return["../",e,"edit"]};function vt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"a",19),t._uU(5,"Edit"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                            "),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,yt,n.uniqueId))}}function qt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                            "),t.YNc(2,vt,8,3,"ng-container",0),t._uU(3,"\n                        "),t.BQk()),2&e){const n=t.oxw(3);t.xp6(2),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode))}}const wt=function(e){return["../",e,"accounts"]};function It(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                            "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                "),t.TgZ(4,"a",19),t._uU(5,"Accounts"),t.qZA(),t._uU(6,"\n                            "),t.qZA(),t._uU(7,"\n                        "),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,wt,n.uniqueId))}}const Rt=function(e){return["../",e,"batches"]};function Nt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"a",19),t._uU(5,"Batches"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                            "),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,Rt,n.uniqueId))}}function St(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                            "),t.YNc(2,Nt,8,3,"ng-container",0),t._uU(3,"\n                        "),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",1!==n.id)}}function Mt(e,o){if(1&e&&(t.TgZ(0,"td",17),t._uU(1,"\n                    "),t.TgZ(2,"ct-flex",18),t._uU(3,"\n                        "),t.YNc(4,qt,4,1,"ng-container",0),t._uU(5,"\n\n                        "),t.YNc(6,It,8,3,"ng-container",0),t._uU(7,"\n\n                        "),t.YNc(8,St,4,1,"ng-container",0),t._uU(9,"\n                    "),t.qZA(),t._uU(10,"\n                "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(4),t.Q6J("ngIf",n.authenticationService.isRoleMasterAdmin()),t.xp6(2),t.Q6J("ngIf",n.authenticationService.isRoleMasterAdmin()),t.xp6(2),t.Q6J("ngIf",n.authenticationService.isRoleMasterOperator()||n.authenticationService.isRoleMasterSupport())}}function Jt(e,o){1&e&&t._UZ(0,"tr",20)}function kt(e,o){1&e&&t._UZ(0,"tr",21)}function Bt(e,o){if(1&e&&(t._uU(0,"\n    "),t.TgZ(1,"ct-table",7),t._uU(2,"\n        "),t.TgZ(3,"table",8),t._uU(4,"\n            "),t.ynx(5,9),t._uU(6,"\n                "),t.YNc(7,Ct,2,0,"th",10),t._uU(8,"\n                "),t.YNc(9,xt,2,1,"td",11),t._uU(10,"\n            "),t.BQk(),t._uU(11,"\n            "),t.ynx(12,12),t._uU(13,"\n                "),t.YNc(14,Tt,2,0,"th",10),t._uU(15,"\n                "),t.YNc(16,At,2,1,"td",11),t._uU(17,"\n            "),t.BQk(),t._uU(18,"\n            "),t.ynx(19,13),t._uU(20,"\n                "),t.YNc(21,bt,2,0,"th",10),t._uU(22,"\n                "),t.YNc(23,Mt,11,3,"td",11),t._uU(24,"\n            "),t.BQk(),t._uU(25,"\n            "),t.YNc(26,Jt,1,0,"tr",14),t._uU(27,"\n            "),t.YNc(28,kt,1,0,"tr",15),t._uU(29,"\n        "),t.qZA(),t._uU(30,"\n    "),t.qZA(),t._uU(31,"\n")),2&e){const n=t.oxw();t.xp6(1),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(23),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay)}}function Lt(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",22),t._uU(2," Add New Company "),t.qZA(),t._uU(3,"\n"))}let Qt=(()=>{class e extends f.S{constructor(n,c,a){super(n),(0,i.Z)(this,"authenticationService",void 0),(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"dispatcherAssetModeService",void 0),(0,i.Z)(this,"columnsToDisplay",["uniqueId","name","bts"]),(0,i.Z)(this,"simpleCompaniesResult",void 0),(0,i.Z)(this,"dataSource",new p.by([])),this.authenticationService=n,this.companyService=c,this.dispatcherAssetModeService=a}ngOnInit(){this.updateTable(0)}updateTable(n){this.setIsLoadingStart(),this.companyService.companies(n.toString()).subscribe({next:c=>{this.simpleCompaniesResult=c,this.dataSource=new p.by(this.simpleCompaniesResult.companies.content)},complete:()=>{this.setIsLoadingEnd()}})}prevPage(){this.updateTable(this.simpleCompaniesResult.companies.number-1)}nextPage(){this.updateTable(this.simpleCompaniesResult.companies.number+1)}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g.$h),t.Y36(x),t.Y36(nt.F))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["companies"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["mainTableTemplate",""],["addButtonTemplate",""],["justify-content","space-between"],[4,"ngTemplateOutlet"],[3,"pageableDefault","prev","next"],["theme","info"],[3,"isWaiting"],["mat-table","mat-table",1,"mat-table",3,"dataSource"],["matColumnDef","uniqueId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","mat-cell",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","mat-cell"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","color","primary","size","forTableRow",3,"routerLink"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary","routerLink","../add"]],template:function(n,c){1&n&&(t.YNc(0,ft,45,5,"ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,Bt,32,4,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n"),t.YNc(5,Lt,4,0,"ng-template",null,2,t.W1O)),2&n&&t.Q6J("ngIf",c.simpleCompaniesResult)},dependencies:[_.O5,_.tP,m.rH,T.U,A.n,S.V,M.R,z.a,b.i,y.Z,v.t,I.B,R.i,q._,W.C,et.v,Z.zs,Z.lW,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk]})),e})();var $=s(2199),J=s(2379),k=s(5510),B=s(1023),E=s(284),h=s(9549),l=s(4006);const Dt=function(){return["../../companies"]};function Yt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Edit Company"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"mat-form-field",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-label"),t._uU(22,"Name of company"),t.qZA(),t._uU(23,"\n                        "),t.TgZ(24,"input",3),t.NdJ("ngModelChange",function(a){t.CHM(n);const u=t.oxw();return t.KtG(u.name=a)}),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-hint"),t._uU(27,"This is a required field."),t.qZA(),t._uU(28,"\n                    "),t.qZA(),t._uU(29,"\n                    "),t._UZ(30,"br"),t._uU(31,"\n                    "),t._UZ(32,"br"),t._uU(33,"\n                    "),t.TgZ(34,"mat-form-field",2),t._uU(35,"\n                        "),t.TgZ(36,"mat-label"),t._uU(37,"Company's groups"),t.qZA(),t._uU(38,"\n                        "),t.TgZ(39,"input",3),t.NdJ("ngModelChange",function(a){t.CHM(n);const u=t.oxw();return t.KtG(u.groups=a)}),t.qZA(),t._uU(40,"\n                    "),t.qZA(),t._uU(41,"\n                    "),t._UZ(42,"br"),t._uU(43,"\n                    "),t.TgZ(44,"ct-flex",4),t._uU(45,"\n                        "),t.TgZ(46,"ct-flex-item"),t._uU(47,"\n                            "),t.TgZ(48,"a",5),t._uU(49,"Cancel"),t.qZA(),t._uU(50,"\n                        "),t.qZA(),t._uU(51,"\n                        "),t.TgZ(52,"ct-flex-item"),t._uU(53,"\n                            "),t.TgZ(54,"button",6),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.saveChanges())}),t._uU(55,"Save Changes"),t.qZA(),t._uU(56,"\n                        "),t.qZA(),t._uU(57,"\n                    "),t.qZA(),t._uU(58,"\n                "),t.qZA(),t._uU(59,"\n            "),t.qZA(),t._uU(60,"\n        "),t.qZA(),t._uU(61,"\n    "),t.qZA(),t._uU(62,"\n    "),t.TgZ(63,"ct-col",1),t._uU(64,"\n        "),t._UZ(65,"ct-rest-status",7),t._uU(66,"\n    "),t.qZA(),t._uU(67,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(24),t.Q6J("ngModel",n.name),t.xp6(15),t.Q6J("ngModel",n.groups),t.xp6(9),t.Q6J("routerLink",t.DdM(4,Dt)),t.xp6(17),t.Q6J("content",n.operationStatusRest)}}let Ot=(()=>{class e{constructor(n,c,a){(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"groups",void 0),(0,i.Z)(this,"operationStatusRest",void 0),(0,i.Z)(this,"simpleCompanyResult",void 0),this.companyService=n,this.activatedRoute=c,this.router=a}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.editCompany(this.companyUniqueId).subscribe(n=>{this.simpleCompanyResult=n,this.name=n.company.name,this.groups=n.companyAccessControl.groups})}saveChanges(){this.companyService.editFormCommitCompany(this.companyUniqueId,this.name,this.groups).subscribe(n=>{n.status===$.o.OK?this.back():this.operationStatusRest=n})}back(){this.router.navigate(["../../companies"],{relativeTo:this.activatedRoute})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.gz),t.Y36(m.F0))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["appearance","outline",2,"width","100%"],["matInput","matInput",3,"ngModel","ngModelChange"],["justify-content","flex-end","gap","unit(1)"],["mat-stroked-button","",3,"routerLink"],["mat-flat-button","","color","primary",3,"click"],[3,"content"]],template:function(n,c){1&n&&t.YNc(0,Yt,68,5,"ct-cols",0),2&n&&t.Q6J("ngIf",c.simpleCompanyResult)},dependencies:[_.O5,m.rH,T.U,A.n,J.t,k.W,b.i,y.Z,v.t,I.B,R.i,q._,B.R,Z.zs,Z.lW,E.Nt,h.KE,h.hX,h.bx,l.Fj,l.JJ,l.On]})),e})();function Et(e,o){1&e&&t.GkF(0)}function Ft(e,o){if(1&e&&(t.TgZ(0,"ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,Et,1,0,"ng-container",18),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(3);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function Pt(e,o){1&e&&(t.TgZ(0,"ct-section-header-row"),t._uU(1,"\n            "),t.TgZ(2,"ct-alert",19),t._uU(3,"\n                Management of accounts are disabled, assetMode is 'replicated'.\n            "),t.qZA(),t._uU(4,"\n        "),t.qZA())}function $t(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"ID "),t.qZA())}function Kt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.id," ")}}function jt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Is enabled "),t.qZA())}function Gt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.enabled?"Yes":"No"," ")}}function Ht(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Login "),t.qZA())}function zt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.username," ")}}function Wt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Public name "),t.qZA())}function Xt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.publicName," ")}}function Vt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Roles"),t.qZA())}function tn(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.roles," ")}}function nn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Created On "),t.qZA())}function en(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,n.createdOn,"HH:mm:ss, MMM\xa0d,\xa0yyyy")," ")}}function on(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," "),t.qZA())}const cn=function(e){return["../","account",e,"edit"]},an=function(e){return["../","account",e,"edit-roles"]},sn=function(e){return["../","account",e,"edit-password"]};function un(e,o){if(1&e&&(t.TgZ(0,"ct-flex",23),t._uU(1,"\n                                "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"a",24),t._uU(5," Edit"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                                    "),t.TgZ(10,"a",24),t._uU(11,"Roles"),t.qZA(),t._uU(12,"\n                                "),t.qZA(),t._uU(13,"\n                                "),t.TgZ(14,"ct-flex-item"),t._uU(15,"\n                                    "),t.TgZ(16,"a",24),t._uU(17,"\n                                        Change Password"),t.qZA(),t._uU(18,"\n                                "),t.qZA(),t._uU(19,"\n                            "),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(3,cn,n.id)),t.xp6(6),t.Q6J("routerLink",t.VKq(5,an,n.id)),t.xp6(6),t.Q6J("routerLink",t.VKq(7,sn,n.id))}}function _n(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1,"\n                            "),t.YNc(2,un,20,9,"ct-flex",22),t._uU(3,"\n                        "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode))}}function ln(e,o){1&e&&(t.TgZ(0,"tr",25),t._uU(1," "),t.qZA())}function pn(e,o){1&e&&(t.TgZ(0,"tr",26),t._uU(1," "),t.qZA())}function rn(e,o){1&e&&t.GkF(0)}function mn(e,o){if(1&e&&(t.TgZ(0,"ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,rn,1,0,"ng-container",18),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(3);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function dn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",2),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Accounts"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.YNc(14,Ft,4,1,"ct-flex-item",0),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n        "),t.YNc(18,Pt,5,0,"ct-section-header-row",0),t._uU(19,"\n    "),t.qZA(),t._uU(20,"\n    "),t.TgZ(21,"ct-section-body"),t._uU(22,"\n        "),t.TgZ(23,"ct-section-body-row"),t._uU(24,"\n            "),t.TgZ(25,"ct-table",3),t._uU(26,"\n                "),t.TgZ(27,"table",4),t._uU(28,"\n                    "),t.ynx(29,5),t._uU(30,"\n                        "),t.YNc(31,$t,2,0,"th",6),t._uU(32,"\n                        "),t.YNc(33,Kt,2,1,"td",7),t._uU(34,"\n                    "),t.BQk(),t._uU(35,"\n                    "),t.ynx(36,8),t._uU(37,"\n                        "),t.YNc(38,jt,2,0,"th",6),t._uU(39,"\n                        "),t.YNc(40,Gt,2,1,"td",7),t._uU(41,"\n                    "),t.BQk(),t._uU(42,"\n                    "),t.ynx(43,9),t._uU(44,"\n                        "),t.YNc(45,Ht,2,0,"th",6),t._uU(46,"\n                        "),t.YNc(47,zt,2,1,"td",7),t._uU(48,"\n                    "),t.BQk(),t._uU(49,"\n                    "),t.ynx(50,10),t._uU(51,"\n                        "),t.YNc(52,Wt,2,0,"th",6),t._uU(53,"\n                        "),t.YNc(54,Xt,2,1,"td",7),t._uU(55,"\n                    "),t.BQk(),t._uU(56,"\n                    "),t.ynx(57,11),t._uU(58,"\n                        "),t.YNc(59,Vt,2,0,"th",6),t._uU(60,"\n                        "),t.YNc(61,tn,2,1,"td",7),t._uU(62,"\n                    "),t.BQk(),t._uU(63,"\n                    "),t.ynx(64,12),t._uU(65,"\n                        "),t.YNc(66,nn,2,0,"th",6),t._uU(67,"\n                        "),t.YNc(68,en,3,4,"td",7),t._uU(69,"\n                    "),t.BQk(),t._uU(70,"\n                    "),t.ynx(71,13),t._uU(72,"\n                        "),t.YNc(73,on,2,0,"th",6),t._uU(74,"\n                        "),t.YNc(75,_n,4,1,"td",7),t._uU(76,"\n                    "),t.BQk(),t._uU(77,"\n                    "),t.YNc(78,ln,2,0,"tr",14),t._uU(79,"\n                    "),t.YNc(80,pn,2,0,"tr",15),t._uU(81,"\n                "),t.qZA(),t._uU(82,"\n            "),t.qZA(),t._uU(83,"\n        "),t.qZA(),t._uU(84,"\n    "),t.qZA(),t._uU(85,"\n    "),t.TgZ(86,"ct-section-footer"),t._uU(87,"\n        "),t.TgZ(88,"ct-section-footer-row"),t._uU(89,"\n            "),t.TgZ(90,"ct-flex",2),t._uU(91,"\n                "),t.TgZ(92,"ct-flex-item"),t._uU(93,"\n                    "),t.TgZ(94,"ct-flex",16),t._uU(95,"\n                        "),t.TgZ(96,"ct-table-pagination",17),t.NdJ("prev",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.prevPage())})("next",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.nextPage())}),t.qZA(),t._uU(97,"\n                    "),t.qZA(),t._uU(98,"\n                "),t.qZA(),t._uU(99,"\n                "),t.YNc(100,mn,4,1,"ct-flex-item",0),t._uU(101,"\n            "),t.qZA(),t._uU(102,"\n        "),t.qZA(),t._uU(103,"\n    "),t.qZA(),t._uU(104,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(14),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode)),t.xp6(4),t.Q6J("ngIf",n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode)),t.xp6(7),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(51),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(16),t.Q6J("pageableDefault",n.accountsResult.accounts),t.xp6(4),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode))}}const hn=function(){return["../","account","add"]};function Un(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",27),t._uU(2,"\n        Add New Account\n    "),t.qZA(),t._uU(3,"\n")),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,hn)))}let gn=(()=>{class e extends f.S{constructor(n,c,a,u){super(u),(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"dispatcherAssetModeService",void 0),(0,i.Z)(this,"authenticationService",void 0),(0,i.Z)(this,"dataSource",new p.by([])),(0,i.Z)(this,"columnsToDisplay",["id","isEnabled","login","publicName","role","createdOn","bts"]),(0,i.Z)(this,"accountsResult",void 0),(0,i.Z)(this,"companyUniqueId",void 0),this.companyService=n,this.activatedRoute=c,this.dispatcherAssetModeService=a,this.authenticationService=u}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.updateTable(0)}updateTable(n){this.setIsLoadingStart(),this.companyService.accounts(n.toString(),this.companyUniqueId).subscribe({next:c=>{this.accountsResult=c,this.dataSource=new p.by(this.accountsResult.accounts.content||[])},complete:()=>{this.setIsLoadingEnd()}})}nextPage(){this.updateTable(this.accountsResult.accounts.number+1)}prevPage(){this.updateTable(this.accountsResult.accounts.number-1)}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.gz),t.Y36(nt.F),t.Y36(g.$h))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["accounts"]],features:[t.qOj],decls:4,vars:1,consts:[[4,"ngIf"],["addButtonTemplate",""],["justify-content","space-between"],[3,"isWaiting"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isEnabled"],["matColumnDef","login"],["matColumnDef","publicName"],["matColumnDef","role"],["matColumnDef","createdOn"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["justify-content","flex-start","gap","8px"],[3,"pageableDefault","prev","next"],[4,"ngTemplateOutlet"],["theme","info"],["mat-header-cell",""],["mat-cell",""],["justify-content","flex-end","gap","9px",4,"ngIf"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","size","forTableRow","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary",3,"routerLink"]],template:function(n,c){1&n&&(t.YNc(0,dn,105,8,"ct-section",0),t._uU(1,"\n\n\n"),t.YNc(2,Un,4,2,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",c.accountsResult)},dependencies:[_.O5,_.tP,m.rH,T.U,A.n,S.V,M.R,z.a,b.i,y.Z,v.t,I.B,R.i,q._,W.C,et.v,Z.zs,Z.lW,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,_.uU]})),e})();const Zn=function(){return["../companies"]};let fn=(()=>{class e{constructor(n,c,a){(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"operationStatusRest",void 0),(0,i.Z)(this,"form",new l.cw({name:new l.NI("",[l.kI.required,l.kI.minLength(1)])})),this.companyService=n,this.router=c,this.activatedRoute=a}createCompany(){this.companyService.addFormCommitCompany(this.form.value.name).subscribe(n=>{n.status===$.o.OK?this.back():this.operationStatusRest=n})}back(){this.router.navigate(["../","companies"],{relativeTo:this.activatedRoute})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.F0),t.Y36(m.gz))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company-add"]],decls:56,vars:5,consts:[["size","6"],[3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","formControlName","name"],["justify-content","flex-end","gap","unit(1)"],["mat-stroked-button","",3,"routerLink"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"content"]],template:function(n,c){1&n&&(t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",0),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"New Company"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body",1),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"mat-form-field",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-label"),t._uU(22,"Name of company"),t.qZA(),t._uU(23,"\n                        "),t._UZ(24,"input",3),t._uU(25,"\n                        "),t.TgZ(26,"mat-hint"),t._uU(27,"This is a required field."),t.qZA(),t._uU(28,"\n                    "),t.qZA(),t._uU(29,"\n                    "),t._UZ(30,"br"),t._uU(31,"\n                    "),t.TgZ(32,"ct-flex",4),t._uU(33,"\n                        "),t.TgZ(34,"ct-flex-item"),t._uU(35,"\n                            "),t.TgZ(36,"a",5),t._uU(37,"Cancel"),t.qZA(),t._uU(38,"\n                        "),t.qZA(),t._uU(39,"\n                        "),t.TgZ(40,"ct-flex-item"),t._uU(41,"\n                            "),t.TgZ(42,"button",6),t.NdJ("click",function(){return c.createCompany()}),t._uU(43,"Create\n                                Company"),t.qZA(),t._uU(44,"\n                        "),t.qZA(),t._uU(45,"\n                    "),t.qZA(),t._uU(46,"\n                "),t.qZA(),t._uU(47,"\n            "),t.qZA(),t._uU(48,"\n        "),t.qZA(),t._uU(49,"\n    "),t.qZA(),t._uU(50,"\n    "),t.TgZ(51,"ct-col",0),t._uU(52,"\n        "),t._UZ(53,"ct-rest-status",7),t._uU(54,"\n    "),t.qZA(),t._uU(55,"\n"),t.qZA()),2&n&&(t.xp6(15),t.Q6J("formGroup",c.form),t.xp6(21),t.Q6J("routerLink",t.DdM(4,Zn)),t.xp6(6),t.Q6J("disabled",c.form.invalid),t.xp6(11),t.Q6J("content",c.operationStatusRest))},dependencies:[m.rH,T.U,A.n,J.t,k.W,b.i,y.Z,v.t,I.B,R.i,q._,B.R,Z.zs,Z.lW,E.Nt,h.KE,h.hX,h.bx,l.Fj,l.JJ,l.JL,l.sg,l.u]})),e})(),Cn=(()=>{class e{constructor(n,c,a){(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"accountResult",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"operationStatusRest",void 0),(0,i.Z)(this,"isLoading",void 0),(0,i.Z)(this,"isDone",void 0),(0,i.Z)(this,"form",new l.cw({publicName:new l.NI("",[l.kI.required,l.kI.minLength(3)]),username:new l.NI("",[l.kI.required,l.kI.minLength(3)]),password:new l.NI("",[l.kI.required,l.kI.minLength(3)]),password2:new l.NI("",[l.kI.required,l.kI.minLength(3),u=>{const r=this.form;return r?r.value.password===u.value?null:{notSame:!0}:null}])})),this.activatedRoute=n,this.companyService=c,this.router=a}ngOnInit(){this.isDone=!1,this.isLoading=!0,this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.isLoading=!1}back(){this.router.navigate(["../../","accounts"],{relativeTo:this.activatedRoute})}createAccount(){this.isLoading=!0,this.companyService.addFormCommitNewAccount({username:this.form.value.username,password:this.form.value.password,password2:this.form.value.password2,publicName:this.form.value.publicName},this.companyUniqueId).subscribe({next:n=>this.operationStatusRest=n,complete:()=>{this.operationStatusRest.status===$.o.OK&&(this.isDone=!0,this.form.reset()),this.isLoading=!1}})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(m.gz),t.Y36(x),t.Y36(m.F0))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-add"]],decls:108,vars:3,consts:[["align-items","baseline"],["size","6"],["novalidate","novalidate","autocomplete","off",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","text","autocomplete","name","formControlName","username"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password2"],["matInput","matInput","type","text","autocomplete","name","formControlName","publicName"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"]],template:function(n,c){1&n&&(t.TgZ(0,"ct-cols",0),t._uU(1,"\n    "),t.TgZ(2,"ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"New Account"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"form",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-form-field",3),t._uU(22,"\n                            "),t.TgZ(23,"mat-label"),t._uU(24,"Name"),t.qZA(),t._uU(25,"\n                            "),t._UZ(26,"input",4),t._uU(27,"\n                            "),t.TgZ(28,"mat-hint"),t._uU(29,"This is a required field."),t.qZA(),t._uU(30,"\n                        "),t.qZA(),t._uU(31,"\n                        "),t._UZ(32,"br"),t._uU(33,"\n                        "),t._UZ(34,"br"),t._uU(35,"\n                        "),t.TgZ(36,"mat-form-field",3),t._uU(37,"\n                            "),t.TgZ(38,"mat-label"),t._uU(39,"Password"),t.qZA(),t._uU(40,"\n                            "),t._UZ(41,"input",5),t._uU(42,"\n                            "),t.TgZ(43,"mat-hint"),t._uU(44,"This is a required field."),t.qZA(),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                        "),t._UZ(47,"br"),t._uU(48,"\n                        "),t._UZ(49,"br"),t._uU(50,"\n                        "),t.TgZ(51,"mat-form-field",3),t._uU(52,"\n                            "),t.TgZ(53,"mat-label"),t._uU(54,"Password again"),t.qZA(),t._uU(55,"\n                            "),t._UZ(56,"input",6),t._uU(57,"\n                            "),t.TgZ(58,"mat-hint"),t._uU(59,"This is a required field."),t.qZA(),t._uU(60,"\n                        "),t.qZA(),t._uU(61,"\n                        "),t._UZ(62,"br"),t._uU(63,"\n                        "),t._UZ(64,"br"),t._uU(65,"\n                        "),t.TgZ(66,"mat-form-field",3),t._uU(67,"\n                            "),t.TgZ(68,"mat-label"),t._uU(69,"Public Name"),t.qZA(),t._uU(70,"\n                            "),t._UZ(71,"input",7),t._uU(72,"\n                            "),t.TgZ(73,"mat-hint"),t._uU(74,"This is a required field."),t.qZA(),t._uU(75,"\n                        "),t.qZA(),t._uU(76,"\n                    "),t.qZA(),t._uU(77,"\n                "),t.qZA(),t._uU(78,"\n            "),t.qZA(),t._uU(79,"\n            "),t.TgZ(80,"ct-section-footer"),t._uU(81,"\n                "),t.TgZ(82,"ct-section-footer-row"),t._uU(83,"\n                    "),t.TgZ(84,"ct-flex",8),t._uU(85,"\n                        "),t.TgZ(86,"ct-flex-item"),t._uU(87,"\n                            "),t.TgZ(88,"button",9),t.NdJ("click",function(){return c.back()}),t._uU(89,"Cancel"),t.qZA(),t._uU(90,"\n                        "),t.qZA(),t._uU(91,"\n                        "),t.TgZ(92,"ct-flex-item"),t._uU(93,"\n                            "),t.TgZ(94,"button",10),t.NdJ("click",function(){return c.createAccount()}),t._uU(95,"Create Account"),t.qZA(),t._uU(96,"\n                        "),t.qZA(),t._uU(97,"\n                    "),t.qZA(),t._uU(98,"\n                "),t.qZA(),t._uU(99,"\n            "),t.qZA(),t._uU(100,"\n        "),t.qZA(),t._uU(101,"\n    "),t.qZA(),t._uU(102,"\n    "),t.TgZ(103,"ct-col",1),t._uU(104,"\n        "),t._UZ(105,"ct-rest-status",11),t._uU(106,"\n    "),t.qZA(),t._uU(107,"\n"),t.qZA()),2&n&&(t.xp6(19),t.Q6J("formGroup",c.form),t.xp6(75),t.Q6J("disabled",c.isDone||c.isLoading||c.form.invalid),t.xp6(11),t.Q6J("content",c.operationStatusRest))},dependencies:[T.U,A.n,S.V,M.R,J.t,k.W,b.i,y.Z,v.t,I.B,R.i,q._,B.R,Z.lW,E.Nt,h.KE,h.hX,h.bx,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]})),e})();var X=s(6709);function xn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-cols",1),t._uU(1,"\n    "),t.TgZ(2,"ct-col",2),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"mat-form-field",3),t._uU(20,"\n                        "),t.TgZ(21,"mat-label"),t._uU(22,"Username"),t.qZA(),t._uU(23,"\n                        "),t._UZ(24,"input",4),t._uU(25,"\n                    "),t.qZA(),t._uU(26,"\n                    "),t.TgZ(27,"mat-form-field",5),t._uU(28,"\n                        "),t.TgZ(29,"mat-label"),t._uU(30,"Public Name"),t.qZA(),t._uU(31,"\n                        "),t.TgZ(32,"input",6),t.NdJ("ngModelChange",function(a){t.CHM(n);const u=t.oxw();return t.KtG(u.publicName=a)}),t.qZA(),t._uU(33,"\n                    "),t.qZA(),t._uU(34,"\n                    "),t._UZ(35,"br"),t._uU(36,"\n                    "),t.TgZ(37,"mat-checkbox",7),t.NdJ("ngModelChange",function(a){t.CHM(n);const u=t.oxw();return t.KtG(u.isEnabled=a)}),t._uU(38,"Is account enabled?"),t.qZA(),t._uU(39,"\n                "),t.qZA(),t._uU(40,"\n            "),t.qZA(),t._uU(41,"\n            "),t.TgZ(42,"ct-section-footer"),t._uU(43,"\n                "),t.TgZ(44,"ct-section-footer-row"),t._uU(45,"\n                    "),t.TgZ(46,"ct-flex",8),t._uU(47,"\n                        "),t.TgZ(48,"ct-flex-item"),t._uU(49,"\n                            "),t.TgZ(50,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.back())}),t._uU(51,"Cancel"),t.qZA(),t._uU(52,"\n                        "),t.qZA(),t._uU(53,"\n                        "),t.TgZ(54,"ct-flex-item"),t._uU(55,"\n                            "),t.TgZ(56,"button",10),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.saveChanges())}),t._uU(57,"Save Changes"),t.qZA(),t._uU(58,"\n                        "),t.qZA(),t._uU(59,"\n                    "),t.qZA(),t._uU(60,"\n                "),t.qZA(),t._uU(61,"\n            "),t.qZA(),t._uU(62,"\n        "),t.qZA(),t._uU(63,"\n    "),t.qZA(),t._uU(64,"\n    "),t.TgZ(65,"ct-col",2),t._uU(66,"\n        "),t._UZ(67,"ct-rest-status",11),t._uU(68,"\n    "),t.qZA(),t._uU(69,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.hij("Edit Account #",n.accountId," "),t.xp6(13),t.Q6J("value",n.accountResult.account.username),t.xp6(8),t.Q6J("ngModel",n.publicName),t.xp6(5),t.Q6J("ngModel",n.isEnabled)}}let Tn=(()=>{class e{constructor(n,c,a){(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"accountId",void 0),(0,i.Z)(this,"accountResult",void 0),(0,i.Z)(this,"operationStatusRest",void 0),(0,i.Z)(this,"isEnabled",void 0),(0,i.Z)(this,"publicName",void 0),(0,i.Z)(this,"username",void 0),this.companyService=n,this.activatedRoute=c,this.router=a}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.accountId=this.activatedRoute.snapshot.paramMap.get("accountId"),this.companyService.edit(this.companyUniqueId,this.accountId).subscribe(n=>{this.accountResult=n,this.username=n.account.username,this.publicName=n.account.publicName,this.isEnabled=n.account.enabled})}back(){this.router.navigate(["../../../","accounts"],{relativeTo:this.activatedRoute})}saveChanges(){this.companyService.editFormCommit(this.accountId,this.publicName,this.isEnabled,this.companyUniqueId).subscribe(n=>{n.status===$.o.OK?this.back():this.operationStatusRest=n})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.gz),t.Y36(m.F0))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-edit"]],decls:1,vars:1,consts:[["align-items","baseline",4,"ngIf"],["align-items","baseline"],["size","6"],["appearance","outline","disabled","",2,"width","100%"],["matInput","","disabled","",3,"value"],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[3,"content"]],template:function(n,c){1&n&&t.YNc(0,xn,70,4,"ct-cols",0),2&n&&t.Q6J("ngIf",c.accountResult)},dependencies:[_.O5,T.U,A.n,S.V,M.R,J.t,k.W,b.i,y.Z,v.t,I.B,R.i,q._,B.R,Z.lW,X.oG,E.Nt,h.KE,h.hX,l.Fj,l.JJ,l.On]})),e})();function An(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-cols",1),t._uU(1,"\n    "),t.TgZ(2,"ct-col",2),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Edit Account "),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"form",3),t._uU(20,"\n                        "),t.TgZ(21,"mat-form-field",4),t._uU(22,"\n                            "),t.TgZ(23,"mat-label"),t._uU(24,"Password"),t.qZA(),t._uU(25,"\n                            "),t._UZ(26,"input",5),t._uU(27,"\n                            "),t.TgZ(28,"mat-hint"),t._uU(29,"This is a required field."),t.qZA(),t._uU(30,"\n                        "),t.qZA(),t._uU(31,"\n                        "),t._UZ(32,"br"),t._uU(33,"\n                        "),t._UZ(34,"br"),t._uU(35,"\n                        "),t.TgZ(36,"mat-form-field",4),t._uU(37,"\n                            "),t.TgZ(38,"mat-label"),t._uU(39,"Password again"),t.qZA(),t._uU(40,"\n                            "),t._UZ(41,"input",6),t._uU(42,"\n                            "),t.TgZ(43,"mat-hint"),t._uU(44,"This is a required field."),t.qZA(),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                    "),t.qZA(),t._uU(47,"\n                "),t.qZA(),t._uU(48,"\n            "),t.qZA(),t._uU(49,"\n            "),t.TgZ(50,"ct-section-footer"),t._uU(51,"\n                "),t.TgZ(52,"ct-section-footer-row"),t._uU(53,"\n                    "),t.TgZ(54,"ct-flex",7),t._uU(55,"\n                        "),t.TgZ(56,"ct-flex-item"),t._uU(57,"\n                            "),t.TgZ(58,"button",8),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.back())}),t._uU(59,"Cancel"),t.qZA(),t._uU(60,"\n                        "),t.qZA(),t._uU(61,"\n                        "),t.TgZ(62,"ct-flex-item"),t._uU(63,"\n                            "),t.TgZ(64,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.saveChanges())}),t._uU(65,"Save"),t.qZA(),t._uU(66,"\n                        "),t.qZA(),t._uU(67,"\n                    "),t.qZA(),t._uU(68,"\n                "),t.qZA(),t._uU(69,"\n            "),t.qZA(),t._uU(70,"\n        "),t.qZA(),t._uU(71,"\n    "),t.qZA(),t._uU(72,"\n    "),t.TgZ(73,"ct-col",2),t._uU(74,"\n        "),t._UZ(75,"ct-rest-status",10),t._uU(76,"\n    "),t.qZA(),t._uU(77,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(19),t.Q6J("formGroup",n.form),t.xp6(45),t.Q6J("disabled",n.isLoading),t.xp6(11),t.Q6J("content",n.operationStatusRest)}}let bn=(()=>{class e{constructor(n,c,a){(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"accountResult",void 0),(0,i.Z)(this,"accoundId",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"operationStatusRest",void 0),(0,i.Z)(this,"form",new l.cw({password:new l.NI("",[l.kI.required,l.kI.minLength(3)]),password2:new l.NI("",[l.kI.required,l.kI.minLength(3),u=>{const r=this.form;return r?r.value.password===u.value?null:{notSame:!0}:null}])})),(0,i.Z)(this,"isLoading",void 0),this.activatedRoute=n,this.companyService=c,this.router=a}ngOnInit(){this.isLoading=!0,this.accoundId=this.activatedRoute.snapshot.paramMap.get("accountId"),this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.passwordEdit(this.accoundId,this.companyUniqueId).subscribe({next:n=>this.accountResult=n,complete:()=>this.isLoading=!1})}back(){this.router.navigate(["../../../","accounts"],{relativeTo:this.activatedRoute})}saveChanges(){this.isLoading=!0,this.companyService.passwordEditFormCommit(this.accoundId,this.form.value.password,this.form.value.password2,this.companyUniqueId).subscribe({next:n=>this.operationStatusRest=n,complete:()=>this.isLoading=!1})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(m.gz),t.Y36(x),t.Y36(m.F0))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-edit-password"]],decls:1,vars:1,consts:[["align-items","baseline",4,"ngIf"],["align-items","baseline"],["size","6"],["novalidate","novalidate","autocomplete","off",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password2"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"]],template:function(n,c){1&n&&t.YNc(0,An,78,3,"ct-cols",0),2&n&&t.Q6J("ngIf",c.accountResult)},dependencies:[_.O5,T.U,A.n,S.V,M.R,J.t,k.W,b.i,y.Z,v.t,I.B,R.i,q._,B.R,Z.lW,E.Nt,h.KE,h.hX,h.bx,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]})),e})();function yn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",4),t._uU(1,"\n                        "),t.TgZ(2,"mat-checkbox",5),t.NdJ("ngModelChange",function(a){const r=t.CHM(n).$implicit;return t.KtG(r.value=a)})("change",function(){const u=t.CHM(n).$implicit,r=t.oxw(2);return t.KtG(r.save(u))}),t._uU(3),t.qZA(),t._uU(4,"\n                    "),t.qZA()}if(2&e){const n=o.$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("ngModel",n.value)("disabled",c.isLoading),t.xp6(1),t.hij("",n.key,"\n                        ")}}function vn(e,o){if(1&e&&(t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.YNc(19,yn,5,3,"div",2),t.ALo(20,"keyvalue"),t._uU(21,"\n                "),t.qZA(),t._uU(22,"\n            "),t.qZA(),t._uU(23,"\n        "),t.qZA(),t._uU(24,"\n    "),t.qZA(),t._uU(25,"\n    "),t.TgZ(26,"ct-col",1),t._uU(27,"\n        "),t._UZ(28,"ct-rest-status",3),t._uU(29,"\n    "),t.qZA(),t._uU(30,"\n"),t.qZA()),2&e){const n=t.oxw();t.xp6(11),t.hij("\n                        Edit Account #",n.accountId," Roles\n                    "),t.xp6(8),t.Q6J("ngForOf",t.lcZ(20,3,n.roleModel)),t.xp6(9),t.Q6J("content",n.operationStatusRest)}}let qn=(()=>{class e{constructor(n,c){(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"accountId",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"accountWithRoleResult",void 0),(0,i.Z)(this,"operationStatusRest",void 0),(0,i.Z)(this,"roleModel",new Map),(0,i.Z)(this,"isLoading",void 0),this.companyService=n,this.activatedRoute=c}ngOnInit(){this.isLoading=!0,this.accountId=this.activatedRoute.snapshot.paramMap.get("accountId"),this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.editRoles(this.accountId,this.companyUniqueId).subscribe(n=>{this.accountWithRoleResult=n,this.accountWithRoleResult.possibleRoles.forEach(c=>this.roleModel.set(c,!1)),this.accountWithRoleResult.account.authorities.forEach(c=>{this.roleModel.has(c.authority)&&this.roleModel.set(c.authority,!0)}),this.isLoading=!1})}save(n){this.isLoading=!0,this.companyService.rolesEditFormCommit(this.accountId,n.key,n.value,this.companyUniqueId).subscribe(c=>{this.operationStatusRest=c,this.isLoading=!1})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.gz))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-edit-roles"]],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["style","margin: 0.5em 0",4,"ngFor","ngForOf"],[3,"content"],[2,"margin","0.5em 0"],[3,"ngModel","disabled","ngModelChange","change"]],template:function(n,c){1&n&&t.YNc(0,vn,31,5,"ct-cols",0),2&n&&t.Q6J("ngIf",c.accountWithRoleResult)},dependencies:[_.sg,_.O5,T.U,A.n,J.t,k.W,b.i,y.Z,v.t,q._,B.R,X.oG,l.JJ,l.On,_.Nd]})),e})();var wn=s(4853);function In(e,o){if(1&e&&(t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-heading"),t._uU(7),t.qZA(),t._uU(8,"\n        "),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n    "),t.TgZ(11,"ct-section-body"),t._uU(12,"\n        "),t.TgZ(13,"ct-section-body-row"),t._uU(14,"\n            "),t.TgZ(15,"ct-pre"),t._uU(16),t.qZA(),t._uU(17,"\n        "),t.qZA(),t._uU(18,"\n    "),t.qZA(),t._uU(19,"\n"),t.qZA()),2&e){const n=t.oxw();t.xp6(7),t.hij("Batch #",null==n.batchDataStatus?null:n.batchDataStatus.batchId,""),t.xp6(9),t.Oqu(null==n.batchDataStatus?null:n.batchDataStatus.console)}}let Rn=(()=>{class e{constructor(n,c){(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"isLoading",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"batchId",void 0),(0,i.Z)(this,"batchDataStatus",void 0),this.companyService=n,this.activatedRoute=c}ngOnInit(){this.isLoading=!0,this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.batchId=this.activatedRoute.snapshot.paramMap.get("batchId"),this.companyService.getBatchStatus(this.companyUniqueId,this.batchId).subscribe({next:n=>this.batchDataStatus=n,error:()=>this.isLoading=!1,complete:()=>this.isLoading=!1})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.gz))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company-batch-status"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,c){1&n&&t.YNc(0,In,20,2,"ct-section",0),2&n&&t.Q6J("ngIf",!c.isLoading)},dependencies:[_.O5,wn.Q,T.U,A.n,b.i,y.Z,v.t,q._]})),e})();var Nn=s(1099),Sn=s(2587),Mn=s(3238),Jn=s(4385);const kn=["fileUpload"];function Bn(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n                                "),t.TgZ(2,"mat-option",11),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("value",n),t.xp6(1),t.Oqu(n.uid)}}function Ln(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"ct-section-body"),t._uU(17,"\n                "),t.TgZ(18,"ct-section-body-row"),t._uU(19,"\n                    "),t.TgZ(20,"mat-form-field",2),t._uU(21,"\n                        "),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-select",3),t.NdJ("ngModelChange",function(a){t.CHM(n);const u=t.oxw();return t.KtG(u.sourceCode=a)}),t._uU(27,"\n                            "),t.YNc(28,Bn,5,2,"div",4),t._uU(29,"\n                        "),t.qZA(),t._uU(30,"\n                        "),t.TgZ(31,"mat-hint"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n\n                    "),t._UZ(36,"br"),t._uU(37,"\n                    "),t._UZ(38,"br"),t._uU(39,"\n\n                    "),t.TgZ(40,"div"),t._uU(41,"\n                        "),t.TgZ(42,"ct-file-upload",5,6),t.NdJ("changed",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.fileUploadChanged())}),t.ALo(44,"translate"),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                        "),t.TgZ(47,"ct-hint"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\n                        "),t.TgZ(51,"ct-hint"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._uU(54,"\n                    "),t.qZA(),t._uU(55,"\n                "),t.qZA(),t._uU(56,"\n            "),t.qZA(),t._uU(57,"\n            "),t.TgZ(58,"ct-section-footer"),t._uU(59,"\n                "),t.TgZ(60,"ct-section-footer-row"),t._uU(61,"\n                    "),t.TgZ(62,"ct-flex",7),t._uU(63,"\n                        "),t.TgZ(64,"ct-flex-item"),t._uU(65,"\n                            "),t.TgZ(66,"button",8),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.back())}),t._uU(67),t.ALo(68,"translate"),t.qZA(),t._uU(69,"\n                        "),t.qZA(),t._uU(70,"\n                        "),t.TgZ(71,"ct-flex-item"),t._uU(72,"\n                            "),t.TgZ(73,"button",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.upload())}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._uU(76,"\n                        "),t.qZA(),t._uU(77,"\n                    "),t.qZA(),t._uU(78,"\n                "),t.qZA(),t._uU(79,"\n            "),t.qZA(),t._uU(80,"\n        "),t.qZA(),t._uU(81,"\n    "),t.qZA(),t._uU(82,"\n    "),t.TgZ(83,"ct-col",1),t._uU(84,"\n        "),t._UZ(85,"ct-rest-status",10),t._uU(86,"\n    "),t.qZA(),t._uU(87,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.Oqu(t.lcZ(12,12,"batch-add.Upload file for processing")),t.xp6(12),t.hij(" ",t.lcZ(24,14,"batch-add.List of Source Codes"),""),t.xp6(3),t.Q6J("ngModel",n.sourceCode),t.xp6(2),t.Q6J("ngForOf",n.sourceCodesForCompany.items),t.xp6(4),t.Oqu(t.lcZ(33,16,"batch-add.This is a required field.")),t.xp6(10),t.s9C("buttonTitle",t.lcZ(44,18,"batch-add.Select File")),t.xp6(6),t.Oqu(t.lcZ(49,20,"batch-add.This is a required field.")),t.xp6(4),t.Oqu(t.lcZ(53,22,"batch-add.Only .xml and .zip files are supported")),t.xp6(15),t.hij("\n                                ",t.lcZ(68,24,"batch-add.Cancel"),""),t.xp6(6),t.Q6J("disabled",!n.sourceCode||!n.file),t.xp6(1),t.hij(" ",t.lcZ(75,26,"batch-add.Upload-File-button"),""),t.xp6(11),t.Q6J("content",n.batchDataUploadingStatus)}}let Qn=(()=>{class e{constructor(n,c,a){(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"fileUpload",void 0),(0,i.Z)(this,"batchId",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"sourceCodesForCompany",void 0),(0,i.Z)(this,"sourceCode",void 0),(0,i.Z)(this,"file",void 0),(0,i.Z)(this,"batchDataUploadingStatus",void 0),this.companyService=n,this.activatedRoute=c,this.router=a}ngOnInit(){this.batchId=this.activatedRoute.snapshot.paramMap.get("batchId"),this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.sourceCodesForCompany(this.companyUniqueId).subscribe(n=>{this.sourceCodesForCompany=n})}fileUploadChanged(){this.file=this.fileUpload.fileInput.nativeElement.files[0]||!1}upload(){this.companyService.uploadFile(this.companyUniqueId,this.sourceCode.id.toString(),this.file).subscribe(n=>{this.batchDataUploadingStatus=n})}back(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(x),t.Y36(m.gz),t.Y36(m.F0))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company-batch-upload"]],viewQuery:function(n,c){if(1&n&&t.Gf(kn,5),2&n){let a;t.iGM(a=t.CRH())&&(c.fileUpload=a.first)}},decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["appearance","outline",2,"width","100%"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["acceptTypes",".zip, .xml",3,"buttonTitle","changed"],["fileUpload",""],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"],[3,"value"]],template:function(n,c){1&n&&t.YNc(0,Ln,88,28,"ct-cols",0),2&n&&t.Q6J("ngIf",c.sourceCodesForCompany)},dependencies:[_.sg,_.O5,T.U,A.n,S.V,M.R,J.t,k.W,Nn.E,b.i,y.Z,v.t,I.B,R.i,q._,Sn.C,B.R,Mn.ey,Z.lW,h.KE,h.hX,h.bx,Jn.gD,l.JJ,l.On,Q.X$]})),e})();var D=s(7520),ot=s(9272),V=s(5986),Dn=s(5017),Yn=s(7318),On=s(5938),En=s(7392),ct=function(e,o,n,c){var r,a=arguments.length,u=a<3?o:null===c?c=Object.getOwnPropertyDescriptor(o,n):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,o,n,c);else for(var N=e.length-1;N>=0;N--)(r=e[N])&&(u=(a<3?r(u):a>3?r(o,n,u):r(o,n))||u);return a>3&&u&&Object.defineProperty(o,n,u),u},Y=function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};function Fn(e,o){1&e&&t.GkF(0)}function Pn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",20),t._uU(1,"\n                            "),t.TgZ(2,"mat-checkbox",21),t.NdJ("change",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.masterToggle())}),t._uU(3,"\n                                "),t._UZ(4,"div",22),t._uU(5,"\n                            "),t.qZA(),t._uU(6,"\n                        "),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function $n(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"mat-checkbox",24),t.NdJ("click",function(a){return a.stopPropagation()})("change",function(){t.CHM(n);const a=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.selection.toggle(a))}),t._uU(3,"\n                                    "),t._UZ(4,"div",22),t._uU(5,"\n                                "),t.qZA(),t._uU(6,"\n                            "),t.BQk()}if(2&e){const n=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("checked",c.selection.isSelected(n))}}function Kn(e,o){1&e&&(t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"mat-checkbox",25),t._uU(3,"\n                                    "),t._UZ(4,"div",22),t._uU(5,"\n                                "),t.qZA(),t._uU(6,"\n                            "),t.BQk())}function jn(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.YNc(2,$n,7,1,"ng-container",0),t._uU(3,"\n                   \n                            "),t.YNc(4,Kn,7,0,"ng-container",0),t._uU(5,"\n                   \n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",n.batch.deleted),t.xp6(2),t.Q6J("ngIf",!n.batch.deleted)}}function Gn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"ID"),t.qZA())}function Hn(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.batch.id," ")}}function zn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Created on "),t.qZA())}function Wn(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,n.batch.createdOn,"MMM d, yyyy, HH:mm:ss")," ")}}function Xn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Is batch consistent?"),t.qZA())}function Vn(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.true")))}function te(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.false")))}function ne(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1," "),t.YNc(2,Vn,3,3,"span",0),t.YNc(3,te,3,3,"span",0),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",n.ok),t.xp6(1),t.Q6J("ngIf",!n.ok)}}function ee(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Is deleted? "),t.qZA())}function oe(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.batch.deleted," ")}}function ce(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"\n                            "),t.TgZ(2,"div",26),t._uU(3,"Source Code"),t.qZA(),t._uU(4,"\n                            "),t.TgZ(5,"div",26),t._uU(6,"File Name"),t.qZA(),t._uU(7,"\n                        "),t.qZA())}function ie(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.TgZ(2,"div",26),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.TgZ(5,"div",26),t._uU(6),t.qZA(),t._uU(7,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(3),t.Oqu(n.sourceCodeUid),t.xp6(3),t.Oqu(n.uploadedFileName)}}function ae(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Exec State"),t.qZA())}function se(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Error"),t.qZA())}function ue(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Preparing"),t.qZA())}function _e(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Processing"),t.qZA())}function le(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Finished"),t.qZA())}function pe(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.YNc(2,se,2,0,"span",0),t._uU(3,"\n                            "),t.YNc(4,ue,2,0,"span",0),t._uU(5,"\n                            "),t.YNc(6,_e,2,0,"span",0),t._uU(7,"\n                            "),t.YNc(8,le,2,0,"span",0),t._uU(9,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",-1===n.execState),t.xp6(2),t.Q6J("ngIf",2===n.execState),t.xp6(2),t.Q6J("ngIf",3===n.execState),t.xp6(2),t.Q6J("ngIf",4===n.execState)}}function re(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," "),t.qZA())}function me(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._uU(1,"\n                                    "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                        "),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.deleteOne(a))}),t._uU(5,"\n                                            "),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t._uU(8,"\n                                        "),t.qZA(),t._uU(9,"\n                                    "),t.qZA(),t._uU(10,"\n                                "),t.BQk()}if(2&e){const n=t.oxw().$implicit,c=t.oxw(2);t.xp6(4),t.Q6J("disabled",!(n.batch.deleted&&c.isFinished(n)))}}const de=function(e){return["../","batch",e]};function he(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.TgZ(2,"ct-flex",27),t._uU(3,"\n                                "),t.TgZ(4,"ct-flex-item"),t._uU(5,"\n                                    "),t.TgZ(6,"button",28),t._uU(7,"Status"),t.qZA(),t._uU(8,"\n                                "),t.qZA(),t._uU(9,"\n                                "),t.TgZ(10,"ct-flex-item"),t._uU(11,"\n                                    "),t.TgZ(12,"button",29),t.NdJ("click",function(){const u=t.CHM(n).$implicit,r=t.oxw(2);return t.KtG(r.downloadResult(u))}),t._uU(13,"\n                                        Result\n                                    "),t.qZA(),t._uU(14,"\n                                "),t.qZA(),t._uU(15,"\n                                "),t.TgZ(16,"ct-flex-item"),t._uU(17,"\n                                    "),t.TgZ(18,"button",30),t.NdJ("click",function(){const u=t.CHM(n).$implicit,r=t.oxw(2);return t.KtG(r.downloadOriginFile(u))}),t._uU(19,"\n                                        Origin File\n                                    "),t.qZA(),t._uU(20,"\n                                "),t.qZA(),t._uU(21,"\n                                "),t.YNc(22,me,11,1,"ng-container",0),t._uU(23,"\n                   \n                            "),t.qZA(),t._uU(24,"\n                        "),t.qZA()}if(2&e){const n=o.$implicit,c=t.oxw(2);t.xp6(6),t.Q6J("routerLink",t.VKq(4,de,n.batch.id))("disabled",!c.isFinished(n)||c.isExecContextDeleted(n)),t.xp6(6),t.Q6J("disabled",!c.isFinished(n)||c.isExecContextDeleted(n)),t.xp6(10),t.Q6J("ngIf",c.isRole.MasterOperator)}}function Ue(e,o){1&e&&t._UZ(0,"tr",32)}function ge(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const u=t.CHM(n).$implicit,r=t.oxw(2);return t.KtG(r.checkAndToggleRowSeletion(u))}),t.qZA()}if(2&e){const n=o.$implicit,c=t.oxw(2);t.ekj("selected-color",c.downloadSelector.isSelected(n))}}function Ze(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._uU(1,"\n            "),t.TgZ(2,"ct-section-footer-row"),t._uU(3,"\n                "),t.TgZ(4,"button",34),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(2);return t.KtG(a.deleteMany())}),t._uU(5,"\n                    Delete Checked\n                "),t.qZA(),t._uU(6,"\n            "),t.qZA(),t._uU(7,"\n        "),t.BQk()}if(2&e){const n=t.oxw(2);t.xp6(4),t.Q6J("disabled",n.isLoading||0===n.selection.selected.length)}}function fe(e,o){1&e&&t.GkF(0)}function Ce(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                    "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                        "),t.YNc(4,fe,1,0,"ng-container",4),t._uU(5,"\n                    "),t.qZA(),t._uU(6,"\n                "),t.BQk()),2&e){t.oxw(2);const n=t.MAs(3);t.xp6(4),t.Q6J("ngTemplateOutlet",n)}}function xe(e,o){1&e&&t.GkF(0)}function Te(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",3),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11," Batch "),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.TgZ(14,"ct-flex-item"),t._uU(15,"\n                    "),t.YNc(16,Fn,1,0,"ng-container",4),t._uU(17,"\n                "),t.qZA(),t._uU(18,"\n            "),t.qZA(),t._uU(19,"\n        "),t.qZA(),t._uU(20,"\n    "),t.qZA(),t._uU(21,"\n    "),t.TgZ(22,"ct-section-body"),t._uU(23,"\n        "),t.TgZ(24,"ct-section-body-row"),t._uU(25,"\n            "),t.TgZ(26,"ct-table",5),t._uU(27,"\n                "),t.TgZ(28,"table",6),t._uU(29,"\n                    "),t.ynx(30,7),t._uU(31,"\n                        "),t.YNc(32,Pn,7,2,"th",8),t._uU(33,"\n                        "),t.YNc(34,jn,6,2,"td",9),t._uU(35,"\n                    "),t.BQk(),t._uU(36,"\n                   \n                    "),t.ynx(37,10),t._uU(38,"\n                        "),t.YNc(39,Gn,2,0,"th",8),t._uU(40,"\n                        "),t.YNc(41,Hn,2,1,"td",9),t._uU(42,"\n                    "),t.BQk(),t._uU(43,"\n                   \n                    "),t.ynx(44,11),t._uU(45,"\n                        "),t.YNc(46,zn,2,0,"th",8),t._uU(47,"\n                        "),t.YNc(48,Wn,3,4,"td",9),t._uU(49,"\n                    "),t.BQk(),t._uU(50,"\n                   \n                    "),t.ynx(51,12),t._uU(52,"\n                        "),t.YNc(53,Xn,2,0,"th",8),t._uU(54,"\n                        "),t.YNc(55,ne,4,2,"td",9),t._uU(56,"\n                    "),t.BQk(),t._uU(57,"\n                   \n                    "),t.ynx(58,13),t._uU(59,"\n                        "),t.YNc(60,ee,2,0,"th",8),t._uU(61,"\n                        "),t.YNc(62,oe,2,1,"td",9),t._uU(63,"\n                    "),t.BQk(),t._uU(64,"\n                   \n                    "),t.ynx(65,14),t._uU(66,"\n                        "),t.YNc(67,ce,8,0,"th",8),t._uU(68,"\n                        "),t.YNc(69,ie,8,2,"td",9),t._uU(70,"\n                    "),t.BQk(),t._uU(71,"\n                   \n                    "),t.ynx(72,15),t._uU(73,"\n                        "),t.YNc(74,ae,2,0,"th",8),t._uU(75,"\n                        "),t.YNc(76,pe,10,4,"td",9),t._uU(77,"\n                    "),t.BQk(),t._uU(78,"\n                   \n                    "),t.ynx(79,16),t._uU(80,"\n                        "),t.YNc(81,re,2,0,"th",8),t._uU(82,"\n                        "),t.YNc(83,he,25,6,"td",9),t._uU(84,"\n                    "),t.BQk(),t._uU(85,"\n                   \n                    "),t.YNc(86,Ue,1,0,"tr",17),t._uU(87,"\n                    "),t.YNc(88,ge,1,2,"tr",18),t._uU(89,"\n                "),t.qZA(),t._uU(90,"\n            "),t.qZA(),t._uU(91,"\n        "),t.qZA(),t._uU(92,"\n    "),t.qZA(),t._uU(93,"\n    "),t.TgZ(94,"ct-section-footer"),t._uU(95,"\n        "),t.YNc(96,Ze,8,1,"ng-container",0),t._uU(97,"\n        "),t.TgZ(98,"ct-section-footer-row"),t._uU(99,"\n            "),t.TgZ(100,"ct-flex",3),t._uU(101,"\n                "),t.TgZ(102,"ct-flex-item"),t._uU(103,"\n                    "),t.TgZ(104,"ct-table-pagination",19),t.NdJ("prev",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.prevPage())})("next",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.nextPage())}),t.qZA(),t._uU(105,"\n                "),t.qZA(),t._uU(106,"\n\n                "),t.YNc(107,Ce,7,1,"ng-container",0),t._uU(108,"\n\n                "),t.TgZ(109,"ct-flex-item"),t._uU(110,"\n                    "),t.YNc(111,xe,1,0,"ng-container",4),t._uU(112,"\n                "),t.qZA(),t._uU(113,"\n            "),t.qZA(),t._uU(114,"\n        "),t.qZA(),t._uU(115,"\n    "),t.qZA(),t._uU(116,"\n"),t.qZA()}if(2&e){const n=t.oxw(),c=t.MAs(6);t.xp6(16),t.Q6J("ngTemplateOutlet",c),t.xp6(10),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(58),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(8),t.Q6J("ngIf",n.isRole.MasterOperator),t.xp6(8),t.Q6J("pageableDefault",n.batchesResult.batches),t.xp6(3),t.Q6J("ngIf",n.downloadSelector.size>0),t.xp6(4),t.Q6J("ngTemplateOutlet",c)}}function Ae(e,o){if(1&e){const n=t.EpF();t._uU(0,"\n    "),t.TgZ(1,"ct-flex",35),t._uU(2,"\n        "),t.TgZ(3,"ct-flex-item"),t._uU(4,"\n            "),t.TgZ(5,"div",36),t._uU(6),t.qZA(),t._uU(7,"\n        "),t.qZA(),t._uU(8,"\n        "),t.TgZ(9,"ct-flex-item"),t._uU(10,"\n            "),t.TgZ(11,"button",37),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.downloadResults())}),t._uU(12,"\n                Download\n            "),t.qZA(),t._uU(13,"\n        "),t.qZA(),t._uU(14,"\n        "),t.TgZ(15,"ct-flex-item"),t._uU(16,"\n            "),t.TgZ(17,"button",37),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.downloadSelector.clear())}),t._uU(18,"\n                Discard\n            "),t.qZA(),t._uU(19,"\n        "),t.qZA(),t._uU(20,"\n    "),t.qZA(),t._uU(21,"\n")}if(2&e){const n=t.oxw();t.xp6(6),t.hij("\n                Selected \xd7 ",n.downloadSelector.size,"\n            "),t.xp6(5),t.Q6J("disabled",n.isLoading),t.xp6(6),t.Q6J("disabled",n.isLoading)}}const be=function(){return["upload"]};function ye(e,o){1&e&&(t.ynx(0),t._uU(1,"\n        "),t.TgZ(2,"button",38),t._uU(3,"Upload files and start\n            processing"),t.qZA(),t._uU(4,"\n    "),t.BQk()),2&e&&(t.xp6(2),t.Q6J("routerLink",t.DdM(1,be)))}function ve(e,o){if(1&e&&(t._uU(0,"\n    "),t.YNc(1,ye,5,2,"ng-container",0),t._uU(2,"\n")),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isRole.MasterOperator)}}class L extends f.S{constructor(o,n,c,a,u){super(o),(0,i.Z)(this,"authenticationService",void 0),(0,i.Z)(this,"companyService",void 0),(0,i.Z)(this,"activatedRoute",void 0),(0,i.Z)(this,"dialog",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"companyUniqueId",void 0),(0,i.Z)(this,"batchesResult",void 0),(0,i.Z)(this,"batches",void 0),(0,i.Z)(this,"dataSource",new p.by([])),(0,i.Z)(this,"selection",new Dn.Ov(!0,[])),(0,i.Z)(this,"downloadSelector",new Yn.Z),this.authenticationService=o,this.companyService=n,this.activatedRoute=c,this.dialog=a,this.translate=u}checkAndToggleRowSeletion(o){this.isFinished(o)&&!this.isExecContextDeleted(o)&&this.downloadSelector.toggle(o)}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.updateTable("0")}isAllSelected(){return this.selection.selected.length===this.dataSource.data.filter(o=>o.batch.deleted).length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.filter(o=>o.batch.deleted).forEach(o=>this.selection.select(o))}get columnsToDisplay(){return this.isRole.MasterOperator?["check","id","createdOn","isBatchConsistent","isDeleted","sourceCode","execState","bts"]:["id","createdOn","isBatchConsistent","isDeleted","sourceCode","execState","bts"]}updateTable(o){this.isLoading=!0,this.companyService.batches(o,this.companyUniqueId).subscribe({next:n=>{this.batchesResult=n,this.batches=this.batchesResult.batches.content,this.dataSource=new p.by(this.batches),this.selection.clear()},complete:()=>this.isLoading=!1})}isFinished(o){return o.batch.execState===V.h.Finished||o.batch.execState===V.h.Error||o.batch.execState===V.h.Archived}isExecContextDeleted(o){return o.execContextDeleted}prevPage(){this.updateTable((this.batchesResult.batches.number-1).toString())}nextPage(){this.updateTable((this.batchesResult.batches.number+1).toString())}deleteOne(o){this.isLoading=!0,this.companyService.processBatchDeleteCommit(this.companyUniqueId,o.batch.id.toString()).subscribe({complete:()=>{this.updateTable(this.batchesResult.batches.number.toString())}})}deleteMany(){this.isLoading=!0,this.companyService.processBatchesBulkDeleteCommit(this.companyUniqueId,this.selection.selected.map(o=>o.batch.id).toString()).subscribe({next:()=>{this.updateTable(this.batchesResult.batches.number.toString())}})}downloadResult(o){this.companyService.downloadProcessingResult(this.companyUniqueId,o.batch.id.toString()).subscribe(n=>{let c=n.headers.get("Content-Disposition");const a=c.replace("filename*=UTF-8''","")||"result.zip";console.log("company-batch-list.contentDisposition: "+c),console.log("company-batch-list.tryname: "+a);const u=decodeURI(a);console.log("company-batch-list.decodedName: "+u),H.saveAs(n.body,u)})}downloadOriginFile(o){this.companyService.downloadOriginFile(this.companyUniqueId,o.batch.id.toString(),o.uploadedFileName).subscribe(n=>{const c=n.headers.get("Content-Disposition").replace("filename*=UTF-8''","")||"result.zip";console.log("company-batchs: "+c),H.saveAs(n.body,c)})}downloadResults(){this.isLoading=!0,this.companyService.downloadProcessingResults(this.downloadSelector.getList(),this.companyUniqueId).subscribe(()=>{this.isLoading=!1,this.downloadSelector.clear()})}}(0,i.Z)(L,"\u0275fac",function(o){return new(o||L)(t.Y36(g.$h),t.Y36(x),t.Y36(m.gz),t.Y36(On.uw),t.Y36(Q.sK))}),(0,i.Z)(L,"\u0275cmp",t.Xpm({type:L,selectors:[["company-batch-list"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["downloadButtonsTemplate",""],["uploadButtonTemplate",""],["justify-content","space-between"],[4,"ngTemplateOutlet"],[3,"isWaiting"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","createdOn"],["matColumnDef","isBatchConsistent"],["matColumnDef","isDeleted"],["matColumnDef","sourceCode"],["matColumnDef","execState"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected-color","click",4,"matRowDef","matRowDefColumns"],[3,"pageableDefault","prev","next"],["mat-header-cell",""],["color","warn",3,"checked","indeterminate","change"],[1,"check-area"],["mat-cell",""],["color","warn",3,"checked","click","change"],["disabled",""],[1,"no-wrap"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","size","forTableRow","color","primary",3,"routerLink","disabled"],["mat-flat-button","","size","forTableRow","color","primary",3,"disabled","click"],["mat-flat-button","","size","forTableRow","color","primary",3,"click"],["mat-flat-button","","color","warn","size","forTableRow","title","Delete",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"click"],["mat-flat-button","","color","warn","title","Delete Checked",3,"disabled","click"],["justify-content","center","gap","unit(1)","align-items","center"],[1,"selected-count"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary",3,"routerLink"]],template:function(o,n){1&o&&(t.YNc(0,Te,117,9,"ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,Ae,22,3,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n"),t.YNc(5,ve,3,1,"ng-template",null,2,t.W1O)),2&o&&t.Q6J("ngIf",n.batchesResult)},dependencies:[_.O5,_.tP,m.rH,T.U,A.n,S.V,M.R,z.a,b.i,y.Z,v.t,I.B,R.i,q._,W.C,Z.lW,X.oG,En.Hw,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,_.uU,Q.X$],styles:["mat-checkbox[_ngcontent-%COMP%]{position:relative}.check-area[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;top:50%;left:50%;margin-top:-20px;margin-left:-20px;background-color:#0000}.selected-color[_ngcontent-%COMP%]{background-color:#ffc1072e}.selected-count[_ngcontent-%COMP%]{background:rgba(255,193,7,.18);border-radius:4px;padding:10px 20px 8px}"]})),ct([(0,ot.K)({question:e=>({text:(0,D.J)("batch-company.delete-dialog.Do you want to delete Batch _batchId_"),params:{batchId:e.batch.id}}),rejectTitle:`${(0,D.J)("batch-company.delete-dialog.Cancel")}`,resolveTitle:`${(0,D.J)("batch-company.delete-dialog.Delete")}`}),Y("design:type",Function),Y("design:paramtypes",[Object]),Y("design:returntype",void 0)],L.prototype,"deleteOne",null),ct([(0,ot.K)({question:()=>({text:(0,D.J)("batch-company.delete-dialog.Do you want to delete Batches"),params:{}}),rejectTitle:`${(0,D.J)("batch-company.delete-dialog.Cancel")}`,resolveTitle:`${(0,D.J)("batch-company.delete-dialog.Delete")}`}),Y("design:type",Function),Y("design:paramtypes",[]),Y("design:returntype",void 0)],L.prototype,"deleteMany",null);var F=s(5126);const it=[{path:"",component:G},{path:"companies",component:Qt},{path:":companyUniqueId/edit",canActivate:[F.k],component:Ot,data:{backConfig:["../","../","companies"],requiredRoles:[g.uU.MainAdmin]}},{path:"add",component:fn,data:{backConfig:["../","companies"]}},{path:":companyUniqueId/accounts",component:gn,canActivate:[F.k],data:{backConfig:["../","../","companies"],requiredRoles:[g.uU.MainAdmin]}},{path:":companyUniqueId/account/add",component:Cn,data:{backConfig:["../","../","accounts"]}},{path:":companyUniqueId/account/:accountId/edit",component:Tn,data:{backConfig:["../","../","../","accounts"]}},{path:":companyUniqueId/account/:accountId/edit-roles",component:qn,data:{backConfig:["../","../","../","accounts"]}},{path:":companyUniqueId/account/:accountId/edit-password",component:bn,data:{backConfig:["../","../","../","accounts"]}},{path:"1/batches",redirectTo:"companies"},{path:":companyUniqueId/batches",component:L,canActivate:[F.k],data:{backConfig:["../","../","companies"],requiredRoles:[g.uU.MainSupport,g.uU.MainOperator]}},{path:":companyUniqueId/batches/upload",component:Qn,canActivate:[F.k],data:{backConfig:["../"],requiredRoles:[g.uU.MainSupport,g.uU.MainOperator]}},{path:":companyUniqueId/batch/:batchId",component:Rn,canActivate:[F.k],data:{backConfig:["../","../","batches"],requiredRoles:[g.uU.MainSupport,g.uU.MainOperator]}}];let at=(()=>{class e{}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275mod",t.oAB({type:e})),(0,i.Z)(e,"\u0275inj",t.cJS({imports:[m.Bz.forChild(it),m.Bz]})),e})(),qe=(()=>{class e{}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275mod",t.oAB({type:e})),(0,i.Z)(e,"\u0275inj",t.cJS({imports:[_.ez,at,K.E,j.$,l.u5,l.UX,Q.aw.forChild({})]})),e})()},7824:(st,P,s)=>{s.d(P,{C:()=>p});var i=s(1180),_=s(4650),m=s(6895),Q=s(4859),K=s(7392),j=s(8868),t=s(3370);function G(f,g){if(1&f){const U=_.EpF();_.TgZ(0,"ct-flex",1),_._uU(1,"\n    "),_.TgZ(2,"ct-flex-item"),_._uU(3,"\n        "),_.TgZ(4,"button",2),_.NdJ("click",function(){_.CHM(U);const O=_.oxw();return _.KtG(O._prev())}),_._uU(5,"\n            "),_.TgZ(6,"mat-icon"),_._uU(7,"navigate_before"),_.qZA(),_._uU(8,"\n        "),_.qZA(),_._uU(9,"\n        "),_.TgZ(10,"button",2),_.NdJ("click",function(){_.CHM(U);const O=_.oxw();return _.KtG(O._next())}),_._uU(11,"\n            "),_.TgZ(12,"mat-icon"),_._uU(13,"navigate_next"),_.qZA(),_._uU(14,"\n        "),_.qZA(),_._uU(15,"\n    "),_.qZA(),_._uU(16,"\n"),_.qZA()}if(2&f){const U=_.oxw();_.xp6(4),_.Q6J("disabled",U.globalDisable||U.pageableDefault.first),_.xp6(6),_.Q6J("disabled",U.globalDisable||U.pageableDefault.last)}}let p=(()=>{class f{constructor(){(0,i.Z)(this,"next",new _.vpe),(0,i.Z)(this,"prev",new _.vpe),(0,i.Z)(this,"globalDisable",void 0),(0,i.Z)(this,"pageableDefault",void 0)}_next(){this.next.emit()}_prev(){this.prev.emit()}}return(0,i.Z)(f,"\u0275fac",function(U){return new(U||f)}),(0,i.Z)(f,"\u0275cmp",_.Xpm({type:f,selectors:[["ct-table-pagination"]],inputs:{globalDisable:"globalDisable",pageableDefault:"pageableDefault"},outputs:{next:"next",prev:"prev"},decls:1,vars:1,consts:[["justify-content","flex-start",4,"ngIf"],["justify-content","flex-start"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(U,C){1&U&&_.YNc(0,G,17,2,"ct-flex",0),2&U&&_.Q6J("ngIf",C.pageableDefault)},dependencies:[m.O5,Q.RK,K.Hw,j.B,t.i]})),f})()}}]);