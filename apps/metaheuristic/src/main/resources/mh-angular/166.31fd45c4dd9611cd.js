"use strict";(self.webpackChunkmetaheuristic_app=self.webpackChunkmetaheuristic_app||[]).push([[166],{9272:(Dt,Q,u)=>{u.d(Q,{K:()=>c});var a=u(1180),g=u(5938),A=u(4128),p=u(4650),E=u(4859);let G=(()=>{class m{constructor(D,N){(0,a.Z)(this,"dialogRef",void 0),(0,a.Z)(this,"data",void 0),this.dialogRef=D,this.data=N}onNoClick(){this.dialogRef.close(0)}onYesClick(){this.dialogRef.close(1)}}return(0,a.Z)(m,"\u0275fac",function(D){return new(D||m)(p.Y36(g.so),p.Y36(g.WI))}),(0,a.Z)(m,"\u0275cmp",p.Xpm({type:m,selectors:[["app-dialog-confirmation"]],decls:19,vars:3,consts:[[1,"mat-dialog-content"],[1,"mat-dialog-actions"],[1,"mat-dialog-action"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","warn",3,"click"]],template:function(D,N){1&D&&(p.TgZ(0,"div",0),p._uU(1),p.qZA(),p._UZ(2,"br"),p._uU(3,"\n"),p.TgZ(4,"div",1),p._uU(5,"\n  "),p.TgZ(6,"div",2),p._uU(7,"\n    "),p.TgZ(8,"button",3),p.NdJ("click",function(){return N.onNoClick()}),p._uU(9),p.qZA(),p._uU(10,"\n  "),p.qZA(),p._uU(11,"\n  "),p.TgZ(12,"div",2),p._uU(13,"\n    "),p.TgZ(14,"button",4),p.NdJ("click",function(){return N.onYesClick()}),p._uU(15),p.qZA(),p._uU(16,"\n  "),p.qZA(),p._uU(17,"\n"),p.qZA(),p._uU(18," ")),2&D&&(p.xp6(1),p.Oqu(N.data.question),p.xp6(8),p.Oqu(N.data.rejectTitle),p.xp6(6),p.Oqu(N.data.resolveTitle))},dependencies:[E.lW],styles:[".mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 -8px}.mat-dialog-action[_ngcontent-%COMP%]{flex:1;margin:0 8px}.mat-dialog-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.mat-dialog-content[_ngcontent-%COMP%]{max-height:auto!important;overflow:hidden!important}"]})),m})();function c(m){return function(D,N,T){const t=T.value;return T.value=function(...J){let S={text:"",params:!1};"string"==typeof m.question(...J)?S.text=m.question(...J):S=m.question(...J),this.dialog||function F(){throw new Error("\ncomponent require MatDialog\n\nimport { MatDialog } from '@angular/material';\n...\nconstructor(\n    ...\n    private dialog: MatDialog\n    ...\n) {}\n                ")}(),S.params&&!this.translate&&function M(){throw new Error("\ncomponent require TranslateService\n\nimport { TranslateService } from '@ngx-translate/core';\n...\nconstructor(\n    ...\n    private translate: TranslateService\n    ...\n) {}\n                ")}(),this.translate?(0,A.D)(this.translate.get(S.text,S.params),this.translate.get(m.resolveTitle),this.translate.get(m.rejectTitle)).subscribe(R=>{this.dialog.open(G,{width:"500px",data:{question:R[0],resolveTitle:R[1],rejectTitle:R[2]}}).afterClosed().subscribe(rt=>{rt&&t.apply(this,J)})}):this.dialog.open(G,{width:"500px",data:{question:S.text,resolveTitle:m.resolveTitle,rejectTitle:m.rejectTitle}}).afterClosed().subscribe(R=>{R&&t.apply(this,J)})},T}}},4853:(Dt,Q,u)=>{u.d(Q,{Q:()=>p});var a=u(1180),g=u(4650);const A=["*"];let p=(()=>{class E{constructor(){}ngOnInit(){}}return(0,a.Z)(E,"\u0275fac",function(c){return new(c||E)}),(0,a.Z)(E,"\u0275cmp",g.Xpm({type:E,selectors:[["ct-pre"]],ngContentSelectors:A,decls:1,vars:0,template:function(c,F){1&c&&(g.F$t(),g.Hsn(0))},styles:["[_nghost-%COMP%]{display:block;font-family:sans-serif;padding:0;font-size:12px;line-height:1.6;word-break:break-word;white-space:pre-wrap}[overflow-x=auto][_nghost-%COMP%]{overflow-x:auto}"]})),E})()},7530:(Dt,Q,u)=>{u.d(Q,{a:()=>E});var a=u(1180),g=u(4650),A=u(1572);const p=["*"];let E=(()=>{class G{constructor(F){(0,a.Z)(this,"changeDetector",void 0),(0,a.Z)(this,"isWaiting",void 0),(0,a.Z)(this,"state",{wait:!1}),(0,a.Z)(this,"isFnMode",void 0),this.changeDetector=F}ngOnInit(){void 0===this.isWaiting?this.isFnMode=!0:(this.isFnMode=!1,this.state.wait=this.isWaiting)}ngOnDestroy(){this.changeDetector.detach()}ngOnChanges(){this.isFnMode||(this.state.wait=this.isWaiting)}wait(){this.isFnMode&&(this.state.wait=!0,this.changeDetector.destroyed||this.changeDetector.detectChanges())}show(){this.isFnMode&&(this.state.wait=!1,this.changeDetector.destroyed||this.changeDetector.detectChanges())}}return(0,a.Z)(G,"\u0275fac",function(F){return new(F||G)(g.Y36(g.sBO))}),(0,a.Z)(G,"\u0275cmp",g.Xpm({type:G,selectors:[["ct-table"]],inputs:{isWaiting:"isWaiting"},features:[g.TTD],ngContentSelectors:p,decls:12,vars:2,consts:[[1,"ct-table"],[1,"ct-table__body"],[1,"ct-table__wait"]],template:function(F,M){1&F&&(g.F$t(),g.TgZ(0,"div",0),g._uU(1,"\n    "),g.TgZ(2,"div",1),g._uU(3,"\n        "),g.Hsn(4),g._uU(5,"\n    "),g.qZA(),g._uU(6,"\n    "),g.TgZ(7,"div",2),g._uU(8,"\n        "),g._UZ(9,"mat-spinner"),g._uU(10,"\n    "),g.qZA(),g._uU(11,"\n"),g.qZA()),2&F&&g.ekj("ct-table--wait",M.state.wait)},dependencies:[A.Ou],styles:["[_nghost-%COMP%]{display:block;position:relative;margin:0;overflow-y:auto}[_nghost-%COMP%]     .mat-table{width:100%;border-collapse:collapse;background:none}[_nghost-%COMP%]     .mat-header-row{height:auto}[_nghost-%COMP%]     .mat-header-cell, [_nghost-%COMP%]     .mat-cell, [_nghost-%COMP%]     .mat-footer-cell{border-bottom-width:1px;border-bottom-style:solid;border-top-width:1px;border-top-style:solid;padding:9px;font-family:sans-serif;font-size:14.94px;line-height:18px}[_nghost-%COMP%]     .mat-header-cell{white-space:nowrap;font-weight:700;vertical-align:baseline;color:inherit}[_nghost-%COMP%]     .mat-cell{vertical-align:baseline}[_nghost-%COMP%]     .mat-header-cell:first-child, [_nghost-%COMP%]     .mat-cell:first-child{padding-left:9px}[_nghost-%COMP%]     .mat-header-cell:last-child, [_nghost-%COMP%]     .mat-cell:last-child{padding-right:9px}[_nghost-%COMP%]     .mat-row{height:auto}.light-theme[_nghost-%COMP%]     .mat-header-cell, .light-theme   [_nghost-%COMP%]     .mat-header-cell, .light-theme[_nghost-%COMP%]     .mat-cell, .light-theme   [_nghost-%COMP%]     .mat-cell, .light-theme[_nghost-%COMP%]     .mat-footer-cell, .light-theme   [_nghost-%COMP%]     .mat-footer-cell{border-top-color:#f0f0f0;border-bottom-color:#f0f0f0}.dark-theme[_nghost-%COMP%]     .mat-header-cell, .dark-theme   [_nghost-%COMP%]     .mat-header-cell, .dark-theme[_nghost-%COMP%]     .mat-cell, .dark-theme   [_nghost-%COMP%]     .mat-cell, .dark-theme[_nghost-%COMP%]     .mat-footer-cell, .dark-theme   [_nghost-%COMP%]     .mat-footer-cell{border-top-color:#474747;border-bottom-color:#474747}.ct-table[_ngcontent-%COMP%]{position:relative}.ct-table__wait[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;background-color:#ffffff1a;overflow:hidden}.ct-table--wait[_ngcontent-%COMP%]   .ct-table__body[_ngcontent-%COMP%]{opacity:.5}.ct-table--wait[_ngcontent-%COMP%]   .ct-table__wait[_ngcontent-%COMP%]{display:flex}"]})),G})()},8413:(Dt,Q,u)=>{u.r(Q),u.d(Q,{ScenarioGroupRoutingModule:()=>Ee,ScenarioModule:()=>Br,ScenarioRoutes:()=>Oe});var a=u(1180),g=u(6895),A=u(9299),p=u(3081),E=u(1623),G=u(6423),c=u(4006),F=u(5126),M=u(3788),m=u(3626),k=u(8318),D=u(9272),N=u(2340),T=u(7528),t=u(4650),J=u(529);const S=n=>`${N.N.baseUrl}dispatcher/scenario/${n}`;let R=(()=>{class n{constructor(e){(0,a.Z)(this,"http",void 0),(0,a.Z)(this,"scenarios",(i,o)=>this.http.get(S(`scenarios/${o}`),{params:{page:i}})),this.http=e}getScenarioGroups(e){let i=S("scenario-groups");return console.log("ScenarioService.newUrl: "+i),this.http.get(i,{params:{page:e}})}scenarioSteps(e,i){return this.http.get(S(`scenarios/${e}/scenario/${i}/steps`))}querySourceCodeId(e,i){return this.http.get(S(`scenarios/${e}/scenario/${i}/sourceCodeId`))}scenarioGroupDeleteCommit(e){return console.log("Delete Scenario Group #"+e),this.http.post(S("scenario-group-delete-commit"),(0,T.P)({scenarioGroupId:e}))}addScenarioGroupFormCommit(e,i){return this.http.post(S("scenario-group-add-commit"),(0,T.P)({name:e,description:i}))}addScenarioFormCommit(e,i,o){return this.http.post(S("scenario-add-commit"),(0,T.P)({scenarioGroupId:e,name:i,description:o}))}addOrSaveScenarioStepFormCommit(e,i,o,r,l,d,x,f,_,y,B){const V=r;return this.http.post(S("scenario-step-add-change-commit"),(0,T.P)({scenarioGroupId:e,scenarioId:i,uuid:o,parentUuid:V,name:l,prompt:d,apiId:x,resultCode:f,functionCode:_,expected:B,aggregateType:y}))}scenarioDeleteCommit(e){return console.log("Delete Scenario #"+e),this.http.post(S("scenario-delete-commit"),(0,T.P)({scenarioId:e}))}runScenario(e,i){return console.log("Run Scenario #"+i),this.http.post(S("scenario-run"),(0,T.P)({scenarioGroupId:e,scenarioId:i}))}scenarioAdd(){return this.http.get(S("scenario-add"))}scenarioStepAdd(){return this.http.get(S("scenario-step-add"))}scenarioStepDeleteCommit(e,i){return console.log("Delete ScenarioStep #"+e+", uuid: "+i),this.http.post(S("scenario-step-delete-commit"),(0,T.P)({scenarioId:e,uuid:i}))}scenarioStepRearrangeTable(e,i,o){return console.log("scenarioStepRearrangeTable #"+e+", prev: "+i+", curr: "+o),this.http.post(S("scenario-step-rearrange"),(0,T.P)({scenarioId:e,prev:i,curr:o}))}copyScenario(e,i){return console.log("Run Scenario #"+i),this.http.post(S("scenario-copy"),(0,T.P)({scenarioGroupId:e,scenarioId:i}))}updateScenarioInfoFormCommit(e,i,o,r){return this.http.post(S("scenario-update-info-commit"),(0,T.P)({scenarioGroupId:e,scenarioId:i,name:o,description:r}))}}return(0,a.Z)(n,"\u0275fac",function(e){return new(e||n)(t.LFG(J.eN))}),(0,a.Z)(n,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();var rt=u(5938),z=u(1439),lt=u(9185),at=u(6890),dt=u(2555),Ft=u(7530),K=u(6264),W=u(305),X=u(5014),tt=u(8868),et=u(3370),nt=u(9863),$t=u(7824),I=u(4859),Ct=u(7392),Mt=function(n,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,s)};function Ne(n,s){1&n&&t.GkF(0)}function Be(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",2),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Scenario groups"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-flex",3),t._uU(16,"\n                "),t.TgZ(17,"ct-flex-item"),t._uU(18,"\n                    "),t.TgZ(19,"button",4),t._uU(20,"Add Scenario Group"),t.qZA(),t._uU(21,"\n                "),t.qZA(),t._uU(22,"\n            "),t.qZA(),t._uU(23,"\n        "),t.qZA(),t._uU(24,"\n    "),t.qZA(),t._uU(25,"\n    "),t.TgZ(26,"ct-section-body"),t._uU(27,"\n        "),t.TgZ(28,"ct-section-body-row"),t._uU(29,"\n            "),t.YNc(30,Ne,1,0,"ng-container",5),t._uU(31,"\n        "),t.qZA(),t._uU(32,"\n    "),t.qZA(),t._uU(33,"\n    "),t.TgZ(34,"ct-section-footer"),t._uU(35,"\n        "),t.TgZ(36,"ct-section-footer-row"),t._uU(37,"\n            "),t.TgZ(38,"ct-flex",2),t._uU(39,"\n                "),t.TgZ(40,"ct-flex-item"),t._uU(41,"\n                    "),t.TgZ(42,"ct-flex",6),t._uU(43,"\n                        "),t.TgZ(44,"ct-table-pagination",7),t.NdJ("next",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.nextPage())})("prev",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.prevPage())}),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                    "),t.qZA(),t._uU(47,"\n                "),t.qZA(),t._uU(48,"\n            "),t.qZA(),t._uU(49,"\n        "),t.qZA(),t._uU(50,"\n    "),t.qZA(),t._uU(51,"\n"),t.qZA()}if(2&n){const e=t.oxw(),i=t.MAs(3);t.xp6(30),t.Q6J("ngTemplateOutlet",i),t.xp6(14),t.Q6J("pageableDefault",e.simpleScenarioGroupsResult.scenarioGroups)("globalDisable",e.isLoading)}}function Ye(n,s){1&n&&(t.TgZ(0,"th",19),t._uU(1,"ScenarioGroupId"),t.qZA())}function Pe(n,s){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("",e.scenarioGroupId," ")}}function je(n,s){1&n&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("\n                    ",t.lcZ(2,1,"main.CreatedOn"),"\n                "))}function Qe(n,s){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("\n                    ",t.xi3(2,1,e.createdOn,"MMM d, yyyy, HH:mm"),"\n                ")}}function $e(n,s){1&n&&(t.TgZ(0,"th",19),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"br"),t._uU(4),t.ALo(5,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("\n                    ",t.lcZ(2,2,"main.Name"),""),t.xp6(3),t.hij("\n                    ",t.lcZ(5,4,"main.Description"),"\n                "))}function He(n,s){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("\n                    ",e.name,""),t.xp6(2),t.hij("\n                    ",e.description,"\n                ")}}function Ve(n,s){1&n&&t._UZ(0,"th",19)}const Je=function(n){return["../scenario",n,"scenarios"]};function ze(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",21),t._uU(1,"\n                    "),t.TgZ(2,"ct-flex",22),t._uU(3,"\n                        "),t.TgZ(4,"ct-flex-item"),t._uU(5,"\n                            "),t.TgZ(6,"button",23),t._uU(7,"Scenarios"),t.qZA(),t._uU(8,"\n                        "),t.qZA(),t._uU(9,"\n                        "),t.TgZ(10,"ct-flex-item"),t._uU(11,"\n                            "),t.TgZ(12,"button",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.delete(r))}),t._uU(13,"\n                                "),t.TgZ(14,"mat-icon"),t._uU(15,"delete"),t.qZA(),t._uU(16,"\n                            "),t.qZA(),t._uU(17,"\n                        "),t.qZA(),t._uU(18,"\n                    "),t.qZA(),t._uU(19,"\n                "),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(6),t.Q6J("routerLink",t.VKq(1,Je,e.scenarioGroupId))}}function Ke(n,s){1&n&&t._UZ(0,"tr",25)}function We(n,s){1&n&&t._UZ(0,"tr",26)}function Xe(n,s){if(1&n&&(t._uU(0,"\n    "),t.TgZ(1,"ct-table",8),t._uU(2,"\n        "),t.TgZ(3,"table",9),t._uU(4,"\n            "),t.ynx(5,10),t._uU(6,"\n                "),t.YNc(7,Ye,2,0,"th",11),t._uU(8,"\n                "),t.YNc(9,Pe,2,1,"td",12),t._uU(10,"\n            "),t.BQk(),t._uU(11,"\n            "),t.ynx(12,13),t._uU(13,"\n                "),t.YNc(14,je,3,3,"th",11),t._uU(15,"\n                "),t.YNc(16,Qe,3,4,"td",14),t._uU(17,"\n            "),t.BQk(),t._uU(18,"\n            "),t.ynx(19,15),t._uU(20,"\n                "),t.YNc(21,$e,6,6,"th",11),t._uU(22,"\n                "),t.YNc(23,He,4,2,"td",12),t._uU(24,"\n            "),t.BQk(),t._uU(25,"\n            "),t.ynx(26,16),t._uU(27,"\n                "),t.YNc(28,Ve,1,0,"th",11),t._uU(29,"\n                "),t.YNc(30,ze,20,3,"td",14),t._uU(31,"\n            "),t.BQk(),t._uU(32,"\n            "),t.YNc(33,Ke,1,0,"tr",17),t._uU(34,"\n            "),t.YNc(35,We,1,0,"tr",18),t._uU(36,"\n        "),t.qZA(),t._uU(37,"\n    "),t.qZA(),t._uU(38,"\n")),2&n){const e=t.oxw();t.xp6(1),t.Q6J("isWaiting",e.isLoading),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",e.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",e.columnsToDisplay)}}class ct extends k.S{constructor(s,e,i){super(e),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"authenticationService",void 0),(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"columnsToDisplay",["scenarioGroupId","createdOn","name","bts"]),(0,a.Z)(this,"simpleScenarioGroupsResult",void 0),(0,a.Z)(this,"dataSource",new m.by([])),this.dialog=s,this.authenticationService=e,this.scenarioService=i}ngOnInit(){console.log("scenario-groups.component.ts.ngOnInit()"),this.getScenarioGroups(0)}getScenarioGroups(s){this.setIsLoadingStart(),this.scenarioService.getScenarioGroups(s.toString()).subscribe({next:e=>{this.simpleScenarioGroupsResult=e,this.dataSource=new m.by(this.simpleScenarioGroupsResult.scenarioGroups.content||[])},complete:()=>{this.setIsLoadingEnd()}})}delete(s){this.scenarioService.scenarioGroupDeleteCommit(s.scenarioGroupId.toString()).subscribe(e=>this.getScenarioGroups(this.simpleScenarioGroupsResult.scenarioGroups.number))}prevPage(){this.getScenarioGroups(this.simpleScenarioGroupsResult.scenarioGroups.number-1)}nextPage(){this.getScenarioGroups(this.simpleScenarioGroupsResult.scenarioGroups.number+1)}}(0,a.Z)(ct,"\u0275fac",function(s){return new(s||ct)(t.Y36(rt.uw),t.Y36(M.$h),t.Y36(R))}),(0,a.Z)(ct,"\u0275cmp",t.Xpm({type:ct,selectors:[["scenario-groups"]],features:[t.qOj],decls:5,vars:1,consts:[[4,"ngIf"],["mainTableTemplate",""],["justify-content","space-between"],["justify-content","flex-end"],["mat-flat-button","mat-flat-button","color","primary","routerLink","scenario-group-add"],[4,"ngTemplateOutlet"],["justify-content","flex-start","gap","8px"],[3,"pageableDefault","globalDisable","next","prev"],[3,"isWaiting"],["mat-table","mat-table",1,"mat-table",3,"dataSource"],["matColumnDef","scenarioGroupId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","mat-cell",4,"matCellDef"],["matColumnDef","createdOn"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","mat-cell"],["mat-cell",""],["justify-content","flex-end","gap","8px"],["mat-flat-button","","color","primary","size","forTableRow",3,"routerLink"],["mat-flat-button","","color","warn","size","forTableRow",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,e){1&s&&(t.YNc(0,Be,52,3,"ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,Xe,39,4,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n")),2&s&&t.Q6J("ngIf",e.simpleScenarioGroupsResult)},dependencies:[g.O5,g.tP,A.rH,z.U,lt.n,at.V,dt.R,Ft.a,K.i,W.Z,X.t,tt.B,et.i,nt._,$t.C,I.lW,Ct.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,g.uU,p.X$]})),function(n,s,e,i){var l,o=arguments.length,r=o<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,s,e,i);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(r=(o<3?l(r):o>3?l(s,e,r):l(s,e))||r);o>3&&r&&Object.defineProperty(s,e,r)}([(0,D.K)({question:n=>`Do you want to delete SimpleScenarioGroup\xa0#${n.scenarioGroupId}`,rejectTitle:"Cancel",resolveTitle:"Delete"}),Mt("design:type",Function),Mt("design:paramtypes",[Object]),Mt("design:returntype",void 0)],ct.prototype,"delete",null);var Ht=u(266),Gt=function(n,s,e,i){var l,o=arguments.length,r=o<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,s,e,i);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(r=(o<3?l(r):o>3?l(s,e,r):l(s,e))||r);return o>3&&r&&Object.defineProperty(s,e,r),r},Y=function(n,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,s)};function tn(n,s){1&n&&(t.TgZ(0,"th",16),t._uU(1,"ID "),t.qZA())}function en(n,s){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("",e.scenarioId," ")}}function nn(n,s){1&n&&(t.TgZ(0,"th",16),t._uU(1,"Created On "),t.qZA())}function sn(n,s){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,e.createdOn,"MMM\xa0d,\xa0yyyy, HH:mm")," ")}}function on(n,s){1&n&&(t.TgZ(0,"th",16),t._uU(1,"Name"),t._UZ(2,"br"),t._uU(3,"Description"),t.qZA())}function rn(n,s){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t._UZ(2,"br"),t._uU(3),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.name),t.xp6(2),t.hij("",e.description," ")}}function ln(n,s){1&n&&t._UZ(0,"th",16)}const an=function(n,s){return["../..",n,"scenario",s,"details"]};function dn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",17),t._uU(1,"\n                            "),t.TgZ(2,"ct-flex",18),t._uU(3,"\n                                "),t.TgZ(4,"ct-flex-item"),t._uU(5,"\n                                    "),t.TgZ(6,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.runScenario(r))}),t._uU(7,"\n                                        "),t.TgZ(8,"mat-icon"),t._uU(9,"play_arrow"),t.qZA(),t._uU(10,"\n                                    "),t.qZA(),t._uU(11,"\n                                    "),t.TgZ(12,"button",20),t._uU(13,"\n                                        "),t.TgZ(14,"mat-icon"),t._uU(15,"edit_document"),t.qZA(),t._uU(16,"\n                                    "),t.qZA(),t._uU(17,"\n                                    "),t.TgZ(18,"button",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.copyScenario(r))}),t._uU(19,"\n                                        "),t.TgZ(20,"mat-icon"),t._uU(21,"content_copy"),t.qZA(),t._uU(22,"\n                                    "),t.qZA(),t._uU(23,"\n                                    "),t.TgZ(24,"button",22),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.delete(r))}),t._uU(25,"\n                                        "),t.TgZ(26,"mat-icon"),t._uU(27,"delete_forever"),t.qZA(),t._uU(28,"\n                                    "),t.qZA(),t._uU(29,"\n                                "),t.qZA(),t._uU(30,"\n                            "),t.qZA(),t._uU(31,"\n                        "),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(12),t.Q6J("routerLink",t.WLB(1,an,i.scenarioGroupId,e.scenarioId))}}function cn(n,s){1&n&&(t.TgZ(0,"tr",23),t._uU(1," "),t.qZA())}function un(n,s){1&n&&(t.TgZ(0,"tr",24),t._uU(1," "),t.qZA())}const gn=function(n){return["../..",n,"scenario-add"]};function fn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",1),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Scenarios"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.TgZ(14,"ct-flex-item",2),t._uU(15,"\n                    "),t.TgZ(16,"button",3)(17,"mat-icon"),t._uU(18,"note_add"),t.qZA()(),t._uU(19,"\n                "),t.qZA(),t._uU(20,"\n            "),t.qZA(),t._uU(21,"\n        "),t.qZA(),t._uU(22,"\n    "),t.qZA(),t._uU(23,"\n    "),t.TgZ(24,"ct-section-body"),t._uU(25,"\n        "),t.TgZ(26,"ct-section-body-row"),t._uU(27,"\n            "),t.TgZ(28,"ct-table",4),t._uU(29,"\n                "),t.TgZ(30,"table",5),t._uU(31,"\n                    "),t.ynx(32,6),t._uU(33,"\n                        "),t.YNc(34,tn,2,0,"th",7),t._uU(35,"\n                        "),t.YNc(36,en,2,1,"td",8),t._uU(37,"\n                    "),t.BQk(),t._uU(38,"\n                    "),t.ynx(39,9),t._uU(40,"\n                        "),t.YNc(41,nn,2,0,"th",7),t._uU(42,"\n                        "),t.YNc(43,sn,3,4,"td",8),t._uU(44,"\n                    "),t.BQk(),t._uU(45,"\n                    "),t.ynx(46,10),t._uU(47,"\n                        "),t.YNc(48,on,4,0,"th",7),t._uU(49,"\n                        "),t.YNc(50,rn,4,2,"td",8),t._uU(51,"\n                    "),t.BQk(),t._uU(52,"\n                    "),t.ynx(53,11),t._uU(54,"\n                        "),t.YNc(55,ln,1,0,"th",7),t._uU(56,"\n                        "),t.YNc(57,dn,32,4,"td",8),t._uU(58,"\n                    "),t.BQk(),t._uU(59,"\n                    "),t.YNc(60,cn,2,0,"tr",12),t._uU(61,"\n                    "),t.YNc(62,un,2,0,"tr",13),t._uU(63,"\n                "),t.qZA(),t._uU(64,"\n            "),t.qZA(),t._uU(65,"\n        "),t.qZA(),t._uU(66,"\n    "),t.qZA(),t._uU(67,"\n    "),t.TgZ(68,"ct-section-footer"),t._uU(69,"\n        "),t.TgZ(70,"ct-section-footer-row"),t._uU(71,"\n            "),t.TgZ(72,"ct-flex",1),t._uU(73,"\n                "),t.TgZ(74,"ct-flex-item"),t._uU(75,"\n                    "),t.TgZ(76,"ct-flex",14),t._uU(77,"\n                        "),t.TgZ(78,"ct-table-pagination",15),t.NdJ("prev",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.prevPage())})("next",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.nextPage())}),t.qZA(),t._uU(79,"\n                    "),t.qZA(),t._uU(80,"\n                "),t.qZA(),t._uU(81,"\n            "),t.qZA(),t._uU(82,"\n        "),t.qZA(),t._uU(83,"\n    "),t.qZA(),t._uU(84,"\n"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(16),t.Q6J("routerLink",t.VKq(6,gn,e.scenarioGroupId)),t.xp6(12),t.Q6J("isWaiting",e.isLoading),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",e.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",e.columnsToDisplay),t.xp6(16),t.Q6J("pageableDefault",e.scenariosResult.scenarios)}}class $ extends k.S{constructor(s,e,i,o){super(o),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"activatedRoute",void 0),(0,a.Z)(this,"authenticationService",void 0),(0,a.Z)(this,"dataSource",new m.by([])),(0,a.Z)(this,"columnsToDisplay",["id","createdOn","name","bts"]),(0,a.Z)(this,"scenariosResult",void 0),(0,a.Z)(this,"scenarioGroupId",void 0),this.dialog=s,this.scenarioService=e,this.activatedRoute=i,this.authenticationService=o}ngOnInit(){this.scenarioGroupId=this.activatedRoute.snapshot.paramMap.get("scenarioGroupId"),this.updateTable(0)}updateTable(s){this.setIsLoadingStart(),this.scenarioService.scenarios(s.toString(),this.scenarioGroupId).subscribe({next:e=>{this.scenariosResult=e,this.dataSource=new m.by(this.scenariosResult.scenarios.content||[])},complete:()=>{this.setIsLoadingEnd()}})}delete(s){this.scenarioService.scenarioDeleteCommit(s.scenarioId.toString()).subscribe(e=>this.updateTable(this.scenariosResult.scenarios.number))}runScenario(s){this.scenarioService.runScenario(s.scenarioGroupId.toString(),s.scenarioId.toString()).subscribe(e=>this.updateTable(this.scenariosResult.scenarios.number))}copyScenario(s){this.scenarioService.copyScenario(s.scenarioGroupId.toString(),s.scenarioId.toString()).subscribe(e=>this.updateTable(this.scenariosResult.scenarios.number))}nextPage(){this.updateTable(this.scenariosResult.scenarios.number+1)}prevPage(){this.updateTable(this.scenariosResult.scenarios.number-1)}}(0,a.Z)($,"\u0275fac",function(s){return new(s||$)(t.Y36(rt.uw),t.Y36(R),t.Y36(A.gz),t.Y36(M.$h))}),(0,a.Z)($,"\u0275cmp",t.Xpm({type:$,selectors:[["scenarios"]],features:[t.qOj],decls:2,vars:1,consts:[[4,"ngIf"],["justify-content","space-between"],["justify-content","flex-end"],["mat-icon-button","","color","primary",3,"routerLink"],[3,"isWaiting"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdOn"],["matColumnDef","name"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["justify-content","flex-start","gap","8px"],[3,"pageableDefault","prev","next"],["mat-header-cell",""],["mat-cell",""],["justify-content","flex-end","gap","8px"],["mat-icon-button","","color","accent","size","forTableRow","matTooltip","Execute scenario",3,"click"],["mat-icon-button","","color","primary","matTooltip","Edit scenario",3,"routerLink"],["mat-icon-button","","color","primary","matTooltip","Copy scenario",3,"click"],["mat-icon-button","","color","warn","size","forTableRow","matTooltip","Delete scenario",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,e){1&s&&(t.YNc(0,fn,85,8,"ct-section",0),t._uU(1,"\n")),2&s&&t.Q6J("ngIf",e.scenariosResult)},dependencies:[g.O5,A.rH,z.U,lt.n,at.V,dt.R,Ft.a,K.i,W.Z,X.t,tt.B,et.i,nt._,$t.C,I.RK,Ct.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,Ht.gM,g.uU],styles:[".mat-icon[_ngcontent-%COMP%]{margin-left:0;margin-right:0}"]})),Gt([(0,D.K)({question:n=>`Do you want to delete Scenario #${n.scenarioId}`,resolveTitle:"Delete",rejectTitle:"Cancel"}),Y("design:type",Function),Y("design:paramtypes",[Object]),Y("design:returntype",void 0)],$.prototype,"delete",null),Gt([(0,D.K)({question:n=>`Do you want to exec Scenario #${n.scenarioId}, ${n.name}`,resolveTitle:"Run scenario",rejectTitle:"Cancel"}),Y("design:type",Function),Y("design:paramtypes",[Object]),Y("design:returntype",void 0)],$.prototype,"runScenario",null),Gt([(0,D.K)({question:n=>`Do you want to copy Scenario #${n.scenarioId}, ${n.name}`,resolveTitle:"Copy scenario",rejectTitle:"Cancel"}),Y("design:type",Function),Y("design:paramtypes",[Object]),Y("design:returntype",void 0)],$.prototype,"copyScenario",null);var _t=u(535),Rt=u(2199),St=u(2379),wt=u(5510),Zt=u(284),O=u(9549);let mn=(()=>{class n{constructor(e,i,o){(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"activatedRoute",void 0),(0,a.Z)(this,"states",_t.C),(0,a.Z)(this,"currentStates",new Set),(0,a.Z)(this,"response",void 0),(0,a.Z)(this,"form",new c.cw({name:new c.NI("",[c.kI.required,c.kI.minLength(5)]),description:new c.NI("",[c.kI.required,c.kI.minLength(5)])})),(0,a.Z)(this,"button",void 0),this.scenarioService=e,this.router=i,this.activatedRoute=o}create(){this.button.disabled=!0,this.currentStates.add(this.states.wait);const e=this.scenarioService.addScenarioGroupFormCommit(this.form.value.name,this.form.value.description).subscribe(i=>{i.status===Rt.o.OK&&this.router.navigate(["../"],{relativeTo:this.activatedRoute})},()=>{},()=>{this.currentStates.delete(this.states.wait),e.unsubscribe()})}}return(0,a.Z)(n,"\u0275fac",function(e){return new(e||n)(t.Y36(R),t.Y36(A.F0),t.Y36(A.gz))}),(0,a.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["scenario-group-add"]],viewQuery:function(e,i){if(1&e&&t.Gf(I.lW,5),2&e){let o;t.iGM(o=t.CRH())&&(i.button=o.first)}},decls:74,vars:5,consts:[["align-items","baseline"],["size","6"],["novalidate","novalidate",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","text","autocomplete","name","formControlName","name"],["matInput","matInput","type","text","autocomplete","description","formControlName","description"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button","routerLink","/mhbp/scenario"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],["button",""]],template:function(e,i){1&e&&(t._uU(0,"\n"),t.TgZ(1,"ct-cols",0),t._uU(2,"\n  "),t.TgZ(3,"ct-col",1),t._uU(4,"\n    "),t.TgZ(5,"ct-section"),t._uU(6,"\n      "),t.TgZ(7,"ct-section-header"),t._uU(8,"\n        "),t.TgZ(9,"ct-section-header-row"),t._uU(10,"\n          "),t.TgZ(11,"ct-heading"),t._uU(12,"Add new Scenario group"),t.qZA(),t._uU(13,"\n        "),t.qZA(),t._uU(14,"\n      "),t.qZA(),t._uU(15,"\n      "),t.TgZ(16,"ct-section-body"),t._uU(17,"\n        "),t.TgZ(18,"form",2),t._uU(19,"\n          "),t.TgZ(20,"mat-form-field",3),t._uU(21,"\n            "),t.TgZ(22,"mat-label"),t._uU(23,"Name"),t.qZA(),t._uU(24,"\n            "),t._UZ(25,"input",4),t._uU(26,"\n            "),t.TgZ(27,"mat-hint"),t._uU(28,"This is a required field."),t.qZA(),t._uU(29,"\n          "),t.qZA(),t._uU(30,"\n          "),t._UZ(31,"br"),t._uU(32,"\n          "),t.TgZ(33,"mat-form-field",3),t._uU(34,"\n            "),t.TgZ(35,"mat-label"),t._uU(36,"Description"),t.qZA(),t._uU(37,"\n            "),t._UZ(38,"input",5),t._uU(39,"\n            "),t.TgZ(40,"mat-hint"),t._uU(41,"This is a required field."),t.qZA(),t._uU(42,"\n          "),t.qZA(),t._uU(43,"\n          "),t._UZ(44,"br"),t._uU(45,"\n        "),t.qZA(),t._uU(46,"\n      "),t.qZA(),t._uU(47,"\n\n      "),t.TgZ(48,"ct-section-footer"),t._uU(49,"\n        "),t.TgZ(50,"ct-section-footer-row"),t._uU(51,"\n          "),t.TgZ(52,"ct-flex",6),t._uU(53,"\n            "),t.TgZ(54,"ct-flex-item"),t._uU(55,"\n              "),t.TgZ(56,"button",7),t._uU(57),t.ALo(58,"translate"),t.qZA(),t._uU(59,"\n            "),t.qZA(),t._uU(60,"\n            "),t.TgZ(61,"ct-flex-item"),t._uU(62,"\n              "),t.TgZ(63,"button",8,9),t.NdJ("click",function(){return i.create()}),t._uU(65,"Add"),t.qZA(),t._uU(66,"\n            "),t.qZA(),t._uU(67,"\n          "),t.qZA(),t._uU(68,"\n        "),t.qZA(),t._uU(69,"\n      "),t.qZA(),t._uU(70,"\n    "),t.qZA(),t._uU(71,"\n  "),t.qZA(),t._uU(72,"\n"),t.qZA(),t._uU(73,"\n\n")),2&e&&(t.xp6(18),t.Q6J("formGroup",i.form),t.xp6(39),t.hij("\n                ",t.lcZ(58,3,"main.Cancel"),""),t.xp6(6),t.Q6J("disabled",!i.form.valid))},dependencies:[A.rH,z.U,at.V,dt.R,St.t,wt.W,K.i,W.Z,X.t,tt.B,et.i,nt._,I.lW,Zt.Nt,O.KE,O.hX,O.bx,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.X$],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]})),n})();var ut=u(1145);const pn=function(n){return["../..",n,"scenarios"]};let hn=(()=>{class n extends k.S{constructor(e,i,o,r,l,d){super(d),(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"activatedRoute",void 0),(0,a.Z)(this,"translate",void 0),(0,a.Z)(this,"settingsService",void 0),(0,a.Z)(this,"authenticationService",void 0),(0,a.Z)(this,"states",_t.C),(0,a.Z)(this,"currentStates",new Set),(0,a.Z)(this,"scenarioGroupId",void 0),(0,a.Z)(this,"form",new c.cw({name:new c.NI("",[c.kI.required,c.kI.minLength(5)]),description:new c.NI("",[c.kI.required,c.kI.minLength(5)])})),(0,a.Z)(this,"button",void 0),this.scenarioService=e,this.router=i,this.activatedRoute=o,this.translate=r,this.settingsService=l,this.authenticationService=d}ngOnInit(){this.scenarioGroupId=this.activatedRoute.snapshot.paramMap.get("scenarioGroupId"),this.subscribeSubscription(this.settingsService.events.subscribe(e=>{e instanceof ut.U&&this.translate.use(e.settings.language)})),this.updateResponse()}ngOnDestroy(){this.unsubscribeSubscriptions()}updateResponse(){}create(){this.button.disabled=!0,this.currentStates.add(this.states.wait);const e=this.scenarioService.addScenarioFormCommit(this.scenarioGroupId,this.form.value.name,this.form.value.description).subscribe(i=>{i.status===Rt.o.OK&&this.router.navigate(["../scenarios"],{relativeTo:this.activatedRoute})},()=>{},()=>{this.currentStates.delete(this.states.wait),e.unsubscribe()})}back(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}notToCreate(){return this.form.invalid}}return(0,a.Z)(n,"\u0275fac",function(e){return new(e||n)(t.Y36(R),t.Y36(A.F0),t.Y36(A.gz),t.Y36(p.sK),t.Y36(ut.g),t.Y36(M.$h))}),(0,a.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["scenario-add"]],viewQuery:function(e,i){if(1&e&&t.Gf(I.lW,5),2&e){let o;t.iGM(o=t.CRH())&&(i.button=o.first)}},features:[t.qOj],decls:80,vars:26,consts:[["size","6"],["novalidate","novalidate",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","text","autocomplete","name","formControlName","name"],["matInput","matInput","type","text","autocomplete","description","formControlName","description"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"routerLink"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",0),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"ct-section-body"),t._uU(17,"\n                "),t.TgZ(18,"ct-section-body-row"),t._uU(19,"\n                    "),t.TgZ(20,"form",1),t._uU(21,"\n                        "),t.TgZ(22,"mat-form-field",2),t._uU(23,"\n                            "),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._uU(27,"\n                            "),t._UZ(28,"input",3),t._uU(29,"\n                            "),t.TgZ(30,"mat-hint"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._uU(33,"\n                        "),t.qZA(),t._uU(34,"\n                        "),t._UZ(35,"br"),t._uU(36,"\n                        "),t._UZ(37,"br"),t._uU(38,"\n                        "),t.TgZ(39,"mat-form-field",2),t._uU(40,"\n                            "),t.TgZ(41,"mat-label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._uU(44,"\n                            "),t._UZ(45,"input",4),t._uU(46,"\n                            "),t.TgZ(47,"mat-hint"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\n                        "),t.qZA(),t._uU(51,"\n                    "),t.qZA(),t._uU(52,"\n                "),t.qZA(),t._uU(53,"\n            "),t.qZA(),t._uU(54,"\n\n            "),t.TgZ(55,"ct-section-footer"),t._uU(56,"\n                "),t.TgZ(57,"ct-section-footer-row"),t._uU(58,"\n                    "),t.TgZ(59,"ct-flex",5),t._uU(60,"\n                        "),t.TgZ(61,"ct-flex-item"),t._uU(62,"\n                            "),t.TgZ(63,"button",6),t._uU(64),t.ALo(65,"translate"),t.qZA(),t._uU(66,"\n                        "),t.qZA(),t._uU(67,"\n                        "),t.TgZ(68,"ct-flex-item"),t._uU(69,"\n                            "),t.TgZ(70,"button",7),t.NdJ("click",function(){return i.create()}),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._uU(73,"\n                        "),t.qZA(),t._uU(74,"\n                    "),t.qZA(),t._uU(75,"\n                "),t.qZA(),t._uU(76,"\n            "),t.qZA(),t._uU(77,"\n        "),t.qZA(),t._uU(78,"\n    "),t.qZA(),t._uU(79,"\n"),t.qZA()),2&e&&(t.xp6(11),t.Oqu(t.lcZ(12,10,"evaluation-add.Create a new evaluation for specific API")),t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(5),t.Oqu(t.lcZ(26,12,"main.Name")),t.xp6(6),t.Oqu(t.lcZ(32,14,"main.Name")),t.xp6(11),t.Oqu(t.lcZ(43,16,"main.Description")),t.xp6(6),t.Oqu(t.lcZ(49,18,"main.Description")),t.xp6(15),t.Q6J("routerLink",t.VKq(24,pn,i.scenarioGroupId)),t.xp6(1),t.hij("\n                                ",t.lcZ(65,20,"main.Cancel"),""),t.xp6(6),t.Q6J("disabled",i.notToCreate()),t.xp6(1),t.hij(" ",t.lcZ(72,22,"evaluation-add.Create"),""))},dependencies:[A.rH,z.U,lt.n,at.V,dt.R,St.t,wt.W,K.i,W.Z,X.t,tt.B,et.i,nt._,I.lW,Zt.Nt,O.KE,O.hX,O.bx,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.X$],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})),n})();var yt=u(1206),It=function(n,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,s)};function yn(n,s){1&n&&(t.TgZ(0,"th",15),t._uU(1,"apiCode "),t.qZA())}function An(n,s){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("",e.apiCode," ")}}function vn(n,s){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Name"),t.qZA())}function Cn(n,s){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.name)}}function Sn(n,s){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Prompt"),t.qZA())}function wn(n,s){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.Oqu(e.prompt)}}function Zn(n,s){1&n&&(t.TgZ(0,"th",15),t._uU(1,"Answer"),t.qZA())}function bn(n,s){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.xp6(1),t.hij("",e.answer," ")}}function Un(n,s){1&n&&t._UZ(0,"th",15)}const Tn=function(n){return["../step",n,"step-edit"]};function Dn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",16),t._uU(1,"\n                            "),t.TgZ(2,"ct-flex",17),t._uU(3,"\n                                "),t.TgZ(4,"ct-flex-item"),t._uU(5,"\n                                    "),t.TgZ(6,"button",18),t._uU(7,"Edit"),t.qZA(),t._uU(8,"\n                                "),t.qZA(),t._uU(9,"\n                                "),t.TgZ(10,"ct-flex-item"),t._uU(11,"\n                                    "),t.TgZ(12,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.delete(r))}),t._uU(13,"\n                                        "),t.TgZ(14,"mat-icon"),t._uU(15,"delete"),t.qZA(),t._uU(16,"\n                                    "),t.qZA(),t._uU(17,"\n                                "),t.qZA(),t._uU(18,"\n                            "),t.qZA(),t._uU(19,"\n                        "),t.qZA()}if(2&n){const e=s.$implicit;t.xp6(6),t.Q6J("routerLink",t.VKq(1,Tn,e.uuid))}}function Fn(n,s){1&n&&(t.TgZ(0,"tr",20),t._uU(1," "),t.qZA())}function Mn(n,s){1&n&&(t.TgZ(0,"tr",21),t._uU(1," "),t.qZA())}const Gn=function(){return["../","scenario-step-add"]};function Rn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",1),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Steps of Scenario"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-flex",2),t._uU(16,"\n                "),t.TgZ(17,"ct-flex-item"),t._uU(18,"\n                    "),t.TgZ(19,"button",3),t._uU(20,"Add Scenario Step"),t.qZA(),t._uU(21,"\n                "),t.qZA(),t._uU(22,"\n            "),t.qZA(),t._uU(23,"\n        "),t.qZA(),t._uU(24,"\n    "),t.qZA(),t._uU(25,"\n    "),t.TgZ(26,"ct-section-body"),t._uU(27,"\n        "),t.TgZ(28,"ct-section-body-row"),t._uU(29,"\n            "),t.TgZ(30,"ct-table",4),t._uU(31,"\n                "),t.TgZ(32,"table",5),t.NdJ("cdkDropListDropped",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.rearrangeTable(o))}),t._uU(33,"\n                    "),t.ynx(34,6),t._uU(35,"\n                        "),t.YNc(36,yn,2,0,"th",7),t._uU(37,"\n                        "),t.YNc(38,An,2,1,"td",8),t._uU(39,"\n                    "),t.BQk(),t._uU(40,"\n                    "),t.ynx(41,9),t._uU(42,"\n                        "),t.YNc(43,vn,2,0,"th",7),t._uU(44,"\n                        "),t.YNc(45,Cn,2,1,"td",8),t._uU(46,"\n                    "),t.BQk(),t._uU(47,"\n                    "),t.ynx(48,10),t._uU(49,"\n                        "),t.YNc(50,Sn,2,0,"th",7),t._uU(51,"\n                        "),t.YNc(52,wn,2,1,"td",8),t._uU(53,"\n                    "),t.BQk(),t._uU(54,"\n                    "),t.ynx(55,11),t._uU(56,"\n                        "),t.YNc(57,Zn,2,0,"th",7),t._uU(58,"\n                        "),t.YNc(59,bn,2,1,"td",8),t._uU(60,"\n                    "),t.BQk(),t._uU(61,"\n                    "),t.ynx(62,12),t._uU(63,"\n                        "),t.YNc(64,Un,1,0,"th",7),t._uU(65,"\n                        "),t.YNc(66,Dn,20,3,"td",8),t._uU(67,"\n                    "),t.BQk(),t._uU(68,"\n                    "),t.YNc(69,Fn,2,0,"tr",13),t._uU(70,"\n                    "),t.YNc(71,Mn,2,0,"tr",14),t._uU(72,"\n                "),t.qZA(),t._uU(73,"\n            "),t.qZA(),t._uU(74,"\n        "),t.qZA(),t._uU(75,"\n    "),t.qZA(),t._uU(76,"\n"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(19),t.Q6J("routerLink",t.DdM(5,Gn)),t.xp6(11),t.Q6J("isWaiting",e.isLoading),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(37),t.Q6J("matHeaderRowDef",e.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",e.columnsToDisplay)}}class gt extends k.S{constructor(s,e,i,o,r){super(r),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"activatedRoute",void 0),(0,a.Z)(this,"authenticationService",void 0),(0,a.Z)(this,"states",_t.C),(0,a.Z)(this,"currentStates",new Set),(0,a.Z)(this,"columnsToDisplay",["api","name","prompt","answer","bts"]),(0,a.Z)(this,"simpleScenarioSteps",void 0),(0,a.Z)(this,"scenarioGroupId",void 0),(0,a.Z)(this,"scenarioId",void 0),(0,a.Z)(this,"dataSource",new m.by([])),(0,a.Z)(this,"response",void 0),(0,a.Z)(this,"cancelCreationButton",void 0),this.dialog=s,this.scenarioService=e,this.router=i,this.activatedRoute=o,this.authenticationService=r}ngOnInit(){this.scenarioGroupId=this.activatedRoute.snapshot.paramMap.get("scenarioGroupId"),this.scenarioId=this.activatedRoute.snapshot.paramMap.get("scenarioId"),this.updateTable()}updateTable(){this.setIsLoadingStart(),this.scenarioService.scenarioSteps(this.scenarioGroupId,this.scenarioId).subscribe({next:s=>{this.simpleScenarioSteps=s,this.dataSource=new m.by(this.simpleScenarioSteps.steps||[])},complete:()=>{this.setIsLoadingEnd()}})}delete(s){this.scenarioService.scenarioStepDeleteCommit(s.scenarioId.toString(),s.uuid).subscribe(e=>this.updateTable())}rearrangeTable(s){if(s.previousIndex===s.currentIndex)return;let e=this.simpleScenarioSteps.steps[s.previousIndex].uuid,i=this.simpleScenarioSteps.steps[s.currentIndex].uuid;this.scenarioService.scenarioStepRearrangeTable(this.scenarioId.toString(),e,i).subscribe(o=>this.updateTable())}}(0,a.Z)(gt,"\u0275fac",function(s){return new(s||gt)(t.Y36(rt.uw),t.Y36(R),t.Y36(A.F0),t.Y36(A.gz),t.Y36(M.$h))}),(0,a.Z)(gt,"\u0275cmp",t.Xpm({type:gt,selectors:[["scenario-steps"]],viewQuery:function(s,e){if(1&s&&t.Gf(I.lW,5),2&s){let i;t.iGM(i=t.CRH())&&(e.cancelCreationButton=i.first)}},features:[t.qOj],decls:2,vars:1,consts:[[4,"ngIf"],["justify-content","space-between"],["justify-content","flex-end"],["mat-flat-button","mat-flat-button","color","primary",3,"routerLink"],[3,"isWaiting"],["mat-table","","cdkDropList","",3,"dataSource","cdkDropListDropped"],["matColumnDef","api"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","prompt"],["matColumnDef","answer"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","cdkDrag","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["justify-content","flex-end","gap","8px"],["mat-flat-button","","color","primary","size","forTableRow",3,"routerLink"],["mat-flat-button","","color","warn","size","forTableRow",3,"click"],["mat-header-row",""],["mat-row","","cdkDrag",""]],template:function(s,e){1&s&&(t.YNc(0,Rn,77,6,"ct-section",0),t._uU(1,"\n\n")),2&s&&t.Q6J("ngIf",e.simpleScenarioSteps)},dependencies:[g.O5,A.rH,z.U,lt.n,Ft.a,K.i,W.Z,X.t,tt.B,et.i,nt._,yt.Wj,yt.Zt,I.lW,Ct.Hw,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk]})),function(n,s,e,i){var l,o=arguments.length,r=o<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,s,e,i);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(r=(o<3?l(r):o>3?l(s,e,r):l(s,e))||r);o>3&&r&&Object.defineProperty(s,e,r)}([(0,D.K)({question:n=>`Do you want to delete Scenario Step #${n.uuid}`,resolveTitle:"Delete",rejectTitle:"Cancel"}),It("design:type",Function),It("design:paramtypes",[class xn{constructor(){(0,a.Z)(this,"nodeId",void 0),(0,a.Z)(this,"scenarioId",void 0),(0,a.Z)(this,"uuid",void 0),(0,a.Z)(this,"parentUuid",void 0),(0,a.Z)(this,"apiId",void 0),(0,a.Z)(this,"apiCode",void 0),(0,a.Z)(this,"name",void 0),(0,a.Z)(this,"prompt",void 0),(0,a.Z)(this,"r",void 0),(0,a.Z)(this,"resultCode",void 0),(0,a.Z)(this,"expected",void 0),(0,a.Z)(this,"isNew",void 0),(0,a.Z)(this,"functionCode",void 0),(0,a.Z)(this,"aggregateType",void 0),(0,a.Z)(this,"mode",void 0),(0,a.Z)(this,"steps",void 0)}}]),It("design:returntype",void 0)],gt.prototype,"delete",null);var Vt=u(3238),Jt=u(4385);function In(n,s){if(1&n&&(t.TgZ(0,"div"),t._uU(1,"\n                                "),t.TgZ(2,"mat-option",12),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Oqu(e.uid)}}const Ln=function(){return["../steps"]};function On(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"New Step"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"form",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-form-field",3),t._uU(22,"\n                            "),t.TgZ(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._uU(26,"\n                            "),t._UZ(27,"input",4),t._uU(28,"\n                            "),t.TgZ(29,"mat-hint"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._uU(32,"\n                        "),t.qZA(),t._uU(33,"\n                        "),t._UZ(34,"br"),t._uU(35,"\n                        "),t._UZ(36,"br"),t._uU(37,"\n                        "),t.TgZ(38,"mat-form-field",3),t._uU(39,"\n                            "),t.TgZ(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._uU(43,"\n                            "),t._UZ(44,"input",5),t._uU(45,"\n                            "),t.TgZ(46,"mat-hint"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._uU(49,"\n                        "),t.qZA(),t._uU(50,"\n                    "),t.qZA(),t._uU(51,"\n                "),t.qZA(),t._uU(52,"\n                "),t.TgZ(53,"ct-section-body-row"),t._uU(54,"\n                    "),t.TgZ(55,"mat-form-field",6),t._uU(56,"\n                        "),t.TgZ(57,"mat-label"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t._uU(60,"\n                        "),t.TgZ(61,"mat-select",7),t.NdJ("ngModelChange",function(o){t.CHM(e);const r=t.oxw();return t.KtG(r.apiUid=o)}),t._uU(62,"\n                            "),t.YNc(63,In,5,2,"div",8),t._uU(64,"\n                        "),t.qZA(),t._uU(65,"\n                        "),t.TgZ(66,"mat-hint"),t._uU(67),t.ALo(68,"translate"),t.qZA(),t._uU(69,"\n                    "),t.qZA(),t._uU(70,"\n                "),t.qZA(),t._uU(71,"\n            "),t.qZA(),t._uU(72,"\n\n            "),t.TgZ(73,"ct-section-footer"),t._uU(74,"\n                "),t.TgZ(75,"ct-section-footer-row"),t._uU(76,"\n                    "),t.TgZ(77,"ct-flex",9),t._uU(78,"\n                        "),t.TgZ(79,"ct-flex-item"),t._uU(80,"\n                            "),t.TgZ(81,"button",10),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._uU(84,"\n                        "),t.qZA(),t._uU(85,"\n                        "),t.TgZ(86,"ct-flex-item"),t._uU(87,"\n                            "),t.TgZ(88,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.create())}),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._uU(91,"\n                        "),t.qZA(),t._uU(92,"\n                    "),t.qZA(),t._uU(93,"\n                "),t.qZA(),t._uU(94,"\n            "),t.qZA(),t._uU(95,"\n        "),t.qZA(),t._uU(96,"\n    "),t.qZA(),t._uU(97,"\n"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(19),t.Q6J("formGroup",e.form),t.xp6(5),t.Oqu(t.lcZ(25,13,"main.Name")),t.xp6(6),t.Oqu(t.lcZ(31,15,"main.This is a required field")),t.xp6(11),t.Oqu(t.lcZ(42,17,"step.Prompt")),t.xp6(6),t.Oqu(t.lcZ(48,19,"main.This is a required field")),t.xp6(11),t.hij(" ",t.lcZ(59,21,"evaluation-add.List of APIs"),""),t.xp6(3),t.Q6J("ngModel",e.apiUid),t.xp6(2),t.Q6J("ngForOf",e.listOfApis),t.xp6(4),t.Oqu(t.lcZ(68,23,"main.This is a required field")),t.xp6(14),t.Q6J("routerLink",t.DdM(29,Ln)),t.xp6(1),t.hij("\n                                ",t.lcZ(83,25,"main.Cancel"),""),t.xp6(6),t.Q6J("disabled",e.notToCreate()),t.xp6(1),t.hij(" ",t.lcZ(90,27,"main.Create"),"")}}let En=(()=>{class n extends k.S{constructor(e,i,o,r,l,d){super(d),(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"activatedRoute",void 0),(0,a.Z)(this,"translate",void 0),(0,a.Z)(this,"settingsService",void 0),(0,a.Z)(this,"authenticationService",void 0),(0,a.Z)(this,"states",_t.C),(0,a.Z)(this,"currentStates",new Set),(0,a.Z)(this,"response",void 0),(0,a.Z)(this,"scenarioGroupId",void 0),(0,a.Z)(this,"scenarioId",void 0),(0,a.Z)(this,"apiUid",void 0),(0,a.Z)(this,"listOfApis",[]),(0,a.Z)(this,"form",new c.cw({name:new c.NI("",[c.kI.required,c.kI.minLength(5)]),prompt:new c.NI("",[c.kI.required,c.kI.minLength(5)])})),(0,a.Z)(this,"button",void 0),this.scenarioService=e,this.router=i,this.activatedRoute=o,this.translate=r,this.settingsService=l,this.authenticationService=d}ngOnInit(){this.scenarioGroupId=this.activatedRoute.snapshot.paramMap.get("scenarioGroupId"),this.scenarioId=this.activatedRoute.snapshot.paramMap.get("scenarioId"),this.subscribeSubscription(this.settingsService.events.subscribe(e=>{e instanceof ut.U&&this.translate.use(e.settings.language)})),this.updateResponse()}ngOnDestroy(){this.unsubscribeSubscriptions()}updateResponse(){this.scenarioService.scenarioStepAdd().subscribe(e=>{this.response=e,this.listOfApis=this.response.apis,this.isLoading=!1})}create(){this.button.disabled=!0,this.currentStates.add(this.states.wait);const e=this.scenarioService.addOrSaveScenarioStepFormCommit(this.scenarioGroupId,this.scenarioId,null,null,this.form.value.name,this.form.value.prompt,this.apiUid.id.toString(),"some code",null,null,null).subscribe(i=>{i.status===Rt.o.OK&&this.router.navigate(["../steps"],{relativeTo:this.activatedRoute})},()=>{},()=>{this.currentStates.delete(this.states.wait),e.unsubscribe()})}back(){this.router.navigate(["../steps"],{relativeTo:this.activatedRoute})}notToCreate(){return null==this.apiUid||this.form.invalid}}return(0,a.Z)(n,"\u0275fac",function(e){return new(e||n)(t.Y36(R),t.Y36(A.F0),t.Y36(A.gz),t.Y36(p.sK),t.Y36(ut.g),t.Y36(M.$h))}),(0,a.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["scenario-step-add"]],viewQuery:function(e,i){if(1&e&&t.Gf(I.lW,5),2&e){let o;t.iGM(o=t.CRH())&&(i.button=o.first)}},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["novalidate","novalidate",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","text","autocomplete","name","formControlName","name"],["matInput","matInput","type","text","autocomplete","prompt","formControlName","prompt"],["appearance","outline"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"routerLink"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,i){1&e&&t.YNc(0,On,98,30,"ct-cols",0),2&e&&t.Q6J("ngIf",i.response)},dependencies:[g.sg,g.O5,A.rH,z.U,lt.n,at.V,dt.R,St.t,wt.W,K.i,W.Z,X.t,tt.B,et.i,nt._,Vt.ey,I.lW,Zt.Nt,O.KE,O.hX,O.bx,Jt.gD,c._Y,c.Fj,c.JJ,c.JL,c.On,c.sg,c.u,p.X$],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})),n})();var zt=u(1135);u(9751),u(6451),u(7579),u(9300),u(8505);const Pn={provide:t.tb,useFactory:function Yn(n,s){return()=>{if((0,g.NF)(s)){const e=Array.from(n.querySelectorAll(`[class*=${ee}]`)),i=/\bflex-layout-.+?\b/g;e.forEach(o=>{o.classList.contains(`${ee}ssr`)&&o.parentNode?o.parentNode.removeChild(o):o.className.replace(i,"")})}}},deps:[g.K0,t.Lbi],multi:!0},ee="flex-layout-";let qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Pn]}),n})();const kt={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},q=new t.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>kt}),ft=new t.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),Nt=new t.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});class ui extends EventTarget{constructor(s){super(),this._mediaQuery=s,this._isActive=!1,this._listeners=[],this.onchange=null}get matches(){return this._isActive}get media(){return this._mediaQuery}destroy(){this.deactivate(),this._listeners=[]}activate(){return this._isActive||(this._isActive=!0,this._listeners.forEach(s=>{s.call(this,{matches:this.matches,media:this.media})})),this}deactivate(){return this._isActive&&(this._isActive=!1,this._listeners.forEach(s=>{s.call(this,{matches:this.matches,media:this.media})})),this}addListener(s){-1===this._listeners.indexOf(s)&&this._listeners.push(s),this._isActive&&s.call(this,{matches:this.matches,media:this.media})}removeListener(s){}dispatchEvent(s){return!1}}u(1281),u(2722),u(1481);let Ae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[qt]}),n})();var jt=u(445);let we=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[qt,jt.vT]}),n})(),Ge=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[qt]}),n})(),nr=(()=>{class n{constructor(e,i){(0,g.PM)(i)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,i=[]){return{ngModule:n,providers:e.serverLoaded?[{provide:q,useValue:{...kt,...e}},{provide:Nt,useValue:i,multi:!0},{provide:ft,useValue:!0}]:[{provide:q,useValue:{...kt,...e}},{provide:Nt,useValue:i,multi:!0}]}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ft),t.LFG(t.Lbi))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[we,Ae,Ge,we,Ae,Ge]}),n})();var ir=u(7851),st=u(5423),sr=u(9646),or=u(5017),h=u(2026),rr=u(2231),lr=u(4620),ar=u(9349),Re=function(n,s,e,i){var l,o=arguments.length,r=o<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,s,e,i);else for(var d=n.length-1;d>=0;d--)(l=n[d])&&(r=(o<3?l(r):o>3?l(s,e,r):l(s,e))||r);return o>3&&r&&Object.defineProperty(s,e,r),r},ht=function(n,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,s)};const dr=["execContexts"],cr=["formDirective"];function ur(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.stateOfTasks())}),t._uU(1,"\n                        "),t.TgZ(2,"mat-icon"),t._uU(3,"list"),t.qZA(),t._uU(4,"\n                    "),t.qZA()}}function gr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-flex-item",10),t._uU(1,"\n                    "),t.TgZ(2,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.startEditingScenarioInfo())}),t._uU(3,"\n                        "),t.TgZ(4,"mat-icon"),t._uU(5,"edit_document"),t.qZA(),t._uU(6,"\n                    "),t.qZA(),t._uU(7,"\n                    "),t.TgZ(8,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.runScenario())}),t._uU(9,"\n                        "),t.TgZ(10,"mat-icon"),t._uU(11,"play_arrow"),t.qZA(),t._uU(12,"\n                    "),t.qZA(),t._uU(13,"\n                    "),t.YNc(14,ur,5,0,"button",13),t._uU(15,"\n                "),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(14),t.Q6J("ngIf",e.isSourceCodeId())}}function fr(n,s){if(1&n&&(t.TgZ(0,"ct-section-body-row"),t._uU(1,"\n            "),t.TgZ(2,"form",15),t._uU(3,"\n                "),t.TgZ(4,"mat-form-field",16),t._uU(5,"\n                    "),t.TgZ(6,"mat-label"),t._uU(7,"Name of Scenario, min 5 chars, required"),t.qZA(),t._uU(8,"\n                    "),t._UZ(9,"input",17),t._uU(10,"\n                "),t.qZA(),t._uU(11,"\n                "),t.TgZ(12,"mat-form-field",16),t._uU(13,"\n                    "),t.TgZ(14,"mat-label"),t._uU(15,"Description of Scenario, min 5 chars, required"),t.qZA(),t._uU(16,"\n                    "),t._UZ(17,"textarea",18),t._uU(18,"\n                "),t.qZA(),t._uU(19,"\n            "),t.qZA(),t._uU(20,"\n        "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("formGroup",e.scenarioForm)}}function mr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-section-footer",6),t._uU(1,"\n        "),t.TgZ(2,"ct-section-footer-row"),t._uU(3,"\n            "),t.TgZ(4,"ct-flex",19),t._uU(5,"\n                "),t.TgZ(6,"ct-flex-item"),t._uU(7,"\n                    "),t.TgZ(8,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return o.isFormActive=!1,t.KtG(o.updateScenarioInfo())}),t._uU(9,"\n                        Save"),t.qZA(),t._uU(10,"\n                "),t.qZA(),t._uU(11,"\n                "),t.TgZ(12,"ct-flex-item"),t._uU(13,"\n                    "),t.TgZ(14,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.cancelUpdatingScenarioInfo())}),t._uU(15,"\n                        Cancel"),t.qZA(),t._uU(16,"\n                "),t.qZA(),t._uU(17,"\n            "),t.qZA(),t._uU(18,"\n        "),t.qZA(),t._uU(19,"\n    "),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(8),t.Q6J("disabled",e.notToUpdateScenarioInfo())}}function pr(n,s){if(1&n&&(t.TgZ(0,"ct-section"),t._uU(1,"\n    "),t.TgZ(2,"ct-section-body",6),t._uU(3,"\n        "),t.TgZ(4,"ct-section-body-row"),t._uU(5,"\n            "),t.TgZ(6,"ct-flex",7),t._uU(7,"\n                "),t.TgZ(8,"ct-flex-item"),t._uU(9),t._UZ(10,"br"),t._uU(11),t.qZA(),t._uU(12,"\n                "),t.YNc(13,gr,16,1,"ct-flex-item",8),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n        "),t.qZA(),t._uU(16,"\n        "),t.YNc(17,fr,21,1,"ct-section-body-row",0),t._uU(18,"\n    "),t.qZA(),t._uU(19,"\n    "),t.YNc(20,mr,20,1,"ct-section-footer",9),t._uU(21,"\n"),t.qZA()),2&n){const e=t.oxw();t.xp6(9),t.hij("\n                    Scenario: ",e.simpleScenarioSteps.scenarioInfo.name,""),t.xp6(2),t.hij("\n                    ",e.simpleScenarioSteps.scenarioInfo.description,"\n                "),t.xp6(2),t.Q6J("ngIf",!e.newNodePresent()&&!e.isFormActive),t.xp6(4),t.Q6J("ngIf",e.isFormActive),t.xp6(3),t.Q6J("ngIf",e.isFormActive)}}function hr(n,s){if(1&n&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE("\n                                ",e.id,", ",e.uid,"\n                            ")}}function xr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-cols",22),t._uU(1,"\n    "),t.TgZ(2,"ct-col",23),t._uU(3,"\n        "),t.TgZ(4,"ct-section"),t._uU(5,"\n            "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"ct-heading"),t._uU(11,"Add the first step to Scenario"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"form",15,24),t._uU(19,"\n                    "),t.TgZ(20,"mat-form-field",25),t._uU(21,"\n                        "),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-select",26),t._uU(27,"\n                            "),t.YNc(28,hr,2,3,"mat-option",27),t._uU(29,"\n                        "),t.qZA(),t._uU(30,"\n                        "),t.TgZ(31,"mat-hint"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n                    "),t.TgZ(36,"mat-form-field",16),t._uU(37,"\n                        "),t.TgZ(38,"mat-label"),t._uU(39,"Prompt name, min 5 chars, required"),t.qZA(),t._uU(40,"\n                        "),t._UZ(41,"input",17),t._uU(42,"\n                    "),t.qZA(),t._uU(43,"\n                    "),t.TgZ(44,"mat-form-field",16),t._uU(45,"\n                        "),t.TgZ(46,"mat-label"),t._uU(47,"Prompt, min 3 chars, required"),t.qZA(),t._uU(48,"\n                        "),t._UZ(49,"textarea",28),t._uU(50,"\n                    "),t.qZA(),t._uU(51,"\n                    "),t.TgZ(52,"mat-form-field",16),t._uU(53,"\n                        "),t.TgZ(54,"mat-label"),t._uU(55,"Code of result, min 3 chars, required"),t.qZA(),t._uU(56,"\n                        "),t._UZ(57,"input",29),t._uU(58,"\n                    "),t.qZA(),t._uU(59,"\n                "),t.qZA(),t._uU(60,"\n            "),t.qZA(),t._uU(61,"\n            "),t.TgZ(62,"ct-section-footer"),t._uU(63,"\n                "),t.TgZ(64,"ct-section-footer-row"),t._uU(65,"\n                    "),t.TgZ(66,"ct-flex",19),t._uU(67,"\n                        "),t.TgZ(68,"ct-flex-item"),t._uU(69,"\n                            "),t.TgZ(70,"button",30,31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.createFirstDetail())}),t._uU(72,"Create"),t.qZA(),t._uU(73,"\n                        "),t.qZA(),t._uU(74,"\n                    "),t.qZA(),t._uU(75,"\n                "),t.qZA(),t._uU(76,"\n            "),t.qZA(),t._uU(77,"\n        "),t.qZA(),t._uU(78,"\n    "),t.qZA(),t._uU(79,"\n"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(17),t.Q6J("formGroup",e.form),t.xp6(6),t.hij(" ",t.lcZ(24,5,"evaluation-add.List of APIs"),""),t.xp6(5),t.Q6J("ngForOf",e.listOfApis),t.xp6(4),t.Oqu(t.lcZ(33,7,"main.This is a required field")),t.xp6(38),t.Q6J("disabled",e.notToCreate())}}function _r(n,s){1&n&&(t.TgZ(0,"ct-heading"),t._uU(1,"New step"),t.qZA())}function yr(n,s){1&n&&(t.TgZ(0,"ct-heading"),t._uU(1,"Edit step"),t.qZA())}function Ar(n,s){if(1&n&&(t.TgZ(0,"mat-option",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.lcZ(2,2,"scenario-function-"+e.code))}}function vr(n,s){if(1&n&&(t.TgZ(0,"mat-form-field",41),t._uU(1,"\n                                    "),t.TgZ(2,"mat-label"),t._uU(3,"Type of processing"),t.qZA(),t._uU(4,"\n                                    "),t.TgZ(5,"mat-select",42),t._uU(6,"\n                                        "),t.YNc(7,Ar,3,4,"mat-option",27),t._uU(8,"\n                                    "),t.qZA(),t._uU(9,"\n                                    "),t.TgZ(10,"mat-hint"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                                "),t.qZA()),2&n){const e=t.oxw(3);t.xp6(7),t.Q6J("ngForOf",e.listOfFunctions),t.xp6(4),t.Oqu(t.lcZ(12,2,"main.This is a required field"))}}function Cr(n,s){if(1&n&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.uid)}}function Sr(n,s){if(1&n&&(t.TgZ(0,"mat-form-field",41),t._uU(1,"\n                                    "),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5,"\n                                    "),t.TgZ(6,"mat-select",26),t._uU(7,"\n                                        "),t.YNc(8,Cr,2,2,"mat-option",27),t._uU(9,"\n                                    "),t.qZA(),t._uU(10,"\n                                    "),t.TgZ(11,"mat-hint"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._uU(14,"\n                                "),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.Oqu(t.lcZ(4,3,"evaluation-add.List of APIs")),t.xp6(5),t.Q6J("ngForOf",e.listOfApis),t.xp6(4),t.Oqu(t.lcZ(13,5,"main.This is a required field"))}}function wr(n,s){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Prompt name, min 5 chars, required"),t.qZA())}function Zr(n,s){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Name of process, min 5 chars, required"),t.qZA())}function br(n,s){1&n&&(t.TgZ(0,"mat-form-field",16),t._uU(1,"\n                                    "),t.TgZ(2,"mat-label"),t._uU(3,"Prompt, min 3 chars, required"),t.qZA(),t._uU(4,"\n                                    "),t._UZ(5,"textarea",28),t._uU(6,"\n                                "),t.qZA())}function Ur(n,s){1&n&&(t.TgZ(0,"mat-form-field",16),t._uU(1,"\n                                    "),t.TgZ(2,"mat-label"),t._uU(3,"Input data, must be defined before, in 3 chars"),t.qZA(),t._uU(4,"\n                                    "),t._UZ(5,"textarea",43),t._uU(6,"\n                                "),t.qZA())}function Tr(n,s){1&n&&(t.TgZ(0,"mat-form-field",16),t._uU(1,"\n                                    "),t.TgZ(2,"mat-label"),t._uU(3,"Expected result of calling API, min 1 chars, required"),t.qZA(),t._uU(4,"\n                                    "),t._UZ(5,"input",44),t._uU(6,"\n                                "),t.qZA())}function Dr(n,s){if(1&n&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Fr(n,s){if(1&n&&(t.TgZ(0,"mat-form-field",41),t._uU(1,"\n                                    "),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5,"\n                                    "),t.TgZ(6,"mat-select",45),t._uU(7,"\n                                        "),t.YNc(8,Dr,2,2,"mat-option",27),t._uU(9,"\n                                    "),t.qZA(),t._uU(10,"\n                                    "),t.TgZ(11,"mat-hint"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._uU(14,"\n                                "),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.Oqu(t.lcZ(4,3,"evaluation-add.Type of aggregation")),t.xp6(5),t.Q6J("ngForOf",e.listOfAggregateTypes),t.xp6(4),t.Oqu(t.lcZ(13,5,"main.This is a required field"))}}function Mr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-flex",19),t._uU(1,"\n                                "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw();return r.showMyContainer=!1,t.KtG(r.saveNode(o))}),t._uU(5,"\n                                        Create"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                                    "),t.TgZ(10,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.deleteNewNode(o))}),t._uU(11,"\n                                        Delete"),t.qZA(),t._uU(12,"\n                                "),t.qZA(),t._uU(13,"\n                            "),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("disabled",e.notToCreate())}}function Gr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-flex",19),t._uU(1,"\n                                "),t.TgZ(2,"ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw();return r.showMyContainer=!1,t.KtG(r.saveNode(o))}),t._uU(5,"\n                                        Save"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                                "),t.TgZ(8,"ct-flex-item"),t._uU(9,"\n                                    "),t.TgZ(10,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.setModeToShow(o))}),t._uU(11,"\n                                        Cancel"),t.qZA(),t._uU(12,"\n                                "),t.qZA(),t._uU(13,"\n                            "),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(4),t.Q6J("disabled",e.notToCreate())}}function Rr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ct-cols",36),t._uU(1,"\n            "),t.TgZ(2,"ct-col",6),t._uU(3,"\n                "),t.TgZ(4,"ct-section"),t._uU(5,"\n                    "),t.TgZ(6,"ct-section-header"),t._uU(7,"\n                        "),t.TgZ(8,"ct-section-header-row"),t._uU(9,"\n                            "),t.TgZ(10,"ct-section-header-row"),t._uU(11,"\n                                "),t.TgZ(12,"ct-flex",37),t._uU(13,"\n                                    "),t.TgZ(14,"ct-flex-item"),t._uU(15,"\n                                        "),t.YNc(16,_r,2,0,"ct-heading",0),t._uU(17,"\n                                        "),t.YNc(18,yr,2,0,"ct-heading",0),t._uU(19,"\n                                    "),t.qZA(),t._uU(20,"\n                                    "),t.TgZ(21,"ct-flex-item"),t._uU(22,"\n                                        "),t.TgZ(23,"ct-flex",19),t._uU(24,"\n                                            "),t.TgZ(25,"ct-flex-item"),t._uU(26,"\n                                                "),t.TgZ(27,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.isApi=!o.isApi)}),t._uU(28,"API"),t.qZA(),t._uU(29,"\n                                            "),t.qZA(),t._uU(30,"\n                                            "),t.TgZ(31,"ct-flex-item"),t._uU(32,"\n                                                "),t.TgZ(33,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.isApi=!o.isApi)}),t._uU(34,"Processing"),t.qZA(),t._uU(35,"\n                                            "),t.qZA(),t._uU(36,"\n                                        "),t.qZA(),t._uU(37,"\n                                    "),t.qZA(),t._uU(38,"\n                                "),t.qZA(),t._uU(39,"\n                            "),t.qZA(),t._uU(40,"\n                        "),t.qZA(),t._uU(41,"\n                    "),t.qZA(),t._uU(42,"\n                    "),t.TgZ(43,"ct-section-body"),t._uU(44,"\n                        "),t.TgZ(45,"ct-section-body-row"),t._uU(46,"\n                            "),t.TgZ(47,"form",15,24),t._uU(49,"\n                                "),t.YNc(50,vr,14,4,"mat-form-field",38),t._uU(51,"\n                                "),t.YNc(52,Sr,15,7,"mat-form-field",38),t._uU(53,"\n                                "),t.TgZ(54,"mat-form-field",16),t._uU(55,"\n                                    "),t.YNc(56,wr,2,0,"mat-label",0),t._uU(57,"\n                                    "),t.YNc(58,Zr,2,0,"mat-label",0),t._uU(59,"\n                                    "),t._UZ(60,"input",17),t._uU(61,"\n                                "),t.qZA(),t._uU(62,"\n                                "),t.YNc(63,br,7,0,"mat-form-field",39),t._uU(64,"\n                                "),t.YNc(65,Ur,7,0,"mat-form-field",39),t._uU(66,"\n                                "),t.TgZ(67,"mat-form-field",16),t._uU(68,"\n                                    "),t.TgZ(69,"mat-label"),t._uU(70,"Code of result, min 3 chars, required"),t.qZA(),t._uU(71,"\n                                    "),t._UZ(72,"input",29),t._uU(73,"\n                                "),t.qZA(),t._uU(74,"\n                                "),t.YNc(75,Tr,7,0,"mat-form-field",39),t._uU(76,"\n                                "),t.YNc(77,Fr,15,7,"mat-form-field",38),t._uU(78,"\n                            "),t.qZA(),t._uU(79,"\n                        "),t.qZA(),t._uU(80,"\n                    "),t.qZA(),t._uU(81,"\n                    "),t.TgZ(82,"ct-section-footer"),t._uU(83,"\n                        "),t.TgZ(84,"ct-section-footer-row"),t._uU(85,"\n                            "),t.YNc(86,Mr,14,1,"ct-flex",40),t._uU(87,"\n                            "),t.YNc(88,Gr,14,1,"ct-flex",40),t._uU(89,"\n                        "),t.qZA(),t._uU(90,"\n                    "),t.qZA(),t._uU(91,"\n                "),t.qZA(),t._uU(92,"\n            "),t.qZA(),t._uU(93,"\n        "),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(16),t.Q6J("ngIf",i.modeNewNode(e)),t.xp6(2),t.Q6J("ngIf",i.modeEditNode(e)),t.xp6(9),t.Q6J("disabled",i.isApi),t.xp6(6),t.Q6J("disabled",!i.isApi),t.xp6(14),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("ngIf",!i.isApi),t.xp6(2),t.Q6J("ngIf",i.isApiNeeded()),t.xp6(4),t.Q6J("ngIf",i.isApi),t.xp6(2),t.Q6J("ngIf",!i.isApi),t.xp6(5),t.Q6J("ngIf",i.isApi),t.xp6(2),t.Q6J("ngIf",!i.isApi),t.xp6(10),t.Q6J("ngIf",i.isAcceptanceTestFunc()),t.xp6(2),t.Q6J("ngIf",i.isMhAggregateFunc()),t.xp6(9),t.Q6J("ngIf",i.modeNewNode(e)),t.xp6(2),t.Q6J("ngIf",i.modeEditNode(e))}}function Ir(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",33),t.NdJ("mouseenter",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.dragHover(r))})("mouseleave",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragHoverEnd())})("cdkDragStarted",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragStart())})("cdkDragReleased",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragEnd())}),t._uU(1,"\n        "),t._UZ(2,"button",34),t._uU(3,"\n\n        "),t.YNc(4,Rr,94,15,"ct-cols",35),t._uU(5,"\n    "),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw();t.Q6J("cdkDragData",e),t.xp6(4),t.Q6J("ngIf",i.showMyContainer)}}function Lr(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",46),t.NdJ("mouseenter",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.dragHover(r))})("mouseleave",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragHoverEnd())})("cdkDragStarted",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragStart())})("cdkDragReleased",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragEnd())}),t._uU(1,"\n        "),t.TgZ(2,"button",47),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.expansionModel.toggle(r.uuid))}),t._uU(3,"\n            "),t.TgZ(4,"mat-icon",48),t._uU(5),t.qZA(),t._uU(6,"\n        "),t.qZA(),t._uU(7),t._UZ(8,"br"),t._uU(9),t._UZ(10,"br"),t._uU(11),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw();t.Q6J("cdkDragData",e),t.xp6(2),t.uIk("aria-label","toggle "+e.uuid),t.xp6(3),t.hij("\n                ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right","\n            "),t.xp6(2),t.hij("\n        ",e.name,""),t.xp6(2),t.hij(" ",e.prompt,""),t.xp6(2),t.hij("Result code: [[",e.resultCode,"]]\n    ")}}function Or(n,s){if(1&n&&(t.ynx(0),t._UZ(1,"br"),t._uU(2),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij("expected: ",e.expected,"")}}function Er(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",46),t.NdJ("mouseenter",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.dragHover(r))})("mouseleave",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragHoverEnd())})("cdkDragStarted",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragStart())})("cdkDragReleased",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dragEnd())}),t._uU(1,"\n        "),t._uU(2,"\n        "),t.TgZ(3,"button",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.expansionModel.toggle(r.uuid))}),t._uU(4,"\n            "),t.TgZ(5,"mat-icon",48),t._uU(6),t.qZA(),t._uU(7,"\n        "),t.qZA(),t._uU(8),t._UZ(9,"br"),t._uU(10),t._UZ(11,"br"),t._uU(12),t.YNc(13,Or,3,1,"ng-container",0),t._uU(14,"\n        "),t.TgZ(15,"button",50),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.addNewStubItem(r))}),t._uU(16,"\n            "),t.TgZ(17,"mat-icon"),t._uU(18,"add"),t.qZA()(),t._uU(19,"\n        "),t.TgZ(20,"button",51),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.startEditingNode(r))}),t._uU(21,"\n            "),t.TgZ(22,"mat-icon"),t._uU(23,"edit_document"),t.qZA(),t._uU(24,"\n        "),t.qZA(),t._uU(25,"\n       "),t.TgZ(26,"button",52),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.delete(r))}),t._uU(27,"\n            "),t.TgZ(28,"mat-icon"),t._uU(29,"delete_forever"),t.qZA(),t._uU(30,"\n        "),t.qZA(),t._uU(31,"\n    "),t.qZA()}if(2&n){const e=s.$implicit,i=t.oxw();t.Q6J("cdkDragData",e),t.xp6(3),t.uIk("aria-label","toggle "+e.uuid),t.xp6(3),t.hij("\n                ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right","\n            "),t.xp6(2),t.AsE("\n        Type: ",i.MhUtils.isNull(e.functionCode)?"API: "+e.apiCode:"Process: "+e.functionCode,", Name: ",e.name,""),t.xp6(2),t.Oqu(e.prompt),t.xp6(2),t.hij("Result code: [[",e.resultCode,"]]\n        "),t.xp6(1),t.Q6J("ngIf",i.isMhAcceptanceTestNode(e))}}function qr(n,s){if(1&n&&(t._uU(0,"\n    "),t.ynx(1),t._uU(2,"\n        "),t._UZ(3,"ct-exec-contexts",53),t._uU(4,"\n    "),t.BQk(),t._uU(5,"\n")),2&n){const e=t.oxw();t.xp6(3),t.Q6J("sourceCodeId",e.sourceCodeId)}}const Ie="mh.acceptance-test";var b=(()=>{return(n=b||(b={})).new="new",n.edit="edit",n.show="show",b;var n})();class Nr{constructor(s,e){(0,a.Z)(this,"node",void 0),(0,a.Z)(this,"parent",void 0),this.node=s,this.parent=e}}class Le{constructor(s,e,i,o,r,l,d,x,f,_,y,B,V,Qt,ot){(0,a.Z)(this,"nodeId",void 0),(0,a.Z)(this,"expandable",void 0),(0,a.Z)(this,"level",void 0),(0,a.Z)(this,"uuid",void 0),(0,a.Z)(this,"apiId",void 0),(0,a.Z)(this,"apiCode",void 0),(0,a.Z)(this,"name",void 0),(0,a.Z)(this,"prompt",void 0),(0,a.Z)(this,"r",void 0),(0,a.Z)(this,"resultCode",void 0),(0,a.Z)(this,"expected",void 0),(0,a.Z)(this,"isNew",void 0),(0,a.Z)(this,"functionCode",void 0),(0,a.Z)(this,"aggregateType",void 0),(0,a.Z)(this,"mode",void 0),this.nodeId=s,this.expandable=e,this.level=i,this.uuid=o,this.apiId=r,this.apiCode=l,this.name=d,this.prompt=x,this.r=f,this.resultCode=_,this.expected=y,this.isNew=B,this.functionCode=V,this.aggregateType=Qt,this.mode=ot}}class L extends k.S{ngAfterViewInit(){}ngOnInit(){this.scenarioGroupId=this.activatedRoute.snapshot.paramMap.get("scenarioGroupId"),this.scenarioId=this.activatedRoute.snapshot.paramMap.get("scenarioId"),this.subscribeSubscription(this.settingsService.events.subscribe(s=>{s instanceof ut.U&&this.translate.use(s.settings.language)})),this.loadAssetsForCreation(),this.updateTree(),this.getSourceCodeId()}ngOnDestroy(){this.unsubscribeSubscriptions()}constructor(s,e,i,o,r,l,d,x){super(x),(0,a.Z)(this,"router",void 0),(0,a.Z)(this,"scenarioService",void 0),(0,a.Z)(this,"activatedRoute",void 0),(0,a.Z)(this,"translate",void 0),(0,a.Z)(this,"settingsService",void 0),(0,a.Z)(this,"dialog",void 0),(0,a.Z)(this,"execContextService",void 0),(0,a.Z)(this,"authenticationService",void 0),(0,a.Z)(this,"execContexts",void 0),(0,a.Z)(this,"treeControl",void 0),(0,a.Z)(this,"treeFlattener",void 0),(0,a.Z)(this,"dataSource",void 0),(0,a.Z)(this,"expansionModel",new or.Ov(!0)),(0,a.Z)(this,"dragging",!1),(0,a.Z)(this,"expandTimeout",void 0),(0,a.Z)(this,"expandDelay",1e3),(0,a.Z)(this,"validateDrop",!1),(0,a.Z)(this,"listOfApis",[]),(0,a.Z)(this,"listOfFunctions",[]),(0,a.Z)(this,"listOfAggregateTypes",[]),(0,a.Z)(this,"response",void 0),(0,a.Z)(this,"scenarioGroupId",void 0),(0,a.Z)(this,"scenarioId",void 0),(0,a.Z)(this,"sourceCodeId",void 0),(0,a.Z)(this,"needToExpandAll",!0),(0,a.Z)(this,"showMyContainer",!0),(0,a.Z)(this,"isFormActive",!1),(0,a.Z)(this,"allUuids",[]),(0,a.Z)(this,"isApi",!0),(0,a.Z)(this,"dataChange",new zt.X([])),(0,a.Z)(this,"dataTree",void 0),(0,a.Z)(this,"simpleScenarioSteps",null),(0,a.Z)(this,"form",new c.cw({name:new c.NI("",[c.kI.required,c.kI.minLength(5)]),prompt:new c.NI("",[c.kI.required,c.kI.minLength(3)]),resultCode:new c.NI("",[c.kI.required,c.kI.minLength(3)]),apiUid:new c.NI(null),aggregateType:new c.NI(null),processingFunction:new c.NI(null),expected:new c.NI("")})),(0,a.Z)(this,"scenarioForm",new c.cw({name:new c.NI("",[c.kI.required,c.kI.minLength(5)]),description:new c.NI("",[c.kI.required,c.kI.minLength(5)])})),(0,a.Z)(this,"formDirective",void 0),(0,a.Z)(this,"currentStates",new Set),(0,a.Z)(this,"states",_t.C),(0,a.Z)(this,"button",void 0),(0,a.Z)(this,"transformer",(f,_)=>{let y=h.C.len(f.steps),B=h.C.randomIntAsStr(1e3,999999);f.nodeId=B;let V=new Le(B,y>0,_,f.uuid,f.apiId,f.apiCode,f.name,f.prompt,f.r,f.resultCode,f.expected,f.isNew,f.functionCode,f.aggregateType,h.C.isNull(f.mode)?b.show:f.mode);return this.allUuids.push(f.uuid),console.log("07.15 transformer(), stepFlatNode: ",V),V}),(0,a.Z)(this,"_getLevel",f=>f.level),(0,a.Z)(this,"_isExpandable",f=>f.expandable),(0,a.Z)(this,"_getChildren",f=>(0,sr.of)(f.steps)),(0,a.Z)(this,"hasChild",(f,_)=>_.expandable),(0,a.Z)(this,"hasNoContent",(f,_)=>(console.log("hasNoContent()",JSON.stringify(_)),L.anyMode(_.mode,[b.new,b.edit]))),(0,a.Z)(this,"hasNewNodeAbsent",(f,_)=>!this.hasNewNodePresent(f,_)),(0,a.Z)(this,"hasNewNodePresent",(f,_)=>this.newNodePresent()||this.isFormActive),(0,a.Z)(this,"modeEditOrNewNode",(f,_)=>L.anyMode(_.mode,[b.new,b.edit])),(0,a.Z)(this,"modeEditNode",f=>L.anyMode(f.mode,[b.edit])),(0,a.Z)(this,"modeNewNode",f=>L.anyMode(f.mode,[b.new])),(0,a.Z)(this,"modeShowAllNode",(f,_)=>!this.nodeWithModePresent([b.new,b.edit])),(0,a.Z)(this,"modeEditSomeNode",(f,_)=>this.nodeWithModePresent([b.edit])),(0,a.Z)(this,"modeNewSomeNode",(f,_)=>this.nodeWithModePresent([b.new])),(0,a.Z)(this,"MhUtils",h.C),this.router=s,this.scenarioService=e,this.activatedRoute=i,this.translate=o,this.settingsService=r,this.dialog=l,this.execContextService=d,this.authenticationService=x,this.treeFlattener=new st.JZ(this.transformer,this._getLevel,this._isExpandable,this._getChildren),this.treeControl=new ir.C2(this._getLevel,this._isExpandable),this.dataSource=new st.kc(this.treeControl,this.treeFlattener),this.dataChange.subscribe(f=>this.rebuildTreeForData(f))}notToCreate(){let s=h.C.isNull(this.form.value.apiUid)&&h.C.isNull(this.form.value.processingFunction),e=this.form.invalid,i=!this.isApi&&this.isMhAcceptanceTest()&&(0===h.C.len(this.form.value.expected)||h.C.isNull(this.form.value.apiUid));return console.log("notToCreate() ",s,e,i),s||e||i}isApiNeeded(){return this.isApi||this.isMhAcceptanceTest()}loadAssetsForCreation(){this.setIsLoadingStart(),this.scenarioService.scenarioStepAdd().subscribe(s=>{this.response=s,this.listOfApis=this.response.apis,this.listOfFunctions=this.response.functions,this.listOfAggregateTypes=this.response.aggregateTypes,this.isLoading=!1})}dataSourceEmpty(){return 0===h.C.len(this.dataTree)}isMhAggregate(){return h.C.isNotNull(this.form.value.processingFunction)&&"mh.aggregate"===this.form.value.processingFunction.code}isMhAggregateFunc(){return!this.isApi&&this.isMhAggregate()}isAcceptanceTestFunc(){return!this.isApi&&this.isMhAcceptanceTest()}isMhAcceptanceTest(){return h.C.isNotNull(this.form.value.processingFunction)&&this.form.value.processingFunction.code===Ie}isMhAcceptanceTestNode(s){return h.C.isNotNull(s.functionCode)&&s.functionCode===Ie}shouldValidate(s){this.validateDrop=s.checked}visibleNodes(){const s=[];function e(i,o){s.push(i),o.includes(i.uuid)&&h.C.isNotNull(i.steps)&&i.steps.map(r=>e(r,o))}return this.dataSource.data.forEach(i=>{e(i,this.expansionModel.selected)}),s}drop(s){if(console.log("37.10 origin/destination",s.previousIndex,s.currentIndex),s.previousIndex===s.currentIndex||!s.isPointerOverContainer)return;console.log("37.20 drop()");let e=this.visibleNodes();console.log("37.23 drop(), currVisibleNodes: ",e);const i=e[s.currentIndex],o=e[s.previousIndex];console.log("37.25 drop(), prev --\x3e, curr: ",o.uuid,i.uuid),console.log("37.25 drop(), prev --\x3e, curr: ",o,i),console.log("37.50 drop()"),this.scenarioService.scenarioStepRearrangeTable(this.scenarioId.toString(),o.uuid,i.uuid).subscribe({next:r=>this.updateTree(),complete:()=>this.setIsLoadingEnd()})}updateTree(){this.setIsLoadingStart(),this.scenarioService.scenarioSteps(this.scenarioGroupId,this.scenarioId).subscribe({next:s=>{this.simpleScenarioSteps=s,this.dataTree=s.steps,this.dataChange.next(this.dataTree)},complete:()=>{this.setIsLoadingEnd()}})}dragStart(){this.dragging=!0}dragEnd(){this.dragging=!1}dragHover(s){this.dragging&&(clearTimeout(this.expandTimeout),this.expandTimeout=setTimeout(()=>{this.treeControl.expand(s)},this.expandDelay))}dragHoverEnd(){this.dragging&&clearTimeout(this.expandTimeout)}rebuildTreeForData(s){this.dataSource.data=s,this.refreshTree()}refreshTree(){this.needToExpandAll&&h.C.isNotNull(this.simpleScenarioSteps)?(this.needToExpandAll=!1,this.treeControl.expandAll(),this.allUuids.forEach(s=>this.expansionModel.select(s))):this.treeControl.collapseAll(),this.expansionModel.selected.forEach(s=>{const e=this.treeControl.dataNodes.find(i=>i.uuid===s);h.C.isNotNull(e)&&this.treeControl.expand(e)})}expandNodesById(s,e){if(h.C.isNull(s)||0===s.length)return;const i=new Set(e);return s.forEach(o=>{if(i.has(o.nodeId)){this.treeControl.expand(o);let r=this.getParentNode(o);for(;r;)this.treeControl.expand(r),r=this.getParentNode(r)}})}getParentNode(s){const e=s.level;if(e<1)return null;for(let o=this.treeControl.dataNodes.indexOf(s)-1;o>=0;o--){const r=this.treeControl.dataNodes[o];if(r.level<e)return r}return null}findInTree(s){return this.findInTreeWithParent(s,null)}findInTreeWithParent(s,e){if(h.C.isNull(s))return null;for(let i=0;i<this.dataTree.length;i++){const o=this.dataTree[i];console.log("10.01",o);let r=this.findInBranch(s,o,e);if(h.C.isNotNull(r))return r}return null}findInBranch(s,e,i){if(e.nodeId===s.nodeId)return new Nr(e,i);if(h.C.isNotNull(e.steps)){for(const o of e.steps){let r=this.findInBranch(s,o,e);if(h.C.isNotNull(r))return r}return null}}updateScenarioInfo(){this.currentStates.add(this.states.wait),this.isFormActive=!1;const s=this.scenarioService.updateScenarioInfoFormCommit(this.scenarioGroupId,this.scenarioId,this.scenarioForm.value.name,this.scenarioForm.value.description).subscribe(e=>{this.updateTree()},()=>{},()=>{this.currentStates.delete(this.states.wait),s.unsubscribe()})}notToUpdateScenarioInfo(){return this.scenarioForm.invalid}cancelUpdatingScenarioInfo(){this.isFormActive=!1,this.dataChange.next(this.dataTree)}startEditingScenarioInfo(){this.scenarioForm=new c.cw({name:new c.NI(this.simpleScenarioSteps.scenarioInfo.name,[c.kI.required,c.kI.minLength(5)]),description:new c.NI(this.simpleScenarioSteps.scenarioInfo.description,[c.kI.required,c.kI.minLength(5)])}),this.isFormActive=!0,this.dataChange.next(this.dataTree)}startEditingNode(s){this.showMyContainer=!0;let e=this.findInTree(s);console.log("50.10",JSON.stringify(e)),e.node.isNew=!0,e.node.mode=b.edit,this.form=new c.cw({name:new c.NI(e.node.name,[c.kI.required,c.kI.minLength(5)]),prompt:new c.NI(e.node.prompt,[c.kI.required,c.kI.minLength(3)]),resultCode:new c.NI(e.node.resultCode,[c.kI.required,c.kI.minLength(3)]),apiUid:new c.NI(null),aggregateType:new c.NI(null),processingFunction:new c.NI(null),expected:new c.NI(e.node.expected)});const i=this.listOfApis.find(o=>o.uid==e.node.apiCode);if(this.form.get("apiUid").setValue(i),h.C.isNull(e.node.functionCode))this.isApi=!0;else{this.isApi=!1;const o=this.listOfFunctions.find(r=>r.code==e.node.functionCode);this.form.get("processingFunction").setValue(o),this.form.get("aggregateType").setValue(e.node.aggregateType)}console.log("50.20",this.isApi,this.form.value.apiUid,this.form.value.processingFunction,this.form.value.aggregateType),this.dataChange.next(this.dataTree)}addNewStubItem(s){this.showMyContainer=!0,console.log("10.10",s),this.treeControl.expand(s);let e=this.findInTree(s);console.log("10.11",e),this.addNewNode(e.node),this.dataChange.next(this.dataTree)}createFirstDetail(){console.log("27.10",this.form.value.apiUid),this.saveStepInternal(null,null)}saveNode(s){let e=this.form.value.name,i=h.C.len(e);if(console.log("MhUtils.len(itemValue.length)",e,i),i<5)return;console.log("10.20",s);let o=this.findInTree(s);console.log("10.21",o),console.log("10.22",this.form.value.apiUid),this.saveStepInternal(h.C.isNull(s.uuid)?null:s.uuid,h.C.isNull(o.parent)?null:o.parent.uuid)}saveStepInternal(s,e){this.button.disabled=!0,this.currentStates.add(this.states.wait);let i=this.form.value.name,o=this.form.value.prompt,r=this.form.value.resultCode,l=h.C.isNull(this.form.value.processingFunction)?null:this.form.value.processingFunction.code,d=h.C.isNull(this.form.value.aggregateType)?null:this.form.value.aggregateType,x=this.form.value.expected,f=this.isApiNeeded()?this.form.value.apiUid.id.toString():null;this.formDirective.resetForm(),this.form.reset();const _=this.scenarioService.addOrSaveScenarioStepFormCommit(this.scenarioGroupId,this.scenarioId,s,e,i,o,f,r,l,d,x).subscribe(y=>{this.updateTree()},()=>{},()=>{this.currentStates.delete(this.states.wait),_.unsubscribe()})}delete(s){this.scenarioService.scenarioStepDeleteCommit(this.scenarioId.toString(),s.uuid).subscribe(e=>this.updateTree())}deleteNewNode(s){console.log("10.20",s);let e=this.findInTree(s);console.log("10.21",e),this.deleteNode(e),this.formDirective.resetForm(),this.form.reset()}deleteNode(s){let e;e=h.C.isNull(s.parent)?this.dataTree:s.parent.steps;for(let i=0;i<e.length;i++)e[i].nodeId===s.node.nodeId&&e.splice(i,1);this.dataChange.next(this.dataTree)}addNewNode(s){h.C.isNull(s.steps)&&(s.steps=[]),s.steps.push({uuid:"",nodeId:h.C.randomIntAsStr(1e3,999999),isNew:!0,mode:b.new}),this.dataChange.next(this.dataTree)}updateNode(s,e){s.name=e,s.isNew=!1,s.mode=b.show,this.dataChange.next(this.dataTree)}newNodePresent(){if(h.C.isNull(this.dataTree))return!1;for(const s of this.dataTree)if(this.findNewStubNodeInBranch(s))return!0;return!1}findNewStubNodeInBranch(s){if(h.C.isTrue(s.isNew))return!0;if(h.C.isNotNull(s.steps)){for(const e of s.steps)if(this.findNewStubNodeInBranch(e))return!0;return!1}}nodeWithModePresent(s){if(h.C.isNull(this.dataTree))return!1;for(const e of this.dataTree)if(this.findNodeWithModeInBranch(e,s))return!0;return!1}findNodeWithModeInBranch(s,e){if(L.anyMode(s.mode,e))return!0;if(h.C.isNotNull(s.steps)){for(const i of s.steps)if(this.findNodeWithModeInBranch(i,e))return!0;return!1}}static anyMode(s,e){if(h.C.isNull(s))return!1;for(const i of e)if(i===s)return!0;return!1}setModeToShow(s){s.mode=b.show,s.isNew=!1,console.log("40.20",s);let e=this.findInTree(s);e.node.mode=b.show,e.node.isNew=!1,this.formDirective.resetForm(),this.form.reset(),this.dataChange.next(this.dataTree)}runScenario(){this.scenarioService.runScenario(this.scenarioGroupId.toString(),this.scenarioId.toString()).subscribe(s=>{this.getSourceCodeId()})}getSourceCodeId(){this.scenarioService.querySourceCodeId(this.scenarioGroupId.toString(),this.scenarioId.toString()).subscribe(s=>{this.sourceCodeId=h.C.isNotNull(s)&&h.C.isNotNull(s.simpleSourceCode)?s.simpleSourceCode.id.toString():null})}stateOfTasks(){this.dialog.open(this.execContexts,{width:"100%"})}isSourceCodeId(){return h.C.isNotNull(this.sourceCodeId)}}(0,a.Z)(L,"\u0275fac",function(s){return new(s||L)(t.Y36(A.F0),t.Y36(R),t.Y36(A.gz),t.Y36(p.sK),t.Y36(ut.g),t.Y36(rt.uw),t.Y36(rr.w),t.Y36(M.$h))}),(0,a.Z)(L,"\u0275cmp",t.Xpm({type:L,selectors:[["scenario-details"]],viewQuery:function(s,e){if(1&s&&(t.Gf(dr,5),t.Gf(cr,5),t.Gf(I.lW,5)),2&s){let i;t.iGM(i=t.CRH())&&(e.execContexts=i.first),t.iGM(i=t.CRH())&&(e.formDirective=i.first),t.iGM(i=t.CRH())&&(e.button=i.first)}},features:[t.qOj],decls:15,vars:7,consts:[[4,"ngIf"],["align-items","baseline","style","width: 100%;",4,"ngIf"],["cdkDropList","",3,"dataSource","treeControl","cdkDropListDropped"],["matTreeNodePadding","","cdkDrag","",3,"cdkDragData","mouseenter","mouseleave","cdkDragStarted","cdkDragReleased",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding","","cdkDrag","",3,"cdkDragData","mouseenter","mouseleave","cdkDragStarted","cdkDragReleased",4,"matTreeNodeDef","matTreeNodeDefWhen"],["execContexts",""],[2,"width","50%"],["gap","8px","justify-content","space-between"],["justify-content","flex-end",4,"ngIf"],["style","width: 50%;",4,"ngIf"],["justify-content","flex-end"],["mat-icon-button","","matTooltip","Edit scenario info","color","primary",3,"click"],["mat-icon-button","","matTooltip","Execute scenario","color","primary",3,"click"],["mat-icon-button","","matTooltip","Tasks","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Tasks","color","primary",3,"click"],["novalidate","novalidate",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","type","text","autocomplete","off","formControlName","name"],["formControlName","description","matInput","matInput","cdkTextareaAutosize","cdkTextareaAutosize","cdkAutosizeMinRows","5","value","","autocomplete","off"],["justify-content","flex-end","gap","8px"],["mat-flat-button","","color","primary","size","forTableRow",3,"disabled","click"],["mat-flat-button","","color","accent","size","forTableRow",3,"click"],["align-items","baseline",2,"width","100%"],[2,"width","80%"],["formDirective","ngForm"],["appearance","outline"],["formControlName","apiUid"],[3,"value",4,"ngFor","ngForOf"],["formControlName","prompt","matInput","matInput","cdkTextareaAutosize","cdkTextareaAutosize","cdkAutosizeMinRows","10","value","","autocomplete","off"],["matInput","","type","text","autocomplete","off","formControlName","resultCode"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],["button",""],[3,"value"],["matTreeNodePadding","","cdkDrag","",3,"cdkDragData","mouseenter","mouseleave","cdkDragStarted","cdkDragReleased"],["mat-icon-button","","disabled",""],["style","width: 100%;",4,"ngIf"],[2,"width","100%"],["justify-content","space-between","gap","9px"],["appearance","outline","style","width: 50%;",4,"ngIf"],["appearance","outline","style","width: 100%;",4,"ngIf"],["justify-content","flex-end","gap","8px",4,"ngIf"],["appearance","outline",2,"width","50%"],["formControlName","processingFunction"],["formControlName","prompt","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","10","value","","autocomplete","off"],["matInput","","type","text","autocomplete","off","formControlName","expected"],["formControlName","aggregateType"],["matTreeNodeToggle","","matTreeNodePadding","","cdkDrag","",3,"cdkDragData","mouseenter","mouseleave","cdkDragStarted","cdkDragReleased"],["mat-icon-button","","matTreeNodeToggle","","matTooltip","Expand node",3,"click"],[1,"mat-icon-rtl-mirror"],["mat-icon-button","","matTreeNodeToggle","",3,"click"],["mat-icon-button","","matTooltip","Add new step","color","primary",3,"click"],["mat-icon-button","","matTooltip","Edit step","color","primary",3,"click"],["mat-icon-button","","matTooltip","Delete step","color","warn",3,"click"],[3,"sourceCodeId"]],template:function(s,e){1&s&&(t.YNc(0,pr,22,5,"ct-section",0),t._uU(1,"\n\n"),t.YNc(2,xr,80,9,"ct-cols",1),t._uU(3,"\n\n\n"),t.TgZ(4,"mat-tree",2),t.NdJ("cdkDropListDropped",function(o){return e.drop(o)}),t._uU(5,"\n    "),t.YNc(6,Ir,6,2,"mat-tree-node",3),t._uU(7,"\n\n    "),t.YNc(8,Lr,12,6,"mat-tree-node",4),t._uU(9,"\n\n    "),t.YNc(10,Er,32,8,"mat-tree-node",4),t._uU(11,"\n"),t.qZA(),t._uU(12,"\n\n"),t.YNc(13,qr,6,1,"ng-template",null,5,t.W1O)),2&s&&(t.Q6J("ngIf",e.MhUtils.isNotNull(e.simpleScenarioSteps)),t.xp6(2),t.Q6J("ngIf",e.dataSourceEmpty()),t.xp6(2),t.Q6J("dataSource",e.dataSource)("treeControl",e.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",e.modeEditOrNewNode),t.xp6(2),t.Q6J("matTreeNodeDefWhen",e.hasNewNodePresent),t.xp6(2),t.Q6J("matTreeNodeDefWhen",e.hasNewNodeAbsent))},dependencies:[g.sg,g.O5,z.U,lt.n,at.V,dt.R,St.t,wt.W,K.i,W.Z,X.t,tt.B,et.i,nt._,lr.I,yt.Wj,yt.Zt,Vt.ey,I.lW,I.RK,Ct.Hw,Zt.Nt,O.KE,O.hX,O.bx,ar.IC,Jt.gD,Ht.gM,st.fQ,st.ah,st.eu,st.gi,st.uo,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.X$],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{margin-right:4px}.mat-tree[_ngcontent-%COMP%]{padding-top:15px}.mat-tree-node[_ngcontent-%COMP%]{min-height:20px;padding-bottom:15px}.mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-%COMP%]{width:32px;height:32px;padding:6px}"]})),Re([(0,D.K)({question:n=>`Do you want to delete Step #${n.name}`,resolveTitle:"Delete",rejectTitle:"Cancel"}),ht("design:type",Function),ht("design:paramtypes",[Le]),ht("design:returntype",void 0)],L.prototype,"delete",null),Re([(0,D.K)({question:()=>"Do you want to exec Scenario",resolveTitle:"Run scenario",rejectTitle:"Cancel"}),ht("design:type",Function),ht("design:paramtypes",[]),ht("design:returntype",void 0)],L.prototype,"runScenario",null);const Oe=[{path:"",component:ct},{path:"scenario-group-add",component:mn,data:{backConfig:["../"]}},{path:":scenarioGroupId/scenario-add",component:hn,data:{backConfig:["../","scenarios"]}},{path:":scenarioGroupId/scenarios",component:$,canActivate:[F.k],data:{backConfig:["../","../",""],requiredRoles:[M.uU.Admin]}},{path:":scenarioGroupId/scenario/:scenarioId/steps",component:gt,canActivate:[F.k],data:{backConfig:["../","../","../","scenarios"],requiredRoles:[M.uU.Admin]}},{path:":scenarioGroupId/scenario/:scenarioId/details",component:L,canActivate:[F.k],data:{backConfig:["../","../","../","scenarios"],requiredRoles:[M.uU.Admin]}},{path:":scenarioGroupId/scenario/:scenarioId/scenario-step-add",component:En,canActivate:[F.k],data:{backConfig:["../","steps"],requiredRoles:[M.uU.Admin]}}];let Ee=(()=>{class n{}return(0,a.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,a.Z)(n,"\u0275mod",t.oAB({type:n})),(0,a.Z)(n,"\u0275inj",t.cJS({imports:[A.Bz.forChild(Oe),A.Bz]})),n})(),Br=(()=>{class n{}return(0,a.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,a.Z)(n,"\u0275mod",t.oAB({type:n})),(0,a.Z)(n,"\u0275inj",t.cJS({imports:[g.ez,Ee,E.E,G.$,c.u5,c.UX,p.aw.forChild({}),yt._t,m.p0,nr]})),n})()}}]);